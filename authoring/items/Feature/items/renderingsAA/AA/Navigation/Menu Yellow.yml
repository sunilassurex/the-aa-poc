---
ID: "6527bd80-9c45-460e-afb9-602438110594"
Parent: "1a3449e0-81f0-4826-a4e1-b4995c8a178e"
Template: "5995f7ca-293b-4930-971c-a758f9976a26"
Path: /sitecore/layout/Renderings/Feature/AA/Navigation/Menu Yellow
SharedFields:
- ID: "1084d3d2-0457-456a-abbc-eb4cc0966072"
  Hint: VaryByQueryString
  Value: 1
- ID: "2e51df70-d3e4-458c-b03a-95c734dd39e7"
  Hint: Data source
  Value: 
- ID: "3ad2506a-dc39-4b1e-959f-9d524addbf50"
  Hint: VaryByParm
  Value: 
- ID: "3d08db46-2267-41b0-bc52-be69fd618633"
  Hint: Cacheable
  Value: 
- ID: "51b435bc-f7b9-478a-9c51-52916af96ff5"
  Hint: Path
  Value: /Views/ContentViewRendering.cshtml
- ID: "8b6d532b-6128-4486-a044-ca06d90948ba"
  Hint: VaryByData
  Value: 
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20200915T063150Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\paul_petersen
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "d30e7dd7-4ac3-4dd0-b415-7c6bda02652d"
    - ID: "acce9b46-1f19-4d3d-a0ec-ed01d807bb7d"
      Hint: RazorView
      Value: |
        @using Sitecore.Mvc.Presentation
        @using Sitecore.Data;
        @using System.Web;
        @using TheAA.Foundation.Rendering;
        @model RenderingModel
        @{var item = Utility.HtmlPlus.Sitecore().DataSourceOrContextItem();}
        @helper TopLevelMenuHelper(Sitecore.Data.Items.Item megaMenuItem)
        {
            var RenderMenuItem = true;
            if (megaMenuItem == null)
            {
        <!-- megaMenuItem == null -->
                RenderMenuItem = false;
            }
        
            if (megaMenuItem.GetField("Contents").Contains("<!-- not a menu item -->"))
            {
        <!-- not a menu item -->
                RenderMenuItem = false;
            }
        
            if (RenderMenuItem)
            {
                var menuState = new MenuState(System.Web.HttpContext.Current, megaMenuItem);
                var megamenuItemName = megaMenuItem.Name.Replace(" ", "").ToLower();
        
                var menuparam = System.Web.HttpContext.Current.Request.QueryString.Get("menu");
                var menu = menuparam == null ? string.Empty : menuparam.ToLower();
                var MenuSecondLevel = string.Empty;
                var menuSplit = menu.Split('-');
        
        <li class="primary-item has-children @menuState.GetMenuActiveClass()">
            <a href="?menu=@megamenuItemName" class="nojs">@megaMenuItem.Name</a>
            <span class="toggle"></span>
            <span class="mobile-toggle"></span>
            @{
            if (menuSplit.Length > 1)
            {
            MenuSecondLevel = menuSplit[1];
            }
        
            var contents = string.Empty;
            if (megaMenuItem == null)
            {
            <!-- could not find megamenu item with the name:@menuState.MenuTopLevel -->
            }
            else
            {
            if (!string.IsNullOrEmpty(menuparam))
            {
            var ContentsField = megaMenuItem.GetField("Contents");
            contents = ContentsField.RenderValue().ToString();
            contents = contents.Replace(menu + "---", "");
            }
            else
            {
            <div class="menureplace-@megamenuItemName" />
            }
            }
            }
            @contents
        </li>
            }
        }
        
        
        <script>
            // wait for JQuery to download
            function defer(method) {
                if (window.jQuery) {
                    method();
                } else {
                    setTimeout(function () { defer(method) }, 50);
                }
            }
            defer(function () {
                console.log("jQuery is now loaded");
                MenuAfterJQueryLoaded();
            });
        
        
            function MenuAfterJQueryLoaded() {
        
        
        
                /*
                 * ---------------------------------------- *
                 * Name: 	AA Helpers JavaScripts          *
                 * Type: 	JavaScript                      *
                 * Version: Not Versioned                   *
                 * Author:  Codehouse                       *
                 * ---------------------------------------- *
                 */
        
                /*
                 * site helper methods
                 */
        
                console.log("MenuAfterJQueryLoaded started");
                window.aa || (window.aa = {});
                window.aa.helpers = {
                    cache: {
                        cachedElements: (new function () {
                            this.$window = $(window);
                            this.$document = $(document);
                            this.$html = $('html');
                            this.$body = $('body');
                            this.$main = $('#main');
                            this.$footer = $('#site-footer');
                            this.isExperienceEditor = this.$body.hasClass('experience-editor');
                            this.url = window.location.pathname;
                        }()),
                        constants: {
                            TABLET_LANDSCAPE: 1024,
                            TABLET_BREAKPOINT: 880,
                            MOBILE_BREAKPOINT: 737
                        },
                        //registerCookie: new Cookie()
                    },
        
                    // truncate text with no option to reveal the rest or "read more/less"
                    truncateText: function (text, nr) {
                        var truncatedText = text.trim().substring(0, nr).split(' ').slice(0, -1).join(' ');
        
                        if (text.length > nr) {
                            return truncatedText;
                        } else {
                            return false;
                        }
                    }
                };
        
        
        
                $(document).ready(function () {
                    console.log('document ready')
        
                    console.log('setup links to fire Ajax');
                    $('li.primary-item > a.nojs').each(function () {
                        console.log('change each link to use JS instead of href');
                        var link = $(this);
                        link.click(function () {
                            console.log('START link.click(function () {');
                            if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                                console.log('Link clicked so fire Ajax to retrieve menu');
                                $.ajax({
                                    //url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2FContent%2FHome%2Fbreakdown-cover%2Fadvice%2Fbasic-car-checks%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2Fcontent%2FTheAA%2FGlobal%2FNavigation%2FHeader%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    dataType: 'json', async: true,
                                    success: function (data) {
                                        console.log('ajax data success GRAPH QL')
                                        $.each(data.data.item.children, function () {
                                            console.log(this.id);
                                            var menuName = this.name.toLowerCase().split(' ').join('')
                                            $('.menureplace-' + menuName).replaceWith(this.field.Contents);
                                        });
                                        MenuLinksRemoveHref();
                                        SetupMenu();
        
                                        //megaMenuMobile();
                                        $('#primary-navigation').attr('menudownloadedbyajax', 'true');
                                        console.log('START link.click(); after ajax')
                                        link.click();
                                        console.log('END   link.click(); after ajax')
                                    },
                                    fail: function (jqXHR, textStatus, errorThrown) {
                                        console.log('ajax request failed: ' + textStatus)
                                        alert("ajax request failed: " + textStatus);
                                    }
                                });
                            } else {
                                console.log(link[0].outerHTML);
                                console.log('menudownloadedbyajax == true so dont run Ajax anymore');
                            }
                            console.log('END   link.click(function () {');
                        });
                        console.log('change href to javascipt void    ...' + link.attr('href'));
                        link.attr('href', 'javascript:void(0)');
                    });
                    console.log("now hide nojs and show js");
                    //megaMenuMobile();
        
                });
                function MenuLinksRemoveHref() {
                    console.log("START MenuLinksRemoveHref");
                    $("li.primary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        //            e.attr("href", "javascript:void(0)");
                        e.removeClass('nojs');
                        e.addClass('js');
                    });
        
                    // rework secondary menus - backup href, swap class and remove href to let the JS handle event
                    $("li.secondary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        e.removeClass('nojs');
                        e.addClass('js');
                        e.attr('href', 'javascript:void(0)');
                    });
                    /*     */
        
                    $('.js').show();
                    console.log("END MenuLinksRemoveHref");
                }
        // taken from Header.js
        
        /* 
         * ---------------------------------------- *
         * Name:    Header JavaScripts              *
         * Type: 	JavaScript                      *
         * Version: Not Versioned                   *
         * Author:	Thomas Dale | Codehouse         *
         * ---------------------------------------- *
         */
        
        //(function ($) {
        
            var $header = $('#site-header, #sales-journey-header'),
                $primaryNavigation = $header.find('#primary-navigation'),
                $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container'),
                $aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover'),
                $megaMenuContainer = $primaryNavigation.find('.mega-menu'),
                $secondLevelNavigation,
                headerHeight = $header.outerHeight(),
                resizeTimer,
                navDelayTimer;
        
        
        
            // apply class to allow header to be fixed
            function stickyHeader() {
        
                // disable sticky header on mobile only
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    return;
                }
        
                if (window.aa.helpers.cache.cachedElements.$window.scrollTop() >= headerHeight) {
                    $header.addClass('sticky');
                    $aaRoutePlannerTakeover.addClass('hidden');
                    window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: headerHeight });
        
                } else {
                    $header.removeClass('sticky');
                    $aaRoutePlannerTakeover.removeClass('hidden');
        
                    //if (client.Mobile) {
                        //    setTimeout(function () {
                        //        window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                        //    });
        
                        //} else {
                        window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                        //}
                    }
        
                    $('.my-account').removeClass('active');
        
                }
        
        
        
        
                // taken from Header.js (function ($) {
                function SetupMenu() {
        
                    console.log('script downloaded and replaced is now running');
                    //$header = $('#site-header, #sales-journey-header');
                    $primaryNavigation = $header.find('#primary-navigation');
                    $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container');
                    //$aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover');
                    $megaMenuContainer = $primaryNavigation.find('.mega-menu');
                    $secondLevelNavigation;
                    //headerHeight = $header.outerHeight();
                    //resizeTimer;
                    //navDelayTimer;
        
        
                    // mega menu dropdown
                    function megaMenu() {
        
                        var $primaryNavigationItem = $(this),
                            $secondaryNavItem = $primaryNavigationItem.find('.secondary-item'),
                            $secondaryItemsOverlay = $primaryNavigation.find('.second-level-nav-overlay'),
                            $primaryNavigationItems = window.aa.helpers.cache.cachedElements.$body.find('.primary-item'),
                            $megaMenu = $primaryNavigationItem.find('.mega-menu'),
                            $navPanels = $primaryNavigationItem.find('.nav-panels'),
                            $subComponents = $navPanels.find('.sub-component'),
                            $myAccount = $header.find('#component-my-account');
        
                        $megaMenu.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width() });
        
                        if ($myAccount.length) {
                            $myAccount.closest('.primary-item').addClass('account-link');
                        }
        
                        function revealMegaMenu() {
        
                            var $secondaryItem = $megaMenu.find('.secondary-item'),
                                $secondaryNavPanels = $megaMenu.find('.nav-panels');
        
                            if ($primaryNavigationItem.hasClass('has-children') && !$primaryNavigationItem.hasClass('active')) {
        
                                if ($primaryNavigationItem.find('.my-aa-account').length) {
                                    $navPanels.addClass('open');
                                }
        
                                if ($primaryNavigationItem.hasClass('account-link')) {
                                    window.aa.helpers.cache.cachedElements.$body.addClass('account-details-active');
                                }
        
                                window.aa.helpers.cache.cachedElements.$body.addClass('nav-open');
                                $primaryNavigationItems.removeClass('active');
                                $primaryNavigationItem.addClass('active');
        
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                    $secondaryItem.removeClass('active');
                                    $secondaryItem.filter(':first').addClass('active');
                                    $secondaryNavPanels.removeClass('open');
                                    $secondaryNavPanels.filter(':first-of-type').addClass('open');
                                    if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                        $secondaryItemsOverlay.show();
                                    }
                                }
                            } else {
                                window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                                $primaryNavigationItems.removeClass('active');
                            }
                        }
        
                        function hideMegamenu() {
                            clearTimeout(navDelayTimer);
                            window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                            $primaryNavigationItems.add($secondaryNavItem).removeClass('active');
                            $navPanels.removeClass('open');
                        }
        
                        function resetMegamenu() {
                            hideMegamenu();
                            $megaMenu.css({ height: 'auto' });
                        }
        
                        if ($megaMenu.length) {
                            $primaryNavigationItem.addClass('has-children');
                        }
        
                        $('.editorial-panel').each(function () {
                            $(this).closest('.nav-panels').addClass('editorial');
                        });
        
                        detectMobileNavigation();
        
                        $primaryNavigationItem.on({
                            click: function (e) {
        
                                var $target = $(this),
                                    isActive = $target.filter('.active');
        
                                if ($primaryNavigationItem.hasClass('active')) {
                                    if (!isActive.is(e.target) && isActive.has(e.target).length === 0) {
                                        resetMegamenu();
                                    }
        
                                    return true;
                                } else {
        
                                    if (!$target.hasClass('has-children') || $target.hasClass('menu-item-clicked')) {
                                        return true;
                                    }
                                    revealMegaMenu();
                                    $megaMenu.css({ height: $target.find('.second-level-navigation').height() });
                                }
        
                                $(this).siblings('.primary-item').find('.nav-panels').removeClass('open');
        
                                return false;
                            }
                        });
        
                        $secondaryNavItem.on('mouseover click', function (e) {
        
                            e.stopPropagation();
        
                            var $element = $(this),
                                targetId = $element.data('secondary'),
                                $subComponent = $('#' + targetId).find('.sub-component');
        
                            if ($('#' + targetId).hasClass('open') && window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                $subComponent.css({ minHeight: window.aa.helpers.getTallestHeightHelper($subComponent) });
                            }
        
                            if ($element.hasClass('active')) {
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                    $secondaryItemsOverlay.show();
                                }
                                return true;
        
                            } else {
                                // momentary delay before revealing mega menu
                                $secondaryNavItem.removeClass('active');
                                $navPanels.removeClass('open');
                                $element.addClass('active');
                                $('#' + targetId).addClass('open');
                            }
                            return false;
                        });
        
                        // re-enable second level navigation events
                        $secondaryItemsOverlay.off('mouseover').on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                clearTimeout(navDelayTimer);
        
                                navDelayTimer = setTimeout(function () {
                                    $secondaryItemsOverlay.hide();
                                }, 250);
                            }
                        });
        
                        // disable second level navigation
                        $navPanels.on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                $secondaryItemsOverlay.show();
                            }
                        });
        
                        // use nav item toggle icon to open/close mega menu
                        $megaMenu.siblings('.toggle').on('click', function (e) {
                            console.log('START $megaMenu.siblings(.toggle).on(click, function (e) {');
                            console.log($(this)[0].outerHTML);
                            e.stopPropagation();
        
                            if ($(this).parent('li').hasClass('active')) {
                                hideMegamenu();
                                $primaryNavigationItems.find('.nav-panels').removeClass('open');
                            } else {
                                revealMegaMenu();
                            }
                            console.log('END   $megaMenu.siblings(.toggle).on(click, function (e) {');
                        });
        
                        window.aa.helpers.cache.cachedElements.$document.on({
                            click: function (e) {
        
                                var $targetArea = $megaMenu.add($header);
        
                                if (!$targetArea.is(e.target) && $targetArea.has(e.target).length === 0) {
                                    hideMegamenu();
                                    $primaryNavigationItems.find('.nav-panels').removeClass('open');
                                }
        
                            }
                        });
                    }
        
                    // mobile navigation exists
                    function detectMobileNavigation() {
        
                        if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                            $primaryNavigation.removeClass('desktop-nav').addClass('mobile-nav');
        
                        } else {
                            $primaryNavigation.removeClass('mobile-nav').addClass('desktop-nav');
                            $primaryNavigation.find('.primary-item').removeClass('menu-item-clicked');
        
                        }
                    }
        
                    $('#primary-navigation .container > ul').children('.primary-item').each(megaMenu);
        
                    //console.log('diagnos megaMenuMobile()');
                    //console.log($('#navicon').length);
                    //console.log($primaryNavigation.length);
                    //console.log(window.aa.helpers.cache.cachedElements.$window.width());
                    //console.log(window.aa.helpers.cache.constants.MOBILE_BREAKPOINT);
                    //console.log('END diagnos megaMenuMobile()');
        
                    //if ($('#navicon').length && $primaryNavigation.length && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    //    megaMenuMobile();
                    //}
                    setupResizeScroll();
                }
        
                // mobile mega menu dropdown
                function megaMenuMobile() {
        
                    console.log('START megaMenuMobile()');
                    var $header = $('#site-header, #sales-journey-header');
                    var $primaryNavigation = $header.find('#primary-navigation');
        
                    var $navicon = $('#navicon, #navicon-close'),
                        $primaryItem = $primaryNavigation.find('.primary-item'),
                        $secondaryItem = $primaryItem.find('.secondary-item'),
                        $secondaryLevelNavigation = $primaryItem.find('.second-level-navigation'),
                        $tertiaryLevelNavigation = $primaryItem.find('.nav-panels'),
                        $backToPrimary = $primaryItem.find('.back-to-primary-link'),
                        $backToSecondary = $primaryItem.find('.back-to-secondary-link'),
                        $goToSecondary = $primaryItem.find('.mobile-toggle');
        
                    function navToggle() {
                        if ($primaryNavigation.hasClass('nav-open')) {
                            navOpen();
                        } else {
                            navClose();
                        }
                    }
        
                    function navOpen() {
                        if ($tertiaryLevelNavigation.hasClass('active')) {
                            $tertiaryLevelNavigation.stop().slideDown(250);
                        } else if ($secondaryLevelNavigation.hasClass('active')) {
                            $secondaryLevelNavigation.stop().slideDown(250);
                        }
                        $primaryNavigation.stop().slideDown(250);
                    }
        
                    function navClose() {
                        if ($tertiaryLevelNavigation.hasClass('active')) {
                            $tertiaryLevelNavigation.stop().slideUp(250, function () {
                                $primaryNavigation.stop().slideUp(250, function () {
                                    $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                    $(this).css({ left: '0' });
                                });
                            });
                        } else if ($secondaryLevelNavigation.hasClass('active')) {
                            $secondaryLevelNavigation.stop().slideUp(250, function () {
                                $primaryNavigation.stop().slideUp(250, function () {
                                    $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                    $(this).css({ left: '0' });
                                });
                            });
                        } else {
                            $primaryNavigation.stop().slideUp(250, function () {
                                $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                $(this).css({ left: '0' });
                            });
                        }
        
                        window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
                    }
        
                    function slideMenuLevels($selector) {
                        $secondaryLevelNavigation.add($tertiaryLevelNavigation).removeClass('active');
        
                        if ($selector.hasClass('has-children') && $selector.hasClass('primary-item')) {
                            $primaryNavigation.stop().animate({ left: '-100vw' }, 250);
        
                            if ($selector.find('.my-aa-account').length) {
                                $selector.find('.nav-panels').addClass('open').show();
                                $primaryNavigation.stop().animate({ left: '-200vw' }, 250);
        
                            } else {
                                $secondaryLevelNavigation.addClass('active').show();
                                $selector.addClass('menu-item-clicked').siblings().addClass('hide-items');
                                $primaryNavigation.animate({ left: '-100vw' }, 250);
                            }
                        } else if ($selector.hasClass('back-to-primary-link')) {
        
                            $primaryNavigation.stop().animate({ left: '0' }, 250, function () {
        
                                window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
        
                                if ($selector.find('.my-aa-account').length) {
                                    $selector.find('.nav-panels').removeClass('open').hide();
        
                                } else {
                                    $secondaryLevelNavigation.removeClass('active').hide();
                                }
        
                            });
                        } else if ($selector.hasClass('secondary-item')) {
                            $primaryNavigation.animate({ left: '-200vw' }, 250, function () {
                                $secondaryLevelNavigation.removeClass('active').hide();
                            });
                            $tertiaryLevelNavigation.addClass('active').show();
                        } else if ($selector.hasClass('back-to-secondary-link')) {
                            $primaryNavigation.stop().animate({ left: '-100vw' }, 250, function () {
                                $tertiaryLevelNavigation.removeClass('open').hide();
                            });
                            $secondaryLevelNavigation.addClass('active').show();
                        }
                    }
        
                    $navicon.off('click');
                    $navicon.on('click', function (e) {
                        e.stopImmediatePropagation();
                        $navicon.toggleClass('hidden');
                        window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).toggleClass('nav-open');
                        $primaryItem.removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                        navToggle();
                    });
        
                    $goToSecondary.off('click');
                    $goToSecondary.on('click', function () {
                        $(this).parent().removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                    });
        
                    $primaryItem.off('click')
                    $primaryItem.on('click', function () {
                        console.log('START $primaryItem.on(click, function () {');
                        if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                            slideMenuLevels($(this));
                        }
                        console.log('END   $primaryItem.on(click, function () {');
                    });
        
                    $backToPrimary.off('click');
                    $backToPrimary.on('click', function (e) {
                        e.stopPropagation();
                        $primaryItem.removeClass('active menu-item-clicked').siblings().removeClass('hide-items');
                        slideMenuLevels($(this));
                    });
        
                    $secondaryItem.off('click');
                    $secondaryItem.on('click', function () {
                        slideMenuLevels($(this));
                    });
        
                    $backToSecondary.off('click');
                    $backToSecondary.on('click', function (e) {
                        e.stopPropagation();
                        $secondaryItem.removeClass('active');
                        slideMenuLevels($(this));
                    });
        
                    if (!window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon) {
                        window.aa.helpers.cache.cachedElements.$document.on({
                            click: function (e) {
        
                                if (!$header.is(e.target) && $header.has(e.target).length === 0 && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                    if ($primaryNavigation.is(':visible')) {
                                        $navicon.toggleClass('hidden');
                                        window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).removeClass('nav-open account-details-active');
                                        navToggle();
                                    }
                                }
                            }
                        });
                    }
                    window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon = true;
                    console.log('END   megaMenuMobile()');
                }
        
                function setupResizeScroll() {
                    window.aa.helpers.cache.cachedElements.$window.on({
                        resize: function () {
                            clearTimeout(resizeTimer);
                            resizeTimer = setTimeout(function () {
        
                                $secondLevelNavigation = $primaryNavigation.find('.primary-item.active .second-level-navigation');
        
                                if ($primaryNavigation.length) {
                                    detectMobileNavigation();
                                }
        
                                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                    megaMenuMobile();
                                }
        
                                updateRoutePlannerHeight();
        
                                $megaMenuContainer.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width(), height: $secondLevelNavigation.height() });
                            }, 100); // call on resize end
                        },
                        scroll: function () {
                            console.log("scroll");
                            if ($header.length) {
        
                                stickyHeader();
                                if (($('#sales-journey-header').hasClass("sticky")) && ($("#contact-cta").hasClass('dsf-view-none'))) {
                                    $('#CancelSalesLabel').css('margin-right', '13rem');
                                    $("#BackToDashboard").css({ "margin-right": "13rem", "margin-left": "-30px" });
                                }
                                else {
                                    $('#CancelSalesLabel').css('margin-right', '2.5rem');
                                    $("#BackToDashboard").css({ 'margin-right': '2.5rem', 'margin-left': '0px' });
                                }
        
                            } else {
                                console.log("NO sticy header since $header.length false");
                            }
        
                        }
                    });
                }
                setupResizeScroll();
            }
        </script>
        <style type="text/css">
            .nojs {
            }
        
            .js {
                display: none;
            }
        
            .experience-editor-display {
                display: none
            }
        
            /*#logo {
                width: 438px;
                height: 212px;
        
            }*/
            #logo > svg {
                width: 100%;
                height: 100%;
            }
        
            #logo {
                height: 187px;
                height: 18.7rem;
                left: 0;
                position: absolute;
                top: 0;
                transform: translate3d(0,0,0);
                background: url("/Assets/images/logo-aa-desktop.png") no-repeat right top transparent;
                width: 328px;
                width: 32.8rem;
                z-index: 2;
            }
        
        
                #logo > a {
                    height: 45px;
                    height: 4.5rem;
                    width: 55px;
                    width: 5.5rem;
                    left: auto;
                    top: 75px;
                    top: 7.5rem;
                    right: 65px;
                    right: 6.5rem;
                    position: absolute;
                }
        
                    #logo > a:focus {
                        border: 1px dotted #000;
                    }
        
            @@media screen and (max-width: 1366px) {
                #logo {
                    height: 17rem;
                    left: -2rem;
                    top: 0;
                    width: 25.5rem
                }
            }
        
            @@media screen and (max-width: 1060px) {
        
                #logo {
                    -moz-background-size: 10.1rem auto;
                    -ms-background-size: 10.1rem auto;
                    -o-background-size: 10.1rem auto;
                    -webkit-background-size: 10.1rem auto;
                    background-image: url("/Assets/images/logo-aa-tablet.png");
                    background-size: 10.1rem auto;
                    height: 11rem;
                    left: 0;
                    margin-top: 0;
                    top: 0;
                    width: 10.1rem
                }
            }
        
            @@media only screen and (max-width: 737px) {
        
                #logo {
                    background-size: 8.9rem auto;
                    height: 5rem;
                    left: 0;
                    margin-top: 0;
                    width: 8.9rem;
                    z-index: 4;
                }
        
                    #logo > a {
                        left: 11px;
                        left: 1.1rem;
                        top: 5px;
                        top: .5rem;
                        width: 35px;
                        width: 3.5rem;
                        height: 28px;
                        height: 2.8rem
                    }
        
                header#site-header.stripped #logo {
                    margin-top: 0;
                }
            }
        </style>
        <style type="text/css">
            @@media screen and (min-width: 1366px) {
                #largestViewbox {
                    display: inline;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 1366px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: inline;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
        
            @@media screen and (max-width: 1160px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: inline;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 737px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: inline;
                }
            }
        </style>
        <header id="site-header" class="cf stylish-form " data-stylish-form="true">
            <div class="wrapper cf">
                <figure id="logo" class="left">
                    <a href="/" title="The AA | Home">
                        <img src="/Assets/images/logo.png" alt="The AA" class="print-only" />
                    </a>
                </figure>
                <div id="header-links" class="right">
                    <div id="helpful-links" class="cf desktop-tablet-view">
                        <p class="left">
                            <a href="/business"> Business customers</a> | <a href="/help-support"> Personal customers</a>
                        </p>
                        <div class="right">
                            <button id="navicon" class="mobile-view left">Menu<span class="toggle"></span></button>
                            <button id="navicon-close" class="mobile-view left hidden">Close<span class="toggle"></span></button>
                            <button id="route-planner" class="button secondary ghost align-top">Route planner</button>
                            <button id="search-icon" class="button secondary ghost align-top takeover-btn"></button>
                        </div>
                    </div>
                    <div id="search-takeover" class="form-module takeover right cf" tabindex="-1">
                        <p class="close-takeover right" tabindex="0">Close</p>
                        <form class="search form-section cf" action="/search" method="GET">
                            <div class="left search-input" tabindex="-1">
                                <input type="text" name="q" placeholder="What are you looking for?" autocomplete="off" autofocus />
                                <span class="close" role="button" tabindex="0"></span>
                            </div>
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit-search right ra">
                                <input type="submit" class="button ra" disabled />
                            </div>
                        </form>
                    </div>
                    <div id="route-planner-takeover" class="form-module takeover right cf" tabindex="-1">
                        <div class="right go-to">
                            <p class="left">
                                <a href="/route-planner/index.jsp"> Go to the Route planner</a>
                            </p>
                            <p class="close-takeover right" tabindex="0">Close</p>
                        </div>
                        <form class="route-planner form-section cf" action="/route-planner/index.jsp" method="post">
                            <label for="fromPlace" class="large-text">Where are you going?</label>
                            <input type="text" placeholder="from" name="fromPlace" id="fromPlace" autocomplete="off" />
                            <input type="text" placeholder="to" name="toPlace" autocomplete="off" />
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit right ra">
                                <input type="submit" class="button tertiary ghost-bordered ra" value="Get route" tabindex="0" />
                            </div>
                        </form>
                    </div>
                    <div id="top-level-menu" class="cf left">
                        <nav id="primary-navigation" typeof="SiteNavigationElement" class="desktop-nav">
                            <meta property="description" content="Mainsite Navigation">
                            <div class="container">
                                <ul>
                                    @foreach (Sitecore.Data.Items.Item menuItem in item.Children)
                                    {
                                    <!-- child -->
                                    @TopLevelMenuHelper(menuItem)
                                    }
                                    <li class="primary-item">
                                        <a href="/help-support/contact-us">Help</a>
                                    </li>
                                </ul>
                                <ul class="helpful-links mobile-view cf">
                                    <li><a href="/route-planner/index.jsp"> Go to the Route planner</a> <span class="toggle"></span></li>
                                    <li><a></a><a href="/business">Business customers</a> | <a></a><a href="/help-support"> Personal customers</a></li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                    <!-- TODO<button class="right button sign-in">Model.HeaderSettings.ExistingMembersButtonText</button> -->
                </div>
                <!--  TODO Html.Sitecore().Placeholder("ContentHubHeader") -->
            </div>
        </header>
        <!--  TODO Html.Sitecore().Rendering(ItemIds.Renderings.TheAA.Components.SignInPanel.ToString()) -->
        <div>
            <div class="menureplace-script"></div>
        </div>
        
    - ID: "c8f93afe-bfd4-4e8f-9c61-152559854661"
      Hint: __Valid from
      Value: 20200915T063150Z
    - ID: "d9cf14b1-fa16-4ba6-9288-e8a174d4d522"
      Hint: __Updated
      Value: 20230720T031618Z
  - Version: 2
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20200915T090944Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\paul_petersen
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "7bbc5069-7b89-465d-ba2b-f0323794dbb1"
    - ID: "acce9b46-1f19-4d3d-a0ec-ed01d807bb7d"
      Hint: RazorView
      Value: |
        @using Sitecore.Mvc.Presentation
        @using Sitecore.Data;
        @using System.Web;
        @using TheAA.Foundation.Rendering;
        @model RenderingModel
        @{var item = Utility.HtmlPlus.Sitecore().DataSourceOrContextItem();}
        @helper TopLevelMenuHelper(Sitecore.Data.Items.Item megaMenuItem)
        {
            var RenderMenuItem = true;
            if (megaMenuItem == null)
            {
                <!-- megaMenuItem == null -->
                RenderMenuItem = false;
            }
        
            if (megaMenuItem.GetField("Contents").Contains("<!-- not a menu item -->"))
            {
                <!-- not a menu item -->
                RenderMenuItem = false;
            }
        
            if (RenderMenuItem)
            {
                var menuState = new MenuState(System.Web.HttpContext.Current, megaMenuItem);
                var megamenuItemName = megaMenuItem.Name.Replace(" ", "").ToLower();
        
                var menuparam = System.Web.HttpContext.Current.Request.QueryString.Get("menu");
                var menu = menuparam == null ? string.Empty : menuparam.ToLower();
                var MenuSecondLevel = string.Empty;
                var menuSplit = menu.Split('-');
        
                <li class="primary-item has-children @menuState.GetMenuActiveClass()">
                    <a href="?menu=@megamenuItemName" class="nojs">@megaMenuItem.Name</a>
                    <span class="toggle"></span>
                    <span class="mobile-toggle"></span>
                    @{
                        if (menuSplit.Length > 1)
                        {
                            MenuSecondLevel = menuSplit[1];
                        }
        
                        var contents = string.Empty;
                        if (megaMenuItem == null)
                        {
                            <!-- could not find megamenu item with the name:@menuState.MenuTopLevel -->
                        }
                        else
                        {
                            if (!string.IsNullOrEmpty(menuparam))
                            {
                                var ContentsField = megaMenuItem.GetField("Contents");
                                contents = ContentsField.RenderValue().ToString();
                                contents = contents.Replace(menu + "---", "");
                            }
                            else
                            {
                                <div class="menureplace-@megamenuItemName" />
                            }
                        }
                    }
                    @contents
                </li>
            }
        }
        
        
        <script>
            // wait for JQuery to download
            function defer(method) {
                if (window.jQuery) {
                    method();
                } else {
                    setTimeout(function () { defer(method) }, 50);
                }
            }
            defer(function () {
                console.log("jQuery is now loaded");
                MenuAfterJQueryLoaded();
            });
        
            var $header,
                $primaryNavigation ,
                $aaRoutePlannerContainer ,
                $aaRoutePlannerTakeover,
                $megaMenuContainer ,
                $secondLevelNavigation,
                headerHeight ,
                resizeTimer,
                navDelayTimer;
        
            function setupHeaderGlobals() {
                if (!$header) {
                    $header = $('#site-header, #sales-journey-header');
                    headerHeight = $header.outerHeight();
                }
                if (!$primaryNavigation) {
                    $primaryNavigation = $header.find('#primary-navigation');
                }
        
                if (window.aa &&  window.aa.helpers && window.aa.helpers.cache && window.aa.helpers.cache.cachedElements && window.aa.helpers.cache.cachedElements.$body) {
                    if (!$aaRoutePlannerContainer) {
                        $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container');
                    }
                    if (!$aaRoutePlannerTakeover) {
                        $aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover');
                    }
                }
                if (!$megaMenuContainer) {
                    $megaMenuContainer = $primaryNavigation.find('.mega-menu');
                }
            }
        
            function MenuAfterJQueryLoaded() {
        
                setupHeaderGlobals();
        
                /*
                 * ---------------------------------------- *
                 * Name: 	AA Helpers JavaScripts          *
                 * Type: 	JavaScript                      *
                 * Version: Not Versioned                   *
                 * Author:  Codehouse                       *
                 * ---------------------------------------- *
                 */
        
                /*
                 * site helper methods
                 */
        
                console.log("MenuAfterJQueryLoaded started");
                window.aa || (window.aa = {});
                window.aa.helpers = {
                    cache: {
                        cachedElements: (new function () {
                            this.$window = $(window);
                            this.$document = $(document);
                            this.$html = $('html');
                            this.$body = $('body');
                            this.$main = $('#main');
                            this.$footer = $('#site-footer');
                            this.isExperienceEditor = this.$body.hasClass('experience-editor');
                            this.url = window.location.pathname;
                        }()),
                        constants: {
                            TABLET_LANDSCAPE: 1024,
                            TABLET_BREAKPOINT: 880,
                            MOBILE_BREAKPOINT: 737
                        },
                        //registerCookie: new Cookie()
                    },
        
                    // truncate text with no option to reveal the rest or "read more/less"
                    truncateText: function (text, nr) {
                        var truncatedText = text.trim().substring(0, nr).split(' ').slice(0, -1).join(' ');
        
                        if (text.length > nr) {
                            return truncatedText;
                        } else {
                            return false;
                        }
                    }
                };
        
        
        
                $(document).ready(function () {
                    console.log('document ready')
        
                    console.log('setup links to fire Ajax');
                    $('li.primary-item > a.nojs').each(function () {
                        console.log('change each link to use JS instead of href');
                        var link = $(this);
                        link.click(function () {
                            console.log('START link.click(function () {');
                            if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                                console.log('Link clicked so fire Ajax to retrieve menu');
                                $.ajax({
                                    //url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2FContent%2FHome%2Fbreakdown-cover%2Fadvice%2Fbasic-car-checks%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2Fcontent%2FTheAA%2FGlobal%2FNavigation%2FHeader%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    dataType: 'json', async: true,
                                    success: function (data) {
                                        console.log('ajax data success GRAPH QL')
                                        $.each(data.data.item.children, function () {
                                            console.log(this.id);
                                            var menuName = this.name.toLowerCase().split(' ').join('')
                                            $('.menureplace-' + menuName).replaceWith(this.field.Contents);
                                        });
                                        MenuLinksRemoveHref();
                                        SetupMenu();
        
                                        //megaMenuMobile();
                                        $('#primary-navigation').attr('menudownloadedbyajax', 'true');
                                        console.log('START link.click(); after ajax')
                                        link.click();
                                        console.log('END   link.click(); after ajax')
                                    },
                                    fail: function (jqXHR, textStatus, errorThrown) {
                                        console.log('ajax request failed: ' + textStatus)
                                        alert("ajax request failed: " + textStatus);
                                    }
                                });
                            } else {
                                console.log(link[0].outerHTML);
                                console.log('menudownloadedbyajax == true so dont run Ajax anymore');
                            }
                            console.log('END   link.click(function () {');
                        });
                        console.log('change href to javascipt void    ...' + link.attr('href'));
                        link.attr('href', 'javascript:void(0)');
                    });
                    console.log("now hide nojs and show js");
                    //megaMenuMobile();
        
                });
                function MenuLinksRemoveHref() {
                    console.log("START MenuLinksRemoveHref");
                    $("li.primary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        //            e.attr("href", "javascript:void(0)");
                        e.removeClass('nojs');
                        e.addClass('js');
                    });
        
                    // rework secondary menus - backup href, swap class and remove href to let the JS handle event
                    $("li.secondary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        e.removeClass('nojs');
                        e.addClass('js');
                        e.attr('href', 'javascript:void(0)');
                    });
                    /*     */
        
                    $('.js').show();
                    console.log("END MenuLinksRemoveHref");
                }
                // taken from Header.js
        
                /*
                 * ---------------------------------------- *
                 * Name:    Header JavaScripts              *
                 * Type: 	JavaScript                      *
                 * Version: Not Versioned                   *
                 * Author:	Thomas Dale | Codehouse         *
                 * ---------------------------------------- *
                 */
        
                //(function ($) {
        
        
        
        
        
        
        
                // taken from Header.js (function ($) {
                function SetupMenu() {
        
                    console.log('script downloaded and replaced is now running');
                    //$header = $('#site-header, #sales-journey-header');
                    $primaryNavigation = $header.find('#primary-navigation');
                    $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container');
                    //$aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover');
                    $megaMenuContainer = $primaryNavigation.find('.mega-menu');
                    $secondLevelNavigation;
                    //headerHeight = $header.outerHeight();
                    //resizeTimer;
                    //navDelayTimer;
        
        
                    // mega menu dropdown
                    function megaMenu() {
        
                        var $primaryNavigationItem = $(this),
                            $secondaryNavItem = $primaryNavigationItem.find('.secondary-item'),
                            $secondaryItemsOverlay = $primaryNavigation.find('.second-level-nav-overlay'),
                            $primaryNavigationItems = window.aa.helpers.cache.cachedElements.$body.find('.primary-item'),
                            $megaMenu = $primaryNavigationItem.find('.mega-menu'),
                            $navPanels = $primaryNavigationItem.find('.nav-panels'),
                            $subComponents = $navPanels.find('.sub-component'),
                            $myAccount = $header.find('#component-my-account');
        
                        $megaMenu.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width() });
        
                        if ($myAccount.length) {
                            $myAccount.closest('.primary-item').addClass('account-link');
                        }
        
                        function revealMegaMenu() {
        
                            var $secondaryItem = $megaMenu.find('.secondary-item'),
                                $secondaryNavPanels = $megaMenu.find('.nav-panels');
        
                            if ($primaryNavigationItem.hasClass('has-children') && !$primaryNavigationItem.hasClass('active')) {
        
                                if ($primaryNavigationItem.find('.my-aa-account').length) {
                                    $navPanels.addClass('open');
                                }
        
                                if ($primaryNavigationItem.hasClass('account-link')) {
                                    window.aa.helpers.cache.cachedElements.$body.addClass('account-details-active');
                                }
        
                                window.aa.helpers.cache.cachedElements.$body.addClass('nav-open');
                                $primaryNavigationItems.removeClass('active');
                                $primaryNavigationItem.addClass('active');
        
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                    $secondaryItem.removeClass('active');
                                    $secondaryItem.filter(':first').addClass('active');
                                    $secondaryNavPanels.removeClass('open');
                                    $secondaryNavPanels.filter(':first-of-type').addClass('open');
                                    if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                        $secondaryItemsOverlay.show();
                                    }
                                }
                            } else {
                                window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                                $primaryNavigationItems.removeClass('active');
                            }
                        }
        
                        function hideMegamenu() {
                            clearTimeout(navDelayTimer);
                            window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                            $primaryNavigationItems.add($secondaryNavItem).removeClass('active');
                            $navPanels.removeClass('open');
                        }
        
                        function resetMegamenu() {
                            hideMegamenu();
                            $megaMenu.css({ height: 'auto' });
                        }
        
                        if ($megaMenu.length) {
                            $primaryNavigationItem.addClass('has-children');
                        }
        
                        $('.editorial-panel').each(function () {
                            $(this).closest('.nav-panels').addClass('editorial');
                        });
        
                        detectMobileNavigation();
        
                        $primaryNavigationItem.on({
                            click: function (e) {
        
                                var $target = $(this),
                                    isActive = $target.filter('.active');
        
                                if ($primaryNavigationItem.hasClass('active')) {
                                    if (!isActive.is(e.target) && isActive.has(e.target).length === 0) {
                                        resetMegamenu();
                                    }
        
                                    return true;
                                } else {
        
                                    if (!$target.hasClass('has-children') || $target.hasClass('menu-item-clicked')) {
                                        return true;
                                    }
                                    revealMegaMenu();
                                    $megaMenu.css({ height: $target.find('.second-level-navigation').height() });
                                }
        
                                $(this).siblings('.primary-item').find('.nav-panels').removeClass('open');
        
                                return false;
                            }
                        });
        
                        $secondaryNavItem.on('mouseover click', function (e) {
        
                            e.stopPropagation();
        
                            var $element = $(this),
                                targetId = $element.data('secondary'),
                                $subComponent = $('#' + targetId).find('.sub-component');
        
                            if ($('#' + targetId).hasClass('open') && window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                $subComponent.css({ minHeight: window.aa.helpers.getTallestHeightHelper($subComponent) });
                            }
        
                            if ($element.hasClass('active')) {
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                    $secondaryItemsOverlay.show();
                                }
                                return true;
        
                            } else {
                                // momentary delay before revealing mega menu
                                $secondaryNavItem.removeClass('active');
                                $navPanels.removeClass('open');
                                $element.addClass('active');
                                $('#' + targetId).addClass('open');
                            }
                            return false;
                        });
        
                        // re-enable second level navigation events
                        $secondaryItemsOverlay.off('mouseover').on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                clearTimeout(navDelayTimer);
        
                                navDelayTimer = setTimeout(function () {
                                    $secondaryItemsOverlay.hide();
                                }, 250);
                            }
                        });
        
                        // disable second level navigation
                        $navPanels.on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                $secondaryItemsOverlay.show();
                            }
                        });
        
                        // use nav item toggle icon to open/close mega menu
                        $megaMenu.siblings('.toggle').on('click', function (e) {
                            e.stopPropagation();
        
                            if ($(this).parent('li').hasClass('active')) {
                                hideMegamenu();
                                $primaryNavigationItems.find('.nav-panels').removeClass('open');
                            } else {
                                revealMegaMenu();
                            }
                        });
        
                        window.aa.helpers.cache.cachedElements.$document.on({
                            click: function (e) {
        
                                var $targetArea = $megaMenu.add($header);
        
                                if (!$targetArea.is(e.target) && $targetArea.has(e.target).length === 0) {
                                    hideMegamenu();
                                    $primaryNavigationItems.find('.nav-panels').removeClass('open');
                                }
        
                            }
                        });
                    }
        
        
                    $('#primary-navigation .container > ul').children('.primary-item').each(megaMenu);
        
                    //console.log('diagnos megaMenuMobile()');
                    //console.log($('#navicon').length);
                    //console.log($primaryNavigation.length);
                    //console.log(window.aa.helpers.cache.cachedElements.$window.width());
                    //console.log(window.aa.helpers.cache.constants.MOBILE_BREAKPOINT);
                    //console.log('END diagnos megaMenuMobile()');
        
                    //if ($('#navicon').length && $primaryNavigation.length && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    //    megaMenuMobile();
                    //}
                    setupResizeScroll();
                }
        
        
        
                setupResizeScroll();
            }
        
            // update route planner height on resize
            function updateRoutePlannerHeight() {
        
                if ($aaRoutePlannerTakeover.hasClass('active')) {
        
                    var routePlannerHeight = $aaRoutePlannerTakeover.css({ maxHeight: '100%' }).outerHeight();
        
                    $aaRoutePlannerTakeover.css({ maxHeight: routePlannerHeight });
                }
            }
        
        
        
            // mobile mega menu dropdown
            function megaMenuMobile() {
        
                console.log('START megaMenuMobile()');
                var $header = $('#site-header, #sales-journey-header');
                var $primaryNavigation = $header.find('#primary-navigation');
        
                var $navicon = $('#navicon, #navicon-close'),
                    $primaryItem = $primaryNavigation.find('.primary-item'),
                    $secondaryItem = $primaryItem.find('.secondary-item'),
                    $secondaryLevelNavigation = $primaryItem.find('.second-level-navigation'),
                    $tertiaryLevelNavigation = $primaryItem.find('.nav-panels'),
                    $backToPrimary = $primaryItem.find('.back-to-primary-link'),
                    $backToSecondary = $primaryItem.find('.back-to-secondary-link'),
                    $goToSecondary = $primaryItem.find('.mobile-toggle');
        
                function navToggle() {
                    if ($primaryNavigation.hasClass('nav-open')) {
                        navOpen();
                    } else {
                        navClose();
                    }
                }
        
                function navOpen() {
                    if ($tertiaryLevelNavigation.hasClass('active')) {
                        $tertiaryLevelNavigation.stop().slideDown(250);
                    } else if ($secondaryLevelNavigation.hasClass('active')) {
                        $secondaryLevelNavigation.stop().slideDown(250);
                    }
                    $primaryNavigation.stop().slideDown(250);
                }
        
                function navClose() {
                    if ($tertiaryLevelNavigation.hasClass('active')) {
                        $tertiaryLevelNavigation.stop().slideUp(250, function () {
                            $primaryNavigation.stop().slideUp(250, function () {
                                $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                $(this).css({ left: '0' });
                            });
                        });
                    } else if ($secondaryLevelNavigation.hasClass('active')) {
                        $secondaryLevelNavigation.stop().slideUp(250, function () {
                            $primaryNavigation.stop().slideUp(250, function () {
                                $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                $(this).css({ left: '0' });
                            });
                        });
                    } else {
                        $primaryNavigation.stop().slideUp(250, function () {
                            $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                            $(this).css({ left: '0' });
                        });
                    }
        
                    window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
                }
        
                function slideMenuLevels($selector) {
                    $secondaryLevelNavigation.add($tertiaryLevelNavigation).removeClass('active');
        
                    if ($selector.hasClass('has-children') && $selector.hasClass('primary-item')) {
                        $primaryNavigation.stop().animate({ left: '-100vw' }, 250);
        
                        if ($selector.find('.my-aa-account').length) {
                            $selector.find('.nav-panels').addClass('open').show();
                            $primaryNavigation.stop().animate({ left: '-200vw' }, 250);
        
                        } else {
                            $secondaryLevelNavigation.addClass('active').show();
                            $selector.addClass('menu-item-clicked').siblings().addClass('hide-items');
                            $primaryNavigation.animate({ left: '-100vw' }, 250);
                        }
                    } else if ($selector.hasClass('back-to-primary-link')) {
        
                        $primaryNavigation.stop().animate({ left: '0' }, 250, function () {
        
                            window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
        
                            if ($selector.find('.my-aa-account').length) {
                                $selector.find('.nav-panels').removeClass('open').hide();
        
                            } else {
                                $secondaryLevelNavigation.removeClass('active').hide();
                            }
        
                        });
                    } else if ($selector.hasClass('secondary-item')) {
                        $primaryNavigation.animate({ left: '-200vw' }, 250, function () {
                            $secondaryLevelNavigation.removeClass('active').hide();
                        });
                        $tertiaryLevelNavigation.addClass('active').show();
                    } else if ($selector.hasClass('back-to-secondary-link')) {
                        $primaryNavigation.stop().animate({ left: '-100vw' }, 250, function () {
                            $tertiaryLevelNavigation.removeClass('open').hide();
                        });
                        $secondaryLevelNavigation.addClass('active').show();
                    }
                }
        
                $navicon.off('click');
                $navicon.on('click', function (e) {
                    e.stopImmediatePropagation();
                    $navicon.toggleClass('hidden');
                    window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).toggleClass('nav-open');
                    $primaryItem.removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                    navToggle();
                });
        
                $goToSecondary.off('click');
                $goToSecondary.on('click', function () {
                    $(this).parent().removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                });
        
                $primaryItem.off('click')
                $primaryItem.on('click', function () {
                    console.log('START $primaryItem.on(click, function () {');
                    if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                        slideMenuLevels($(this));
                    }
                    console.log('END   $primaryItem.on(click, function () {');
                });
        
                $backToPrimary.off('click');
                $backToPrimary.on('click', function (e) {
                    e.stopPropagation();
                    $primaryItem.removeClass('active menu-item-clicked').siblings().removeClass('hide-items');
                    slideMenuLevels($(this));
                });
        
                $secondaryItem.off('click');
                $secondaryItem.on('click', function () {
                    slideMenuLevels($(this));
                });
        
                $backToSecondary.off('click');
                $backToSecondary.on('click', function (e) {
                    e.stopPropagation();
                    $secondaryItem.removeClass('active');
                    slideMenuLevels($(this));
                });
        
                if (!window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon) {
                    window.aa.helpers.cache.cachedElements.$document.on({
                        click: function (e) {
        
                            if (!$header.is(e.target) && $header.has(e.target).length === 0 && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                if ($primaryNavigation.is(':visible')) {
                                    $navicon.toggleClass('hidden');
                                    window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).removeClass('nav-open account-details-active');
                                    navToggle();
                                }
                            }
                        }
                    });
                }
                window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon = true;
                console.log('END   megaMenuMobile()');
            }
        
            // mobile navigation exists 
            function detectMobileNavigation() {
        
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    $primaryNavigation.removeClass('desktop-nav').addClass('mobile-nav');
        
                } else {
                    $primaryNavigation.removeClass('mobile-nav').addClass('desktop-nav');
                    $primaryNavigation.find('.primary-item').removeClass('menu-item-clicked');
        
                }
            }
        
            // apply class to allow header to be fixed
            function stickyHeader() {
        
                // disable sticky header on mobile only
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    return;
                }
        
                if (window.aa.helpers.cache.cachedElements.$window.scrollTop() >= headerHeight) {
                    $header.addClass('sticky');
                    $aaRoutePlannerTakeover.addClass('hidden');
                    window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: headerHeight });
        
                } else {
                    $header.removeClass('sticky');
                    $aaRoutePlannerTakeover.removeClass('hidden');
        
                    //if (client.Mobile) {
                    //    setTimeout(function () {
                    //        window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                    //    });
        
                    //} else {
                    window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                    //}
                }
        
                $('.my-account').removeClass('active');
        
            }
        
            function setupResizeScroll() {
                setupHeaderGlobals();
                window.aa.helpers.cache.cachedElements.$window.on({
                    resize: function () {
                        
                        clearTimeout(resizeTimer);
                        resizeTimer = setTimeout(function () {
        
                            $secondLevelNavigation = $primaryNavigation.find('.primary-item.active .second-level-navigation');
        
                            if ($primaryNavigation.length) {
                                detectMobileNavigation();
                            }
        
                            if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                megaMenuMobile();
                            }
        
                            updateRoutePlannerHeight();
        
                            $megaMenuContainer.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width(), height: $secondLevelNavigation.height() });
                        }, 100); // call on resize end
                    },
                    scroll: function () {
                        console.log("scroll");
                        if ($header.length) {
        
                            stickyHeader();
                            if (($('#sales-journey-header').hasClass("sticky")) && ($("#contact-cta").hasClass('dsf-view-none'))) {
                                $('#CancelSalesLabel').css('margin-right', '13rem');
                                $("#BackToDashboard").css({ "margin-right": "13rem", "margin-left": "-30px" });
                            }
                            else {
                                $('#CancelSalesLabel').css('margin-right', '2.5rem');
                                $("#BackToDashboard").css({ 'margin-right': '2.5rem', 'margin-left': '0px' });
                            }
        
                        } else {
                            console.log("NO sticy header since $header.length false");
                        }
        
                    }
                });
            }
        
        </script>
        <style type="text/css">
            .nojs {
            }
        
            .js {
                display: none;
            }
        
            .experience-editor-display {
                display: none
            }
        
            /*#logo {
                width: 438px;
                height: 212px;
        
            }*/
            #logo > svg {
                width: 100%;
                height: 100%;
            }
        
            #logo {
                height: 187px;
                height: 18.7rem;
                left: 0;
                position: absolute;
                top: 0;
                transform: translate3d(0,0,0);
                background: url("/Assets/images/logo-aa-desktop.png") no-repeat right top transparent;
                width: 328px;
                width: 32.8rem;
                z-index: 2;
            }
        
        
                #logo > a {
                    height: 45px;
                    height: 4.5rem;
                    width: 55px;
                    width: 5.5rem;
                    left: auto;
                    top: 75px;
                    top: 7.5rem;
                    right: 65px;
                    right: 6.5rem;
                    position: absolute;
                }
        
                    #logo > a:focus {
                        border: 1px dotted #000;
                    }
        
            @@media screen and (max-width: 1366px) {
                #logo {
                    height: 17rem;
                    left: -2rem;
                    top: 0;
                    width: 25.5rem
                }
            }
        
            @@media screen and (max-width: 1060px) {
        
                #logo {
                    -moz-background-size: 10.1rem auto;
                    -ms-background-size: 10.1rem auto;
                    -o-background-size: 10.1rem auto;
                    -webkit-background-size: 10.1rem auto;
                    background-image: url("/Assets/images/logo-aa-tablet.png");
                    background-size: 10.1rem auto;
                    height: 11rem;
                    left: 0;
                    margin-top: 0;
                    top: 0;
                    width: 10.1rem
                }
            }
        
            @@media only screen and (max-width: 737px) {
        
                #logo {
                    background-size: 8.9rem auto;
                    height: 5rem;
                    left: 0;
                    margin-top: 0;
                    width: 8.9rem;
                    z-index: 4;
                }
        
                    #logo > a {
                        left: 11px;
                        left: 1.1rem;
                        top: 5px;
                        top: .5rem;
                        width: 35px;
                        width: 3.5rem;
                        height: 28px;
                        height: 2.8rem
                    }
        
                header#site-header.stripped #logo {
                    margin-top: 0;
                }
            }
        </style>
        <style type="text/css">
            @@media screen and (min-width: 1366px) {
                #largestViewbox {
                    display: inline;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 1366px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: inline;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
        
            @@media screen and (max-width: 1160px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: inline;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 737px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: inline;
                }
            }
        </style>
        <header id="site-header" class="cf stylish-form " data-stylish-form="true">
            <div class="wrapper cf">
                <figure id="logo" class="left">
                    <a href="/" title="The AA | Home">
                        <img src="/Assets/images/logo.png" alt="The AA" class="print-only" />
                    </a>
                </figure>
                <div id="header-links" class="right">
                    <div id="helpful-links" class="cf desktop-tablet-view">
                        <p class="left">
                            <a href="/business"> Business customers</a> | <a href="/help-support"> Personal customers</a>
                        </p>
                        <div class="right">
                            <button id="navicon" class="mobile-view left">Menu<span class="toggle"></span></button>
                            <button id="navicon-close" class="mobile-view left hidden">Close<span class="toggle"></span></button>
                            <button id="route-planner" class="button secondary ghost align-top">Route planner</button>
                            <button id="search-icon" class="button secondary ghost align-top takeover-btn"></button>
                        </div>
                    </div>
                    <div id="search-takeover" class="form-module takeover right cf" tabindex="-1">
                        <p class="close-takeover right" tabindex="0">Close</p>
                        <form class="search form-section cf" action="/search" method="GET">
                            <div class="left search-input" tabindex="-1">
                                <input type="text" name="q" placeholder="What are you looking for?" autocomplete="off" autofocus />
                                <span class="close" role="button" tabindex="0"></span>
                            </div>
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit-search right ra">
                                <input type="submit" class="button ra" disabled />
                            </div>
                        </form>
                    </div>
                    <div id="route-planner-takeover" class="form-module takeover right cf" tabindex="-1">
                        <div class="right go-to">
                            <p class="left">
                                <a href="/route-planner/index.jsp"> Go to the Route planner</a>
                            </p>
                            <p class="close-takeover right" tabindex="0">Close</p>
                        </div>
                        <form class="route-planner form-section cf" action="/route-planner/index.jsp" method="post">
                            <label for="fromPlace" class="large-text">Where are you going?</label>
                            <input type="text" placeholder="from" name="fromPlace" id="fromPlace" autocomplete="off" />
                            <input type="text" placeholder="to" name="toPlace" autocomplete="off" />
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit right ra">
                                <input type="submit" class="button tertiary ghost-bordered ra" value="Get route" tabindex="0" />
                            </div>
                        </form>
                    </div>
                    <div id="top-level-menu" class="cf left">
                        <nav id="primary-navigation" typeof="SiteNavigationElement" class="desktop-nav">
                            <meta property="description" content="Mainsite Navigation">
                            <div class="container">
                                <ul>
                                    @foreach (Sitecore.Data.Items.Item menuItem in item.Children)
                                    {
                                        <!-- child -->
                                        @TopLevelMenuHelper(menuItem)
                                    }
                                    <li class="primary-item">
                                        <a href="/help-support/contact-us">Help</a>
                                    </li>
                                </ul>
                                <ul class="helpful-links mobile-view cf">
                                    <li><a href="/route-planner/index.jsp"> Go to the Route planner</a> <span class="toggle"></span></li>
                                    <li><a></a><a href="/business">Business customers</a> | <a></a><a href="/help-support"> Personal customers</a></li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                    <!-- TODO<button class="right button sign-in">Model.HeaderSettings.ExistingMembersButtonText</button> -->
                </div>
                <!--  TODO Html.Sitecore().Placeholder("ContentHubHeader") -->
            </div>
        </header>
        <!--  TODO Html.Sitecore().Rendering(ItemIds.Renderings.TheAA.Components.SignInPanel.ToString()) -->
        <div>
            <div class="menureplace-script"></div>
        </div>
        
    - ID: "c8f93afe-bfd4-4e8f-9c61-152559854661"
      Hint: __Valid from
      Value: 20200915T090944Z
    - ID: "d9cf14b1-fa16-4ba6-9288-e8a174d4d522"
      Hint: __Updated
      Value: 20230720T031618Z
  - Version: 3
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20200916T101427Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\paul_petersen
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "0b1989c7-bad3-4c14-bd42-05f6e1948e2f"
    - ID: "acce9b46-1f19-4d3d-a0ec-ed01d807bb7d"
      Hint: RazorView
      Value: |
        @using Sitecore.Mvc.Presentation
        @using Sitecore.Data;
        @using System.Web;
        @using TheAA.Foundation.Rendering;
        @model RenderingModel
        @{var item = Utility.HtmlPlus.Sitecore().DataSourceOrContextItem();}
        @helper TopLevelMenuHelper(Sitecore.Data.Items.Item megaMenuItem)
        {
            var RenderMenuItem = true;
            if (megaMenuItem == null)
            {
                <!-- megaMenuItem == null -->
                RenderMenuItem = false;
            }
        
            if (megaMenuItem.GetField("Contents").Contains("<!-- not a menu item -->"))
            {
                <!-- not a menu item -->
                RenderMenuItem = false;
            }
        
            if (RenderMenuItem)
            {
                var menuState = new MenuState(System.Web.HttpContext.Current, megaMenuItem);
                var megamenuItemName = megaMenuItem.Name.Replace(" ", "").ToLower();
        
                var menuparam = System.Web.HttpContext.Current.Request.QueryString.Get("menu");
                var menu = menuparam == null ? string.Empty : menuparam.ToLower();
                var MenuSecondLevel = string.Empty;
                var menuSplit = menu.Split('-');
        
                <li class="primary-item has-children @menuState.GetMenuActiveClass()">
                    <a href="?menu=@megamenuItemName" class="nojs">@megaMenuItem.Name</a>
                    <span class="toggle"></span>
                    <span class="mobile-toggle"></span>
                    @{
                        if (menuSplit.Length > 1)
                        {
                            MenuSecondLevel = menuSplit[1];
                        }
        
                        var contents = string.Empty;
                        if (megaMenuItem == null)
                        {
                            <!-- could not find megamenu item with the name:@menuState.MenuTopLevel -->
                        }
                        else
                        {
                            if (!string.IsNullOrEmpty(menuparam))
                            {
                                var ContentsField = megaMenuItem.GetField("Contents");
                                contents = ContentsField.RenderValue().ToString();
                                contents = contents.Replace(menu + "---", "");
                            }
                            else
                            {
                                <div class="menureplace-@megamenuItemName" />
                            }
                        }
                    }
                    @contents
                </li>
            }
        }
        
        
        <script>
            // wait for JQuery to download
            function defer(method) {
                if (window.jQuery) {
                    method();
                } else {
                    setTimeout(function () { defer(method) }, 50);
                }
            }
            defer(function () {
                console.log("jQuery is now loaded");
                MenuAfterJQueryLoaded();
            });
        
            var $header,
                $primaryNavigation,
                $aaRoutePlannerContainer,
                $aaRoutePlannerTakeover,
                $megaMenuContainer,
                $secondLevelNavigation,
                headerHeight,
                resizeTimer,
                navDelayTimer;
        
            function setupHeaderGlobals() {
                if (!$header) {
                    $header = $('#site-header, #sales-journey-header');
                    headerHeight = $header.outerHeight();
                }
                if (!$primaryNavigation) {
                    $primaryNavigation = $header.find('#primary-navigation');
                }
        
                if (window.aa && window.aa.helpers && window.aa.helpers.cache && window.aa.helpers.cache.cachedElements && window.aa.helpers.cache.cachedElements.$body) {
                    if (!$aaRoutePlannerContainer) {
                        $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container');
                    }
                    if (!$aaRoutePlannerTakeover) {
                        $aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover');
                    }
                }
                if (!$megaMenuContainer) {
                    $megaMenuContainer = $primaryNavigation.find('.mega-menu');
                }
            }
        
            function MenuAfterJQueryLoaded() {
        
                setupHeaderGlobals();
        
                /*
                 * ---------------------------------------- *
                 * Name: 	AA Helpers JavaScripts          *
                 * Type: 	JavaScript                      *
                 * Version: Not Versioned                   *
                 * Author:  Codehouse                       *
                 * ---------------------------------------- *
                 */
        
                /*
                 * site helper methods
                 */
        
                console.log("MenuAfterJQueryLoaded started");
                window.aa || (window.aa = {});
                window.aa.helpers = {
                    cache: {
                        cachedElements: (new function () {
                            this.$window = $(window);
                            this.$document = $(document);
                            this.$html = $('html');
                            this.$body = $('body');
                            this.$main = $('#main');
                            this.$footer = $('#site-footer');
                            this.isExperienceEditor = this.$body.hasClass('experience-editor');
                            this.url = window.location.pathname;
                        }()),
                        constants: {
                            TABLET_LANDSCAPE: 1024,
                            TABLET_BREAKPOINT: 880,
                            MOBILE_BREAKPOINT: 737
                        },
                        //registerCookie: new Cookie()
                    },
        
                    // truncate text with no option to reveal the rest or "read more/less"
                    truncateText: function (text, nr) {
                        var truncatedText = text.trim().substring(0, nr).split(' ').slice(0, -1).join(' ');
        
                        if (text.length > nr) {
                            return truncatedText;
                        } else {
                            return false;
                        }
                    }
                };
        
        
        
                $(document).ready(function () {
                    console.log('document ready')
                    $('.takeover, .aa-route-planner-container').each(headerTakeovers);
        
                    console.log('setup links to fire Ajax');
                    $('li.primary-item > a.nojs').each(function () {
                        console.log('change each link to use JS instead of href');
                        var link = $(this);
                        link.click(function () {
                            console.log('START link.click(function () {');
                            if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                                console.log('Link clicked so fire Ajax to retrieve menu');
                                $.ajax({
                                    //url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2FContent%2FHome%2Fbreakdown-cover%2Fadvice%2Fbasic-car-checks%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2Fcontent%2FTheAA%2FGlobal%2FNavigation%2FHeader%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    dataType: 'json', async: true,
                                    success: function (data) {
                                        console.log('ajax data success GRAPH QL')
                                        $.each(data.data.item.children, function () {
                                            console.log(this.id);
                                            var menuName = this.name.toLowerCase().split(' ').join('')
                                            $('.menureplace-' + menuName).replaceWith(this.field.Contents);
                                        });
                                        MenuLinksRemoveHref();
                                        SetupMenu();
        
                                        //megaMenuMobile();
                                        $('#primary-navigation').attr('menudownloadedbyajax', 'true');
                                        console.log('START link.click(); after ajax')
                                        link.click();
                                        console.log('END   link.click(); after ajax')
                                    },
                                    fail: function (jqXHR, textStatus, errorThrown) {
                                        console.log('ajax request failed: ' + textStatus)
                                        alert("ajax request failed: " + textStatus);
                                    }
                                });
                            } else {
                                console.log(link[0].outerHTML);
                                console.log('menudownloadedbyajax == true so dont run Ajax anymore');
                            }
                            console.log('END   link.click(function () {');
                        });
                        console.log('change href to javascipt void    ...' + link.attr('href'));
                        link.attr('href', 'javascript:void(0)');
                    });
                    console.log("now hide nojs and show js");
                    //megaMenuMobile();
        
                });
                function MenuLinksRemoveHref() {
                    console.log("START MenuLinksRemoveHref");
                    $("li.primary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        //            e.attr("href", "javascript:void(0)");
                        e.removeClass('nojs');
                        e.addClass('js');
                    });
        
                    // rework secondary menus - backup href, swap class and remove href to let the JS handle event
                    $("li.secondary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        e.removeClass('nojs');
                        e.addClass('js');
                        e.attr('href', 'javascript:void(0)');
                    });
                    /*     */
        
                    $('.js').show();
                    console.log("END MenuLinksRemoveHref");
                }
                // taken from Header.js
        
                /*
                 * ---------------------------------------- *
                 * Name:    Header JavaScripts              *
                 * Type: 	JavaScript                      *
                 * Version: Not Versioned                   *
                 * Author:	Thomas Dale | Codehouse         *
                 * ---------------------------------------- *
                 */
        
                //(function ($) {
        
        
        
        
        
        
        
                // taken from Header.js (function ($) {
                function SetupMenu() {
        
                    console.log('script downloaded and replaced is now running');
                    //$header = $('#site-header, #sales-journey-header');
                    $primaryNavigation = $header.find('#primary-navigation');
                    $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container');
                    //$aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover');
                    $megaMenuContainer = $primaryNavigation.find('.mega-menu');
                    $secondLevelNavigation;
                    //headerHeight = $header.outerHeight();
                    //resizeTimer;
                    //navDelayTimer;
        
        
                    // mega menu dropdown
                    function megaMenu() {
        
                        var $primaryNavigationItem = $(this),
                            $secondaryNavItem = $primaryNavigationItem.find('.secondary-item'),
                            $secondaryItemsOverlay = $primaryNavigation.find('.second-level-nav-overlay'),
                            $primaryNavigationItems = window.aa.helpers.cache.cachedElements.$body.find('.primary-item'),
                            $megaMenu = $primaryNavigationItem.find('.mega-menu'),
                            $navPanels = $primaryNavigationItem.find('.nav-panels'),
                            $subComponents = $navPanels.find('.sub-component'),
                            $myAccount = $header.find('#component-my-account');
        
                        $megaMenu.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width() });
        
                        if ($myAccount.length) {
                            $myAccount.closest('.primary-item').addClass('account-link');
                        }
        
                        function revealMegaMenu() {
        
                            var $secondaryItem = $megaMenu.find('.secondary-item'),
                                $secondaryNavPanels = $megaMenu.find('.nav-panels');
        
                            if ($primaryNavigationItem.hasClass('has-children') && !$primaryNavigationItem.hasClass('active')) {
        
                                if ($primaryNavigationItem.find('.my-aa-account').length) {
                                    $navPanels.addClass('open');
                                }
        
                                if ($primaryNavigationItem.hasClass('account-link')) {
                                    window.aa.helpers.cache.cachedElements.$body.addClass('account-details-active');
                                }
        
                                window.aa.helpers.cache.cachedElements.$body.addClass('nav-open');
                                $primaryNavigationItems.removeClass('active');
                                $primaryNavigationItem.addClass('active');
        
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                    $secondaryItem.removeClass('active');
                                    $secondaryItem.filter(':first').addClass('active');
                                    $secondaryNavPanels.removeClass('open');
                                    $secondaryNavPanels.filter(':first-of-type').addClass('open');
                                    if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                        $secondaryItemsOverlay.show();
                                    }
                                }
                            } else {
                                window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                                $primaryNavigationItems.removeClass('active');
                            }
                        }
        
                        function hideMegamenu() {
                            clearTimeout(navDelayTimer);
                            window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                            $primaryNavigationItems.add($secondaryNavItem).removeClass('active');
                            $navPanels.removeClass('open');
                        }
        
                        function resetMegamenu() {
                            hideMegamenu();
                            $megaMenu.css({ height: 'auto' });
                        }
        
                        if ($megaMenu.length) {
                            $primaryNavigationItem.addClass('has-children');
                        }
        
                        $('.editorial-panel').each(function () {
                            $(this).closest('.nav-panels').addClass('editorial');
                        });
        
                        detectMobileNavigation();
        
                        $primaryNavigationItem.on({
                            click: function (e) {
        
                                var $target = $(this),
                                    isActive = $target.filter('.active');
        
                                if ($primaryNavigationItem.hasClass('active')) {
                                    if (!isActive.is(e.target) && isActive.has(e.target).length === 0) {
                                        resetMegamenu();
                                    }
        
                                    return true;
                                } else {
        
                                    if (!$target.hasClass('has-children') || $target.hasClass('menu-item-clicked')) {
                                        return true;
                                    }
                                    revealMegaMenu();
                                    $megaMenu.css({ height: $target.find('.second-level-navigation').height() });
                                }
        
                                $(this).siblings('.primary-item').find('.nav-panels').removeClass('open');
        
                                return false;
                            }
                        });
        
                        $secondaryNavItem.on('mouseover click', function (e) {
        
                            e.stopPropagation();
        
                            var $element = $(this),
                                targetId = $element.data('secondary'),
                                $subComponent = $('#' + targetId).find('.sub-component');
        
                            if ($('#' + targetId).hasClass('open') && window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                $subComponent.css({ minHeight: window.aa.helpers.getTallestHeightHelper($subComponent) });
                            }
        
                            if ($element.hasClass('active')) {
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                    $secondaryItemsOverlay.show();
                                }
                                return true;
        
                            } else {
                                // momentary delay before revealing mega menu
                                $secondaryNavItem.removeClass('active');
                                $navPanels.removeClass('open');
                                $element.addClass('active');
                                $('#' + targetId).addClass('open');
                            }
                            return false;
                        });
        
                        // re-enable second level navigation events
                        $secondaryItemsOverlay.off('mouseover').on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                clearTimeout(navDelayTimer);
        
                                navDelayTimer = setTimeout(function () {
                                    $secondaryItemsOverlay.hide();
                                }, 250);
                            }
                        });
        
                        // disable second level navigation
                        $navPanels.on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                $secondaryItemsOverlay.show();
                            }
                        });
        
                        // use nav item toggle icon to open/close mega menu
                        $megaMenu.siblings('.toggle').on('click', function (e) {
                            e.stopPropagation();
        
                            if ($(this).parent('li').hasClass('active')) {
                                hideMegamenu();
                                $primaryNavigationItems.find('.nav-panels').removeClass('open');
                            } else {
                                revealMegaMenu();
                            }
                        });
        
                        window.aa.helpers.cache.cachedElements.$document.on({
                            click: function (e) {
        
                                var $targetArea = $megaMenu.add($header);
        
                                if (!$targetArea.is(e.target) && $targetArea.has(e.target).length === 0) {
                                    hideMegamenu();
                                    $primaryNavigationItems.find('.nav-panels').removeClass('open');
                                }
        
                            }
                        });
                    }
        
        
                    $('#primary-navigation .container > ul').children('.primary-item').each(megaMenu);
        
                    //console.log('diagnos megaMenuMobile()');
                    //console.log($('#navicon').length);
                    //console.log($primaryNavigation.length);
                    //console.log(window.aa.helpers.cache.cachedElements.$window.width());
                    //console.log(window.aa.helpers.cache.constants.MOBILE_BREAKPOINT);
                    //console.log('END diagnos megaMenuMobile()');
        
                    //if ($('#navicon').length && $primaryNavigation.length && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    //    megaMenuMobile();
                    //}
                    setupResizeScroll();
                }
        
        
        
                setupResizeScroll();
            }
        
            // update route planner height on resize
            function updateRoutePlannerHeight() {
        
                if ($aaRoutePlannerTakeover.hasClass('active')) {
        
                    var routePlannerHeight = $aaRoutePlannerTakeover.css({ maxHeight: '100%' }).outerHeight();
        
                    $aaRoutePlannerTakeover.css({ maxHeight: routePlannerHeight });
                }
            }
        
            function hideNavigation() {
                $primaryNavigation.find('.active').removeClass('active');
                window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).removeClass('nav-open account-details-active');
                $('#navicon-close').addClass('hidden');
                $('#navicon').removeClass('hidden');
                $megaMenuContainer.parent('li').removeClass('active');
        
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    $primaryNavigation.stop().slideUp(250);
                }
        
            }
        
            // mobile mega menu dropdown
            function megaMenuMobile() {
        
                console.log('START megaMenuMobile()');
                var $header = $('#site-header, #sales-journey-header');
                var $primaryNavigation = $header.find('#primary-navigation');
        
                var $navicon = $('#navicon, #navicon-close'),
                    $primaryItem = $primaryNavigation.find('.primary-item'),
                    $secondaryItem = $primaryItem.find('.secondary-item'),
                    $secondaryLevelNavigation = $primaryItem.find('.second-level-navigation'),
                    $tertiaryLevelNavigation = $primaryItem.find('.nav-panels'),
                    $backToPrimary = $primaryItem.find('.back-to-primary-link'),
                    $backToSecondary = $primaryItem.find('.back-to-secondary-link'),
                    $goToSecondary = $primaryItem.find('.mobile-toggle');
        
                function navToggle() {
                    if ($primaryNavigation.hasClass('nav-open')) {
                        navOpen();
                    } else {
                        navClose();
                    }
                }
        
                function navOpen() {
                    if ($tertiaryLevelNavigation.hasClass('active')) {
                        $tertiaryLevelNavigation.stop().slideDown(250);
                    } else if ($secondaryLevelNavigation.hasClass('active')) {
                        $secondaryLevelNavigation.stop().slideDown(250);
                    }
                    $primaryNavigation.stop().slideDown(250);
                }
        
                function navClose() {
                    if ($tertiaryLevelNavigation.hasClass('active')) {
                        $tertiaryLevelNavigation.stop().slideUp(250, function () {
                            $primaryNavigation.stop().slideUp(250, function () {
                                $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                $(this).css({ left: '0' });
                            });
                        });
                    } else if ($secondaryLevelNavigation.hasClass('active')) {
                        $secondaryLevelNavigation.stop().slideUp(250, function () {
                            $primaryNavigation.stop().slideUp(250, function () {
                                $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                $(this).css({ left: '0' });
                            });
                        });
                    } else {
                        $primaryNavigation.stop().slideUp(250, function () {
                            $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                            $(this).css({ left: '0' });
                        });
                    }
        
                    window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
                }
        
                function slideMenuLevels($selector) {
                    $secondaryLevelNavigation.add($tertiaryLevelNavigation).removeClass('active');
        
                    if ($selector.hasClass('has-children') && $selector.hasClass('primary-item')) {
                        $primaryNavigation.stop().animate({ left: '-100vw' }, 250);
        
                        if ($selector.find('.my-aa-account').length) {
                            $selector.find('.nav-panels').addClass('open').show();
                            $primaryNavigation.stop().animate({ left: '-200vw' }, 250);
        
                        } else {
                            $secondaryLevelNavigation.addClass('active').show();
                            $selector.addClass('menu-item-clicked').siblings().addClass('hide-items');
                            $primaryNavigation.animate({ left: '-100vw' }, 250);
                        }
                    } else if ($selector.hasClass('back-to-primary-link')) {
        
                        $primaryNavigation.stop().animate({ left: '0' }, 250, function () {
        
                            window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
        
                            if ($selector.find('.my-aa-account').length) {
                                $selector.find('.nav-panels').removeClass('open').hide();
        
                            } else {
                                $secondaryLevelNavigation.removeClass('active').hide();
                            }
        
                        });
                    } else if ($selector.hasClass('secondary-item')) {
                        $primaryNavigation.animate({ left: '-200vw' }, 250, function () {
                            $secondaryLevelNavigation.removeClass('active').hide();
                        });
                        $tertiaryLevelNavigation.addClass('active').show();
                    } else if ($selector.hasClass('back-to-secondary-link')) {
                        $primaryNavigation.stop().animate({ left: '-100vw' }, 250, function () {
                            $tertiaryLevelNavigation.removeClass('open').hide();
                        });
                        $secondaryLevelNavigation.addClass('active').show();
                    }
                }
        
                $navicon.off('click');
                $navicon.on('click', function (e) {
                    e.stopImmediatePropagation();
                    $navicon.toggleClass('hidden');
                    window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).toggleClass('nav-open');
                    $primaryItem.removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                    navToggle();
                });
        
                $goToSecondary.off('click');
                $goToSecondary.on('click', function () {
                    $(this).parent().removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                });
        
                $primaryItem.off('click')
                $primaryItem.on('click', function () {
                    console.log('START $primaryItem.on(click, function () {');
                    if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                        slideMenuLevels($(this));
                    }
                    console.log('END   $primaryItem.on(click, function () {');
                });
        
                $backToPrimary.off('click');
                $backToPrimary.on('click', function (e) {
                    e.stopPropagation();
                    $primaryItem.removeClass('active menu-item-clicked').siblings().removeClass('hide-items');
                    slideMenuLevels($(this));
                });
        
                $secondaryItem.off('click');
                $secondaryItem.on('click', function () {
                    slideMenuLevels($(this));
                });
        
                $backToSecondary.off('click');
                $backToSecondary.on('click', function (e) {
                    e.stopPropagation();
                    $secondaryItem.removeClass('active');
                    slideMenuLevels($(this));
                });
        
                if (!window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon) {
                    window.aa.helpers.cache.cachedElements.$document.on({
                        click: function (e) {
        
                            if (!$header.is(e.target) && $header.has(e.target).length === 0 && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                if ($primaryNavigation.is(':visible')) {
                                    $navicon.toggleClass('hidden');
                                    window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).removeClass('nav-open account-details-active');
                                    navToggle();
                                }
                            }
                        }
                    });
                }
                window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon = true;
                console.log('END   megaMenuMobile()');
            }
        
            // mobile navigation exists
            function detectMobileNavigation() {
        
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    $primaryNavigation.removeClass('desktop-nav').addClass('mobile-nav');
        
                } else {
                    $primaryNavigation.removeClass('mobile-nav').addClass('desktop-nav');
                    $primaryNavigation.find('.primary-item').removeClass('menu-item-clicked');
        
                }
            }
        
            // apply class to allow header to be fixed
            function stickyHeader() {
        
                // disable sticky header on mobile only
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    return;
                }
        
                if (window.aa.helpers.cache.cachedElements.$window.scrollTop() >= headerHeight) {
                    $header.addClass('sticky');
                    $aaRoutePlannerTakeover.addClass('hidden');
                    window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: headerHeight });
        
                } else {
                    $header.removeClass('sticky');
                    $aaRoutePlannerTakeover.removeClass('hidden');
        
                    //if (client.Mobile) {
                    //    setTimeout(function () {
                    //        window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                    //    });
        
                    //} else {
                    window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                    //}
                }
        
                $('.my-account').removeClass('active');
        
            }
        
            var $takeovers,
                $closeTakeover,
                $routePlannerTakeover,
                $closeAaTakeover,
                $searchTakeover,
                $bothTakeovers,
                $headerLinks,
                transitionTimer,
                routePlannerHeight,
                activePlace = -1;
            var headerTakeoverEventHandlersSetup = false;
        
            // header takeover forms
            function headerTakeovers() {
        
                $takeovers = $(this);
                $closeTakeover = $takeovers.find('.close-takeover');
                $routePlannerTakeover = $takeovers.filter('#route-planner-takeover');
                $closeAaTakeover = $aaRoutePlannerTakeover.find('.aa-takeover-btn');
                $searchTakeover = $takeovers.filter('#search-takeover');
                $bothTakeovers = $searchTakeover.add($routePlannerTakeover);
                $headerLinks = $('#helpful-links').add('#top-level-nav');
                transitionTimer;
                routePlannerHeight;
                activePlace = -1;
        
                // route planner toggle
                function toggleRoutePlanner() {
        
                    var $firstInput = $routePlannerTakeover.find('input').filter(':first');
        
                    //if (client.oldIE || client.IE9) {
                    //    $headerLinks.stop().fadeOut(250);
                    //    $routePlannerTakeover.stop().fadeIn(500);
                    //    $firstInput.focus();
                    //    return;
                    //}
        
                    $headerLinks.addClass('animated blur-out');
                    $routePlannerTakeover.stop().toggleClass('animated zoom-in');
                    $firstInput.focus();
                    hideNavigation();
                }
        
                // aa route planner animating
                function routePlannerAnimating() {
        
                    window.aa.helpers.cache.cachedElements.$body.removeClass('transition-off').addClass('transition-on');
        
                    clearTimeout(transitionTimer);
        
                    transitionTimer = setTimeout(function () {
                        window.aa.helpers.cache.cachedElements.$body.removeClass('transition-on').addClass('transition-off');
                    }, 550);
                }
        
                // aa route planner toggle
                function toggleAaRoutePlanner() {
        
                    var $firstInput = $aaRoutePlannerTakeover.find('input').filter(':first');
        
                    if ($aaRoutePlannerTakeover.hasClass('active')) {
                        routePlannerHeight = $aaRoutePlannerTakeover.css({ maxHeight: '' }).outerHeight();
        
                        $aaRoutePlannerTakeover.add($aaRoutePlannerContainer).css({ overflow: 'hidden' });
                        routePlannerAnimating();
                        $aaRoutePlannerTakeover.css({ maxHeight: routePlannerHeight }).stop().animate({ maxHeight: 0 }, 550, function () {
                            $aaRoutePlannerTakeover.add($aaRoutePlannerTakeover.parent()).removeClass('active');
                        });
        
                    } else {
        
                        window.aa.helpers.cache.cachedElements.$window.scrollTop(0);
                        $aaRoutePlannerTakeover.add($aaRoutePlannerTakeover.parent()).addClass('active');
        
                        if (!routePlannerHeight) {
                            routePlannerHeight = $aaRoutePlannerTakeover.outerHeight();
                        }
        
                        hideNavigation();
                        routePlannerAnimating();
                        $aaRoutePlannerTakeover.stop().animate({ maxHeight: routePlannerHeight }, 550, function () {
                            $firstInput.focus();
                            $aaRoutePlannerTakeover.add($aaRoutePlannerContainer).css({ overflow: 'visible' });
                        });
                    }
                }
        
                // navigate through suggested places list
                function navigateSuggestedPlaces(placeIndex) {
        
                    var $places = window.aa.helpers.cache.cachedElements.$body.find('.location-suggestions .place');
        
                    activePlace += placeIndex;
        
                    if (activePlace >= $places.length) {
                        activePlace = 0;
        
                    } else if (activePlace < 0) {
                        activePlace = $places.length;
                    }
        
                    window.aa.helpers.cache.cachedElements.$body.addClass('no-overflow');
                    window.aa.helpers.cache.cachedElements.$body.find('#chosen-location').blur();
                    $places.removeClass('place-active').eq(activePlace).addClass('place-active');
                }
        
                // hide location suggestions
                function hideLocationSuggestions() {
                    window.aa.helpers.cache.cachedElements.$body.removeClass('no-overflow');
                    window.aa.helpers.cache.cachedElements.$main.find('.chosen-location').removeClass('active-search');
                    window.aa.helpers.cache.cachedElements.$main.find('.location-suggestions').hide().empty();
                }
        
                // traffic news events
                function initTrafficNews() {
        
                    var $trafficInfoContainer = $(this),
                        $locationInputContainer = $trafficInfoContainer.find('.chosen-location'),
                        $locationInput = $locationInputContainer.find('#chosen-location'),
                        $locationSuggestionsList = $trafficInfoContainer.find('.location-suggestions'),
                        $trafficReport = $trafficInfoContainer.find('.traffic-report'),
                        $trafficNews = $trafficInfoContainer.find('.traffic-news'),
                        $setLocation = $trafficInfoContainer.find('.set-location'),
                        $setLat = $trafficInfoContainer.find('.set-lat'),
                        $setLong = $trafficInfoContainer.find('.set-long'),
                        defaultLocation = $locationInputContainer.data('default-location'),
                        defaultLat = $locationInputContainer.data('default-lat'),
                        defaultLong = $locationInputContainer.data('default-long'),
                        suggestionsViewTemplate = $locationSuggestionsList.html(),
                        trafficReportViewTemplate = $trafficReport.html(),
                        loadSuggestionsTimer;
        
                    // set location preferences
                    function populateFields(lat, long, location) {
                        $setLat.val(lat);
                        $setLong.val(long);
        
                        if (window.aa.salesJourneyApp.helpers.isDefined(location)) {
                            $locationInput.val(location);
                            $locationInput.data('chosen-location', location);
                        }
                    }
        
                    // get my location using geolocation api
                    function getLocation() {
                        if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition(setPosition, showError);
                        } else {
                            populateFields(defaultLat, defaultLong, defaultLocation);
                        }
                    }
        
                    // set my location using geolocation api
                    function setPosition(position) {
        
                        var lat = position.coords.latitude,
                            long = position.coords.longitude;
        
                        $.ajax({
                            method: 'GET',
                            url: 'https://maps.googleapis.com/maps/api/geocode/json',
                            data: { latlng: lat + ',' + long }
                        }).done(function (response) {
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response.results)) {
                                populateFields(lat, long, response.results[0].address_components[2].long_name);
        
                            } else {
                                populateFields(defaultLat, defaultLong, defaultLocation);
                            }
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
                    }
        
                    // geolocation error handling
                    function showError(error) {
                        switch (error.code) {
                            case error.PERMISSION_DENIED:
                                $('[data-location-off]').show();
                                updateRoutePlannerHeight();
                                break;
                            case error.POSITION_UNAVAILABLE:
                            case error.TIMEOUT:
                            case error.UNKNOWN_ERROR:
                                populateFields(defaultLat, defaultLong, defaultLocation);
                                break;
                        }
                    }
        
                    // load location suggestions
                    function loadSuggestedLocations($input, location) {
        
                        var $inputLoader = $trafficInfoContainer.find('.input-loader');
        
                        $inputLoader.stop().fadeIn(250);
                        $input.blur();
        
                        $.ajax({
                            method: 'GET',
                            url: '/cms/ajax/api/RoutePlannerTrafficNews/GetSuggestedAddresses',
                            data: { searchText: location }
                        }).done(function (response) {
        
                            $inputLoader.stop().fadeOut(250);
                            hideLocationSuggestions();
                            activePlace = -1;
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response.Result)) {
        
                                for (var i = 0; i < response.Result.length; i += 1) {
        
                                    $locationSuggestionsList.append(Mustache.render(suggestionsViewTemplate, response.Result[i])).show();
                                    $locationInputContainer.addClass('active-search');
                                }
        
                                $input.removeClass('typing').focus();
                            } else {
                                populateFields(defaultLat, defaultLong, defaultLocation);
                            }
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
                    }
        
                    // get location coordinates
                    function getLocationCoordinates(callback) {
        
                        $setLocation.prop('disabled', true).addClass('disabled');
        
                        $.ajax({
                            method: 'GET',
                            url: '/cms/ajax/api/RoutePlannerTrafficNews/GetPlace',
                            data: { address: $locationInput.data('chosen-location') }
                        }).done(function (response) {
        
                            $setLocation.prop('disabled', false).removeClass('disabled');
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response.Result)) {
                                populateFields(response.Result.Latitude, response.Result.Longitude);
        
                            } else {
                                populateFields(defaultLat, defaultLong, defaultLocation);
                            }
        
                            if (typeof callback === 'function') {
                                callback();
                            }
        
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
        
                    }
        
                    // set am/pm time
                    function hourAmPm(date) {
        
                        var setDate = new Date(date),
                            hours = setDate.getHours(),
                            ampm = (hours >= 12) ? 'PM' : 'AM',
                            minutes = (setDate.getMinutes() < 10) ? '0' + setDate.getMinutes() : setDate.getMinutes();
        
                        return hours + ':' + minutes + ampm;
                    }
        
                    // format incident occurrence time
                    function formatIncidentDate(incidentDate) {
        
                        var monthNames = ['Jan', 'Febr', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'],
                            date = new Date(incidentDate),
                            day = date.getDate(),
                            year = date.getFullYear(),
                            month = monthNames[date.getMonth()];
        
                        return (day + ' ' + month + ' ' + year + ', ' + hourAmPm(incidentDate));
                    }
        
                    // get news traffic data
                    function getTrafficNews() {
        
                        var $sectionLoader = $trafficInfoContainer.find('.section-loader');
        
                        $setLocation.prop('disabled', true).addClass('disabled');
                        $sectionLoader.stop().fadeIn(250);
        
                        if (!$aaRoutePlannerTakeover.is('.active')) {
                            window.aa.salesJourneyApp.cache.$main.find('#aa-route-planner').prop('disabled', true);
                        }
        
                        $.ajax({
                            method: 'GET',
                            url: '/cms/ajax/api/RoutePlannerTrafficNews/GetIncidentsInRadius',
                            data: { coordinates: $setLat.val() + '|' + $setLong.val() }
                        }).done(function (response) {
        
                            var $incidentTime,
                                $incidentDescription,
                                view = Mustache.render(trafficReportViewTemplate, response);
        
                            $setLocation.prop('disabled', false).removeClass('disabled');
                            $sectionLoader.hide();
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response)) {
        
                                $trafficReport.hide().empty();
                                $trafficNews.hide();
                                $trafficReport.append(view).show();
        
                                // cache dynamic generated selectors
                                $incidentTime = $trafficReport.find('.incident-time');
                                $incidentDescription = $trafficReport.find('.incident-description');
        
                                if (window.aa.salesJourneyApp.helpers.isDefined(response.Description) && window.aa.salesJourneyApp.helpers.isDefined(response.IncidentSeverity)) {
        
                                    $incidentDescription.empty().html(response.Description.split(': ')[1]);
                                    $incidentTime.html(formatIncidentDate(response.StartDate) + ' (' + $incidentTime.data('label') + ')');
        
                                } else {
                                    $trafficReport.find('.incident-title').remove();
        
                                    if (response.StartDate !== $trafficInfoContainer.data('time-undefined') || window.aa.salesJourneyApp.helpers.isDefined(response.UpdatedDateTime)) {
                                        $incidentTime.html($trafficReport.find('.report-details').data('last-update').replace('{time}', formatIncidentDate(response.UpdatedDateTime)));
                                    }
        
                                    $trafficReport.find('.road-icon').remove();
                                    $trafficReport.find('.report-details').addClass('report-not-available');
                                    $incidentDescription.html($incidentDescription.data('no-incidents'));
                                }
        
                                $trafficReport.find('.current-location p').html($locationInput.data('chosen-location').split(',', 1));
                                updateRoutePlannerHeight();
        
                            } else {
                                window.aa.salesJourneyApp.helpers.serviceErrorModal();
                            }
        
                            window.aa.salesJourneyApp.cache.$main.find('#aa-route-planner').prop('disabled', false);
        
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
                    }
        
                    // on load set traffic news for London by default
                    populateFields(defaultLat, defaultLong, defaultLocation);
                    getTrafficNews();
        
                    // show location suggestions on keyup
                    $locationInput.off('keyup').on('keyup', function (e) {
        
                        var $target = $(this),
                            targetValue = $target.val();
        
                        if (e.which === 40 && $locationSuggestionsList.find('.place').length) {
                            navigateSuggestedPlaces(0);
                            return;
                        }
        
                        clearTimeout(loadSuggestionsTimer);
        
                        if ($target.hasClass('typing') && targetValue.length >= 3 && e.which !== 27) {
                            loadSuggestionsTimer = setTimeout(function () {
                                loadSuggestedLocations($target, targetValue);
                            }, 350);
        
                        } else {
                            hideLocationSuggestions();
                            $target.data('chosen-location', '');
                        }
                    });
        
                    // set chosen location
                    $locationSuggestionsList.off('click').on('click', '.place', function () {
        
                        var location = $(this).data('location-to-send');
        
                        $locationInput.data('chosen-location', location);
                        $locationInput.val(location.split(',', 1));
                        hideLocationSuggestions();
                    });
        
                    // edit location and reset traffic info
                    $trafficReport.off('click').on('click', '.edit-location', function (e) {
                        e.preventDefault();
                        $trafficReport.hide().empty();
                        $trafficNews.show();
                        $locationInput.focus();
                        updateRoutePlannerHeight();
                    });
        
                    // switch route inputed values
                    $aaRoutePlannerContainer.find('.field-separator').off('click').on('click', function () {
        
                        var $from = $aaRoutePlannerContainer.find('#fromPlace-1'),
                            $to = $aaRoutePlannerContainer.find('#toPlace-1'),
                            fromValue = $from.val(),
                            toValue = $to.val();
        
                        $from.val(toValue);
                        $to.val(fromValue);
                    });
        
                    // hide and clear location suggestions list when not in focus
                    window.aa.helpers.cache.cachedElements.$document.on('mouseup touchend', function (e) {
                        if (!$locationSuggestionsList.is(e.target) && $locationSuggestionsList.has(e.target).length === 0) {
                            hideLocationSuggestions();
                        }
                    });
        
                    // set current location
                    $trafficInfoContainer.find('.my-location').off('click').on('click', function (e) {
                        e.preventDefault();
                        getLocation();
                    });
        
                    // send location coordinates to server
                    $setLocation.off('click').on('click', function (e) {
        
                        e.preventDefault();
        
                        // trigger validation on the form
                        formValidation.api[$trafficInfoContainer.data('id')].validateForm();
        
                        if ($trafficInfoContainer.hasClass('errors')) {
                            updateRoutePlannerHeight();
                            $trafficInfoContainer.find('.error').eq(0).find('input:first').focus();
                            return;
                        }
        
                        // set default location if chosen location is empty
                        if ($locationInput.data('chosen-location') === '') {
                            populateFields(defaultLat, defaultLong, defaultLocation);
                            getTrafficNews();
                            return;
                        }
        
                        getLocationCoordinates(getTrafficNews);
                    });
                }
        
                // search takeover toggle
                function toggleSearchTakeover() {
        
                    var $searchInput = $searchTakeover.find('input').first();
        
                    hideNavigation();
        
                    //if (client.oldIE || client.IE9) {
                    //    $headerLinks.stop().fadeOut(250);
                    //    $searchTakeover.stop().fadeIn(500);
                    //    $searchInput.focus();
                    //    return;
                    //}
        
                    $searchInput.focus();
                    $searchTakeover.stop().toggleClass('animated zoom-in');
        
                    // slide down on mobile
                    if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                        // hide navicon close text when search icon is clicked
                        if ($primaryNavigation.is(':visible')) {
                            $('#navicon-close').addClass('hidden');
                            $('#navicon').removeClass('hidden');
                        }
        
                        window.aa.helpers.cache.cachedElements.$html.removeClass('no-overflow');
        
                        hideNavigation();
        
                        return;
                    }
        
                    // fade and zoom in
                    $headerLinks.addClass('animated blur-out');
                }
        
                // close takeovers
                function closeTakeovers() {
                    //if (client.oldIE || client.IE9) {
                    //    $bothTakeovers.stop().fadeOut(250);
                    //    $headerLinks.stop().fadeIn(500);
                    //    return;
                    //}
        
                    if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                        if ($searchTakeover.hasClass('zoom-in')) {
                            $bothTakeovers.removeClass('zoom-in').addClass('zoom-out');
                        }
        
                        if ($bothTakeovers.hasClass('zoom-out')) {
                            setTimeout(function () {
                                $bothTakeovers.removeClass('animated zoom-out');
                            }, 250);
                        }
        
                        return;
                    }
        
                    // fade and zoom out
                    $bothTakeovers.removeClass('zoom-in').addClass('zoom-out');
        
                    if ($bothTakeovers.hasClass('zoom-out')) {
                        setTimeout(function () {
                            $headerLinks.removeClass('blur-out').addClass('blur-in');
                            $bothTakeovers.removeClass('animated zoom-out');
                        }, 250);
                    }
                }
        
                if (headerTakeoverEventHandlersSetup == false) {
        
                    $('#search-icon').on({
                        click: toggleSearchTakeover
                    });
        
                    // route planner takeover
                    $('#route-planner').on({
                        click: toggleRoutePlanner
                    });
        
                    // aa route planner takeover
                    $('#aa-route-planner').off('click').on({
                        click: toggleAaRoutePlanner
                    });
        
                    // init traffic news
                    $('.traffic-info').each(initTrafficNews);
        
                    // prevent symbols from being entered into search input
                    $('#search-takeover').find('input[type="text"]').on('keypress', function () {
                        return /^[a-zA-Z0-9- ]*$/.test($(this).val());
                    });
        
                    // close takeovers
                    $closeTakeover.on({
                        click: closeTakeovers,
                        keypress: function (e) {
                            if (e.which === 13 || e.keyCode === 13) {
                                closeTakeovers();
                            }
                        }
                    });
        
                    // close aa route planner
                    $closeAaTakeover.on({
                        click: toggleAaRoutePlanner,
                        keypress: function (e) {
                            if (e.which === 13 || e.keyCode === 13) {
                                toggleAaRoutePlanner();
                            }
                        }
                    });
        
                    // close active takeover if esc key is pressed
                    window.aa.helpers.cache.cachedElements.$document.on('keyup keypress', function (e) {
        
                        if (e.which === 27) {
        
                            if ($bothTakeovers.hasClass('zoom-in')) {
                                closeTakeovers();
                            }
        
                            if ($aaRoutePlannerTakeover.hasClass('active')) {
                                toggleAaRoutePlanner();
                            }
        
                            hideLocationSuggestions();
                        }
        
                        if (window.aa.helpers.cache.cachedElements.$body.find('.location-suggestions').children().length) {
        
                            e.preventDefault();
        
                            switch (e.which) {
                                case 13:
                                case 32:
                                    window.aa.helpers.cache.cachedElements.$body.find('.location-suggestions').find('.place-active').trigger('click');
                                    break;
                                case 40:
                                case 9:
                                    navigateSuggestedPlaces(1);
                                    break;
                                case 38:
                                    navigateSuggestedPlaces(-1);
                                    break;
                            }
                        }
                    });
        
                    // remove route planner on window resize
                    window.aa.helpers.cache.cachedElements.$window.on('resize', function () {
                        if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                            $routePlannerTakeover.addClass('hidden');
        
                            if ($aaRoutePlannerTakeover.hasClass('active')) {
                                toggleAaRoutePlanner();
                            }
                        }
                    });
                    headerTakeoverEventHandlersSetup = true;
                }
            }
        
            function setupResizeScroll() {
                setupHeaderGlobals();
                window.aa.helpers.cache.cachedElements.$window.on({
                    resize: function () {
        
                        clearTimeout(resizeTimer);
                        resizeTimer = setTimeout(function () {
        
                            $secondLevelNavigation = $primaryNavigation.find('.primary-item.active .second-level-navigation');
        
                            if ($primaryNavigation.length) {
                                detectMobileNavigation();
                            }
        
                            if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                megaMenuMobile();
                            }
        
                            updateRoutePlannerHeight();
        
                            $megaMenuContainer.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width(), height: $secondLevelNavigation.height() });
                        }, 100); // call on resize end
                    },
                    scroll: function () {
                        console.log("scroll");
                        if ($header.length) {
        
                            stickyHeader();
                            if (($('#sales-journey-header').hasClass("sticky")) && ($("#contact-cta").hasClass('dsf-view-none'))) {
                                $('#CancelSalesLabel').css('margin-right', '13rem');
                                $("#BackToDashboard").css({ "margin-right": "13rem", "margin-left": "-30px" });
                            }
                            else {
                                $('#CancelSalesLabel').css('margin-right', '2.5rem');
                                $("#BackToDashboard").css({ 'margin-right': '2.5rem', 'margin-left': '0px' });
                            }
        
                        } else {
                            console.log("NO sticy header since $header.length false");
                        }
        
                    }
                });
            }
        
        </script>
        <style type="text/css">
            .nojs {
            }
        
            .js {
                display: none;
            }
        
            .experience-editor-display {
                display: none
            }
        
            /*#logo {
                width: 438px;
                height: 212px;
        
            }*/
            #logo > svg {
                width: 100%;
                height: 100%;
            }
        
            #logo {
                height: 187px;
                height: 18.7rem;
                left: 0;
                position: absolute;
                top: 0;
                transform: translate3d(0,0,0);
                background: url("/Assets/images/logo-aa-desktop.png") no-repeat right top transparent;
                width: 328px;
                width: 32.8rem;
                z-index: 2;
            }
        
        
                #logo > a {
                    height: 45px;
                    height: 4.5rem;
                    width: 55px;
                    width: 5.5rem;
                    left: auto;
                    top: 75px;
                    top: 7.5rem;
                    right: 65px;
                    right: 6.5rem;
                    position: absolute;
                }
        
                    #logo > a:focus {
                        border: 1px dotted #000;
                    }
        
            @@media screen and (max-width: 1366px) {
                #logo {
                    height: 17rem;
                    left: -2rem;
                    top: 0;
                    width: 25.5rem
                }
            }
        
            @@media screen and (max-width: 1060px) {
        
                #logo {
                    -moz-background-size: 10.1rem auto;
                    -ms-background-size: 10.1rem auto;
                    -o-background-size: 10.1rem auto;
                    -webkit-background-size: 10.1rem auto;
                    background-image: url("/Assets/images/logo-aa-tablet.png");
                    background-size: 10.1rem auto;
                    height: 11rem;
                    left: 0;
                    margin-top: 0;
                    top: 0;
                    width: 10.1rem
                }
            }
        
            @@media only screen and (max-width: 737px) {
        
                #logo {
                    background-size: 8.9rem auto;
                    height: 5rem;
                    left: 0;
                    margin-top: 0;
                    width: 8.9rem;
                    z-index: 4;
                }
        
                    #logo > a {
                        left: 11px;
                        left: 1.1rem;
                        top: 5px;
                        top: .5rem;
                        width: 35px;
                        width: 3.5rem;
                        height: 28px;
                        height: 2.8rem
                    }
        
                header#site-header.stripped #logo {
                    margin-top: 0;
                }
            }
        </style>
        <style type="text/css">
            @@media screen and (min-width: 1366px) {
                #largestViewbox {
                    display: inline;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 1366px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: inline;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
        
            @@media screen and (max-width: 1160px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: inline;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 737px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: inline;
                }
            }
        </style>
        <!-- header.css line 236...-->
        <style>
            /* takeovers */
            .takeover {
                -moz-animation-duration: 0.5s;
                -webkit-animation-duration: 0.5s;
                -o-animation-duration: 0.5s;
                animation-duration: 0.5s;
                background-color: #ffffff;
                border: none;
                display: none;
                height: 100%;
                max-width: none;
                margin-bottom: 0;
                margin-right: 0;
                margin-top: 0;
                outline: none;
                padding-right: 285px;
                padding-right: 28.5rem;
                padding-left: 27.5%;
                position: absolute;
                opacity: 1;
                right: 0;
                top: 0;
                width: 100%;
                z-index: 1;
            }
        
                .takeover.animated {
                    display: block;
                }
        
                .takeover.hidden {
                    display: none;
                }
        
                .takeover > p,
                .takeover > .go-to {
                    margin-bottom: 0;
                    padding-bottom: 5px;
                    padding-bottom: 0.5rem;
                    padding-top: 14px;
                    padding-top: 1.4rem;
                }
        
                .takeover .close-takeover {
                    cursor: pointer;
                    font-family: "NewTransport-Bold", Arial, Helvetica, Verdana, sans-serif;
                    margin-bottom: 0;
                    margin-top: 0;
                    margin-right: 0;
                    font-weight: 400;
                }
        
                    .takeover .close-takeover:hover {
                        -moz-transform: scale(1.05);
                        -ms-transform: scale(1.05);
                        -o-transform: scale(1.05);
                        -webkit-transform: scale(1.05);
                        text-decoration: underline;
                        transform: scale(1.05);
                    }
        
                    .takeover .close-takeover:active {
                        -moz-transform: scale(1);
                        -ms-transform: scale(1);
                        -o-transform: scale(1);
                        -webkit-transform: scale(1);
                        transform: scale(1);
                    }
        
                    .takeover .close-takeover:focus {
                        outline: none;
                        text-decoration: underline;
                    }
        
                .takeover .placeholder-wrapper > div,
                .takeover .placeholder-wrapper input,
                .takeover .placeholder-wrapper textarea {
                    float: none;
                    margin: 0;
                    width: 100%;
                }
        
                .takeover .placeholder-wrapper .placeholder {
                    font-size: 17px;
                    font-size: 1.7rem;
                    left: 11px;
                    left: 1.1rem;
                }
        
            header#site-header .takeover form .stylish-text > span {
                -moz-border-radius: 0;
                -webkit-border-radius: 0;
                border-radius: 0;
                border: none;
                border-bottom: 1px solid #c7c8ca;
                height: 38px;
                height: 3.8rem;
            }
        
            header#site-header .takeover form .stylish-text > input {
                -moz-border-radius: 0;
                -webkit-border-radius: 0;
                border-radius: 0;
                -moz-box-shadow: none;
                -webkit-box-shadow: none;
                background: transparent;
                border: none;
                box-shadow: none;
                color: #21252d;
                font-size: 17px;
                font-size: 1.7rem;
                line-height: 38px;
                line-height: 3.8rem;
                max-width: 100%;
                padding: 0 11px;
                padding: 0 1.1rem;
            }
        
            header#site-header .takeover form .stylish-text > span,
            .sticky .takeover .placeholder-wrapper .placeholder {
                font-size: 15px;
                font-size: 1.5rem;
            }
        
            .safari .stylish-form .takeover form .stylish-text > input {
                line-height: 1.6rem;
            }
        
            /* search takeover */
            #search-takeover .search {
                margin: 0;
                padding: 40px 0 0;
                padding: 4rem 0 0;
                position: relative;
            }
        
            #search-takeover .search-input {
                max-width: 872px;
                max-width: 87.2rem;
                position: relative;
                width: 94%;
            }
        
            #search-takeover .search .stylish-text {
                max-width: 100%;
                width: 100%;
            }
        
            #search-takeover .search span.close {
                background: url("/Assets/images/icons/close-icon-dark.png") no-repeat 0 0 transparent;
                bottom: 26%;
                cursor: pointer;
                display: none;
                height: 14px;
                height: 1.4rem;
                margin-top: 0;
                position: absolute;
                right: 10px;
                right: 1rem;
                width: 11px;
                width: 1.1rem;
            }
        
                #search-takeover .search span.close:focus {
                    filter: alpha(opacity=60);
                    opacity: 0.6;
                    outline: none;
                }
        
            #search-takeover .submit-search {
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                border-radius: 5px;
                border: 2px solid #1d1d1d;
                height: 38px;
                height: 3.8rem;
                width: 38px;
                width: 3.8rem;
            }
        
                #search-takeover .submit-search > input.button,
                #search-takeover .submit-search > input.button[disabled] {
                    background: url("/Assets/images/icons/search-icon-dark.png") no-repeat center center transparent;
                    box-shadow: none;
                    opacity: 1;
                    height: 100%;
                    padding: 0;
                    width: 100%;
                }
        
                    #search-takeover .submit-search > input.button:focus {
                        background-color: #dcdcdc;
                    }
        
            #search-takeover.takeover form .stylish-text > span {
                border-bottom: none;
            }
        
            .sticky #search-takeover .search {
                clear: none;
                float: left;
                padding: 0;
                width: 94%;
            }
        
                .sticky #search-takeover .search .stylish-text,
                .sticky #search-takeover .submit-search {
                    margin-top: 6px;
                    margin-top: 0.6rem;
                }
        
            /* route planner  */
            #route-planner-takeover > .go-to > .left {
                font-family: "NewTransport-Bold", Arial, Helvetica, Verdana, sans-serif;
                margin-bottom: 0;
                margin-right: 10px;
                margin-right: 1rem;
                padding-right: 10px;
                padding-right: 1rem;
                position: relative;
            }
        
                #route-planner-takeover > .go-to > .left:after {
                    background: #c7c8ca;
                    content: "";
                    display: block;
                    height: 10px;
                    height: 1rem;
                    margin-top: -5px;
                    margin-top: -0.5rem;
                    position: absolute;
                    right: 0;
                    top: 50%;
                    width: 1px;
                    width: 0.1rem;
                }
        
                #route-planner-takeover > .go-to > .left > a {
                    font-weight: 400;
                }
        
            #route-planner-takeover .route-planner {
                margin-top: 10px;
                margin-top: 1rem;
                position: relative;
            }
        
                #route-planner-takeover .route-planner .stylish-text:first-of-type,
                #route-planner-takeover .route-planner .placeholder-wrapper:first-of-type {
                    margin-left: 0;
                }
        
                #route-planner-takeover .route-planner .stylish-text,
                #route-planner-takeover .route-planner .placeholder-wrapper {
                    float: left;
                    margin-left: 3%;
                    margin-top: 40px;
                    margin-top: 4rem;
                    max-width: 395px;
                    max-width: 39.5rem;
                    width: 40%;
                }
        
                    #route-planner-takeover .route-planner .placeholder-wrapper > div,
                    #route-planner-takeover .route-planner .placeholder-wrapper input,
                    #route-planner-takeover .route-planner .placeholder-wrapper textarea {
                        float: none;
                        margin: 0;
                        width: 100%;
                    }
        
                #route-planner-takeover .route-planner > .large-text {
                    border: none;
                    left: 8px;
                    left: 0.8rem;
                    margin-bottom: 0;
                    position: absolute;
                    top: -12px;
                    top: -1.2rem;
                }
        
                #route-planner-takeover .route-planner .submit {
                    margin-top: 40px;
                    margin-top: 4rem;
                }
        
                    #route-planner-takeover .route-planner .submit > input[type="submit"] {
                        font-size: 13px;
                        font-size: 1.3rem;
                        line-height: 13px;
                        line-height: 1.3rem;
                        padding: 10px 20px;
                        padding: 1rem 2rem;
                    }
        
            .sticky #route-planner-takeover .route-planner {
                clear: none;
                margin-left: 0;
                margin-right: 6%;
                margin-top: 0;
            }
        
                .sticky #route-planner-takeover .route-planner .stylish-text {
                    margin-top: 6px;
                    margin-top: 0.6rem;
                }
        
            .sticky.stylish-form .takeover .stylish-text > input {
                font-size: 15px;
                font-size: 1.5rem;
            }
        
            .sticky .takeover > .go-to > .left,
            .sticky #route-planner-takeover .route-planner .large-text {
                display: none;
            }
        
            .sticky #route-planner-takeover .route-planner .submit {
                margin-top: 6px;
                margin-top: 0.6rem;
            }
        
            .sticky #route-planner-takeover .route-planner .placeholder-wrapper {
                margin-top: 6px;
                margin-top: 0.6rem;
            }
        
                .sticky #route-planner-takeover .route-planner .placeholder-wrapper .stylish-text {
                    margin-top: 0;
                }
        </style>
        <!-- header.css line 551-709-->
        <style>
            @@media screen and (max-width: 1160px) {
                /* header */
                header#site-header .four-column .col {
                    width: 23.5%;
                }
        
                    header#site-header .four-column .col:nth-child(2n+1) {
                        clear: none;
                        margin-top: 0;
                    }
                /* logo */
                #logo {
                    width: 15.5rem;
                }
        
                .sticky #logo,
                .stripped #logo {
                    height: 14.5rem;
                }
        
                #logo > a { /*top: -3rem;*/
                }
                /*.sticky #logo > a,
            .stripped #logo > a { left: -4.8rem; top: -1rem; } removed for CD-553*/
                /* header links */
                .takeover,
                #header-links,
                .sticky #header-links,
                #cookie-bar > .wrapper .text {
                    padding-left: 13rem;
                    padding-right: 0;
                }
        
                header#site-header .page-title {
                    padding-left: 19rem;
                }
                /* primary navigation */
                #primary-navigation ul > li > .mega-menu {
                    margin-left: 0;
                    margin-right: 0;
                }
                /* search takeover*/
                #search-takeover .search-input {
                    width: 93%;
                }
                /* snapped header */
                .sticky .takeover {
                    padding-left: 14%;
                }
        
                .sticky #route-planner-takeover .route-planner .stylish-text {
                    margin-left: 2%;
                    width: 42%;
                }
        
                    .sticky #route-planner-takeover .route-planner .stylish-text:first-of-type {
                        margin-left: 0;
                    }
                /* my account mega menu */
                .my-account .account-nav.mega-menu.four-column .col {
                    margin-top: 0;
                }
        
                    .my-account .account-nav.mega-menu.four-column .col:nth-child(2n+1) {
                        clear: none;
                    }
                /* aa route planner */
                #aa-route-planner-takeover {
                    margin: 0 2rem;
                }
            }
        
            @@media screen and (max-width: 1060px) {
                /* global */
                header#site-header .four-column .col {
                    width: 25%;
                }
        
                    header#site-header .four-column .col:nth-child(2n+1) {
                        clear: none;
                    }
                /* header */
                header#site-header {
                    height: auto;
                }
        
                    header#site-header.sticky,
                    header#site-header.stripped {
                        height: 6rem;
                    }
                /* logo */
                #logo {
                    -moz-background-size: 10.1rem auto;
                    -ms-background-size: 10.1rem auto;
                    -o-background-size: 10.1rem auto;
                    -webkit-background-size: 10.1rem auto;
                    background-image: url("/Assets/images/logo-aa-tablet.png");
                    background-size: 10.1rem auto;
                    height: 11rem;
                    left: 0;
                    margin-top: 0;
                    top: 0;
                    width: 10.1rem;
                }
        
                .sticky #logo,
                .stripped #logo {
                    height: 11rem;
                    margin-top: -5rem;
                    top: 0;
                }
        
                #logo > a {
                    top: 62px;
                    top: 6.2rem;
                    right: 42px;
                    right: 4.2rem;
                    height: 35px;
                    height: 3.5rem;
                    width: 45px;
                    width: 4.5rem;
                    left: auto;
                }
                /*CD-553 Accessibility focus for logo*/
                /*.sticky #logo > a,
            .stripped #logo > a { left: -3.2rem; top: -0.5rem; } removed for CD-553*/
                /* header links */
                #helpful-links {
                    padding: 1rem 0;
                }
        
                header#site-header .page-title {
                    padding-left: 13rem;
                    padding-bottom: 1.8rem;
                }
        
                .sticky #header-links .button.tertiary.ghost {
                    padding: 1rem 0;
                }
        
                .sticky #helpful-links {
                    top: 0.2rem;
                }
        
                .sticky #header-links {
                    padding-left: 17%;
                }
                /* primary navigation */
                #primary-navigation ul > li > .mega-menu {
                    margin-left: 0;
                    margin-right: 0;
                }
                /* top level nav */
                #top-level-nav #search-icon,
                #search-takeover .submit-search > input.button,
                #search-takeover .submit-search > input.button[disabled] {
                    -moz-background-size: 1.1rem 1.1rem;
                    -ms-background-size: 1.1rem 1.1rem;
                    -o-background-size: 1.1rem 1.1rem;
                    -webkit-background-size: 1.1rem 1.1rem;
                    background-image: url("/Assets/images/icons/search-icon-dark-x2.png");
                    background-size: 1.1rem 1.1rem;
                    height: 3rem;
                    margin-top: 0;
                    width: 3rem;
                }
        
                    #search-takeover .submit-search > input.button[disabled] {
                        height: 2.6rem;
                        width: 2.6rem;
                    }
                /* search takeover */
                #search-icon,
                .submit-search,
                header#site-header #search-icon,
                header#site-header .submit-search {
                    background-size: 1.1rem;
                    height: 3rem;
                    width: 3rem;
                }
        
                .takeover.form-module {
                    width: 100%;
                }
        
                #search-takeover .results-container {
                    margin-left: 5%;
                    width: 86%;
                }
        
                #search-takeover .search {
                    padding-top: 1.8rem;
                }
        
                    #search-takeover .search span.close {
                        -moz-background-size: 1rem;
                        -ms-background-size: 1rem;
                        -o-background-size: 1rem;
                        -webkit-background-size: 1rem;
                        background-image: url("/Assets/images/icons/close-icon-dark-x2.png");
                        background-size: 1rem;
                    }
        
                #search-takeover .submit-search,
                header#site-header .submit-search {
                    background-image: none;
                    height: 3rem;
                    margin-top: 0.8rem;
                    width: 3rem;
                }
        
                    #search-takeover .submit-search > input.button {
                        height: 2.6rem;
                        width: 2.6rem;
                    }
        
                .takeover form.form-section .stylish-text > span {
                    padding: 0;
                }
        
                .takeover form.form-section .stylish-text > span,
                .takeover form.form-section .stylish-text > input {
                    font-size: 1.5rem;
                    height: 3rem;
                    line-height: 2rem;
                }
        
                .sticky #search-takeover .search {
                    width: 92%;
                }
                /* route planner takeover */
                #route-planner {
                    font-size: 1rem;
                    height: 3rem;
                    letter-spacing: .02em;
                    margin-right: 1.1rem;
                }
        
                #route-planner-takeover .route-planner .text {
                    font-size: 1.5rem;
                    line-height: 1.5rem;
                    max-width: 25%;
                    padding-top: 1.9rem;
                }
        
                #route-planner-takeover .route-planner .stylish-text {
                    margin-top: 1.8rem;
                    width: 38%;
                }
        
                #route-planner-takeover .route-planner .submit {
                    margin-top: 1.6rem;
                }
        
                .sticky .takeover > p,
                .sticky .takeover > .go-to {
                    padding-top: 1rem;
                }
        
                .sticky #route-planner-takeover .route-planner {
                    margin-right: 8%;
                }
        
                    .sticky #route-planner-takeover .route-planner .stylish-text {
                        width: 38%;
                    }
        
                    .sticky #route-planner-takeover .route-planner .text {
                        display: none;
                    }
        
                    .sticky #route-planner-takeover .route-planner .submit {
                        margin-top: 0.4rem;
                    }
        
                        .sticky #route-planner-takeover .route-planner .submit > input[type="submit"] {
                            padding: 0.7rem 1.8rem;
                        }
                /* aa route planner takeover */
                #aa-route-planner,
                #aa-route-planner-takeover input[type="submit"].set-location {
                    height: 3rem;
                }
        
                #aa-route-planner-takeover {
                    padding: 0 3rem;
                }
        
                    #aa-route-planner,
                    #aa-route-planner-takeover h2.large-text,
                    #aa-route-planner-takeover .traffic-info .my-location,
                    #aa-route-planner-takeover form.form-section .form-field label {
                        font-size: 1.2rem;
                        line-height: 1.8rem;
                    }
        
                    #aa-route-planner-takeover input[type="submit"] {
                        height: 3.8rem;
                        line-height: 1.2rem;
                        font-size: 1.2rem;
                    }
        
                    #aa-route-planner-takeover .aa-takeover-btn {
                        z-index: 1;
                        top: 2rem;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner,
                    #aa-route-planner-takeover .traffic-info {
                        padding: 2rem 0 2.7rem 0;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner {
                        padding-right: 4rem;
                    }
        
                    #aa-route-planner-takeover .traffic-info {
                        width: 26rem;
                        padding-left: 3.7rem;
                    }
        
                    #aa-route-planner-takeover h2.large-text {
                        font-size: 1.4rem;
                        margin-bottom: 0.75rem;
                        padding-right: 3rem;
                    }
        
                    #aa-route-planner-takeover .route-input .submit {
                        display: none;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner > .submit {
                        display: block;
                        width: 100%;
                        padding: 0;
                        text-align: right;
                    }
        
                        #aa-route-planner-takeover .aa-route-planner > .submit input[type="submit"] {
                            margin-right: 0;
                        }
        
                    #aa-route-planner-takeover .traffic-info .my-location {
                        padding-top: 1rem;
                    }
        
                        #aa-route-planner-takeover .traffic-info .my-location .my-location-icon {
                            width: 1.9rem;
                            height: 1.9rem;
                            margin-right: 0.75rem;
                        }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .from-arrow {
                        top: 3.4rem;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .to-arrow {
                        top: 4.7rem;
                    }
                /* sign in */
                .sign-in.button,
                .my-account .button {
                    margin-top: 1.7rem;
                }
                /* primary navigation */
                #primary-navigation ul > li {
                    font-size: 1.4rem;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels {
                        margin-left: 25%;
                        width: 75.1%;
                    }
        
                #primary-navigation .container > ul > li.primary-item > a {
                    font-size: 1.25rem;
                }
        
                #primary-navigation ul > li.account-link > a {
                    padding: 2.4rem 0 1.4rem 1.6rem;
                }
        
                #primary-navigation ul.second-level-navigation li.secondary-item {
                    line-height: 1.6rem;
                }
        
                #primary-navigation .container > ul > li.primary-item.has-children > a:first-child,
                #primary-navigation .container > ul > li.primary-item > .logged-user + a:first-child {
                    padding: 1.8rem 0 1.3rem 1.3rem;
                }
        
                #primary-navigation .container > ul > li.primary-item > a:first-child {
                    padding: 1.8rem 1.3rem 1.3rem;
                }
        
                #primary-navigation ul > li.has-children > .toggle,
                #primary-navigation ul > li.has-children.active > .toggle {
                    margin-top: 2rem;
                }
        
                .sticky #primary-navigation .container > ul > li.primary-item > a:first-child,
                .sticky #primary-navigation .container > ul > li.primary-item > .logged-user + a:first-child,
                .sticky #primary-navigation .container > ul > li.primary-item.has-children > a:first-child {
                    padding-bottom: 1.3rem;
                }
        
                .sticky #primary-navigation ul > li.has-children > .toggle,
                .sticky #primary-navigation ul > li.has-children.active > .toggle {
                    margin-top: 3rem;
                }
            }
        
            @@media only screen and (max-width: 880px) {
                /* global */
                header#site-header .four-column .col {
                    width: 25%;
                }
        
                    header#site-header .four-column .col:nth-child(2n+1) {
                        clear: none;
                    }
                /* header */
                header#site-header .page-title {
                    font-size: 1.3rem;
                    padding-bottom: 2rem;
                    padding-top: 2.2rem;
                    width: 70%;
                }
                /* cookie bar */
                #cookie-bar .accept {
                    -moz-background-size: 1rem 1rem;
                    -ms-background-size: 1rem 1rem;
                    -o-background-size: 1rem 1rem;
                    -webkit-background-size: 1rem 1rem;
                    background-image: url("/Assets/images/icons/close-icon-dark-x2.png");
                    background-size: 1rem 1rem;
                }
                /* logo */
                #logo {
                    left: 0;
                }
                /* header links */
                #header-links,
                .sticky #header-links,
                #cookie-bar > .wrapper .text {
                    padding-left: 12rem;
                }
        
                #primary-navigation .container > ul > li {
                    font-size: 1.2rem;
                }
        
                .sticky #header-links {
                    -webkit-box-shadow: 0 0 8px rgba(55, 71, 67, 0.2);
                    -webkit-transform: translate3d(0,0,0);
                    background: #ffffff;
                    box-shadow: 0 0 8px rgba(55, 71, 67, 0.2);
                    position: absolute;
                    right: 0;
                    top: 0;
                }
                /* needed for ios */
                /* helpful links */
                #helpful-links .left {
                    margin-top: 0.6rem;
                }
                /* search takeover */
                #top-level-nav #search-icon {
                    margin-top: 0.4rem;
                }
        
                .sticky #search-takeover .search span.close {
                    bottom: 20%;
                }
        
                .sticky #search-takeover .search .stylish-text {
                    margin-top: 1.4rem;
                }
        
                .sticky #search-takeover .submit-search {
                    margin-top: 2.1rem;
                }
                /* route planner takeover */
                .sticky #route-planner-takeover .route-planner .stylish-text {
                    margin-top: 1.4rem;
                }
        
                .sticky #route-planner-takeover .route-planner .submit {
                    margin-top: 2.1rem;
                }
                /* aa route planner takeover */
                #aa-route-planner-takeover {
                    margin: 0 1rem;
                    padding-left: 2rem;
                }
        
                    #aa-route-planner-takeover .traffic-report .report-details.report-not-available {
                        margin: 2.8rem 0;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .from-arrow {
                        top: 3rem;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .to-arrow {
                        top: 4.3rem;
                    }
                /* sign in button */
                .sign-in.button,
                .my-account .button {
                    -moz-border-radius: 0.6rem 0.6rem 0 0;
                    -webkit-border-radius: 0.6rem 0.6rem 0 0;
                    border-radius: 0.6rem 0.6rem 0 0;
                    font-size: 1.2rem;
                    letter-spacing: 0.01em;
                    line-height: 1.75rem;
                    margin-left: 0;
                    margin-top: 1rem;
                    padding: 1.6rem 2rem 1.5rem;
                    width: auto;
                }
                /* sign in overlay */
                #sign-in-panel {
                    -moz-background-size: 9.8rem auto;
                    -ms-background-size: 9.8rem auto;
                    -o-background-size: 9.8rem auto;
                    -webkit-background-size: 9.8rem auto;
                    background-image: url("/Assets/images/backgrounds/sign-in-beam-large.png");
                    background-position: -0.5rem 43%;
                    background-size: 9.8rem auto;
                    height: auto;
                    left: 0;
                    margin: 0 auto;
                    max-width: 90%;
                    right: 0;
                    top: 2.4rem;
                }
        
                    #sign-in-panel .wrapper {
                        padding: 1.6rem 3.4rem 1.6rem 6.9rem;
                    }
        
                    #sign-in-panel .rich-text ul.left {
                        margin-bottom: 1rem;
                    }
        
                    #sign-in-panel .rich-text .my-aa-cta {
                        padding-top: 1rem;
                    }
        
                    #sign-in-panel .two-column {
                        padding: 0;
                    }
        
                        #sign-in-panel .two-column .col,
                        #sign-in-panel .two-column .col + .col {
                            border: none;
                            float: none;
                            padding: 0;
                            width: 100%;
                        }
        
                            #sign-in-panel .two-column .col:first-child {
                                border: none;
                            }
        
                            #sign-in-panel .two-column .col .cta {
                                margin-bottom: 1.5rem;
                            }
        
                                #sign-in-panel .two-column .col .cta:after {
                                    background-color: #f1f1f1;
                                    clear: both;
                                    content: "";
                                    display: block;
                                    height: 0.2rem;
                                    margin-left: -5%;
                                    margin-top: 2rem;
                                    width: 105%;
                                }
        
                            #sign-in-panel .two-column .col + .col .cta:last-child {
                                margin-bottom: 0;
                            }
        
                                #sign-in-panel .two-column .col + .col .cta:last-child:after {
                                    display: none;
                                }
                /* my account mega menu */
                .my-account .account-nav.mega-menu {
                    padding: 2.4rem 2rem 1rem;
                }
        
                    .my-account .account-nav.mega-menu .col {
                        padding-left: 2.4%;
                    }
        
                        .my-account .account-nav.mega-menu .col:first-child {
                            padding-left: 0;
                        }
        
                        .my-account .account-nav.mega-menu .col + .col + .col {
                            padding-left: 4.7%;
                        }
        
                            .my-account .account-nav.mega-menu .col + .col + .col + .col {
                                padding-left: 7.1%;
                            }
        
                        .my-account .account-nav.mega-menu .col > h5 {
                            font-size: 1.3rem;
                            margin-bottom: 2rem;
                        }
        
                        .my-account .account-nav.mega-menu .col ul > li {
                            font-size: 1.3rem;
                            padding-bottom: 1.1em;
                            padding-top: 1.2rem;
                        }
        
                #primary-navigation ul li.primary-item > .toggle,
                #primary-navigation ul li.account-link > .toggle,
                #primary-navigation ul > li.account-link.active > .toggle {
                    margin-left: 0.8rem;
                }
        
                #primary-navigation ul > li:last-child {
                    margin-right: 0;
                }
        
                #primary-navigation ul.second-level-navigation li.secondary-item.active:after {
                    right: -2rem;
                    width: 2rem;
                }
        
                #primary-navigation ul.second-level-navigation > li.secondary-item a > .toggle {
                    right: -1.5rem;
                    width: 0.7rem;
                    height: 1rem;
                }
        
                #primary-navigation ul.second-level-navigation > li.secondary-item a {
                    padding: 0;
                }
        
                #primary-navigation ul.second-level-navigation li.secondary-item {
                    font-size: 1.4rem;
                    line-height: 2rem;
                    padding: 2rem 2.5rem 1.6rem 1.5rem;
                }
        
                .sticky #primary-navigation ul > li > .mega-menu {
                    margin-left: 1.1rem;
                    margin-right: 1.1rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels {
                    margin-left: 25%;
                    width: 75%;
                }
        
                #primary-navigation ul > li.account-link > a {
                    padding: 2.4rem 0 1.4rem 1.6rem;
                }
        
                #primary-navigation ul > li > .mega-menu .second-level-nav-overlay {
                    display: none;
                }
                /* my account settings */
                #primary-navigation ul > li > .mega-menu > .nav-panels.my-aa-account .sub-component .content-links a {
                    margin-bottom: 0.4rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels.my-aa-account .sub-component.account-settings a.logout {
                    margin-top: 0.1rem;
                }
                /* in-nav components */
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component {
                    padding: 2.6rem 2rem;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component:after {
                        bottom: 3rem;
                        margin-bottom: 0;
                        margin-top: 2rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .sub-headline {
                        margin-bottom: 2.2rem;
                        font-size: 1.4rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .links-group li {
                        font-size: 1.3rem;
                        line-height: 2rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .links-group a {
                        margin-bottom: 2.1rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content p {
                        font-size: 1.3rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .contact-number {
                        font-size: 1.6rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.contact .content .headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.contact .content .sub-headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .sub-headline {
                        margin-bottom: 1rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta ul li {
                        padding-left: 0;
                        font-size: 1.3rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta .button.cta,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .button.cta {
                        font-size: 1.1rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.contact .content {
                        margin-bottom: 1.5rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta .content {
                        margin-bottom: 0.9rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta ul li:before {
                        width: 1.2rem;
                        height: 1.2rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .introduction-text {
                        padding-bottom: 1rem;
                        font-size: 1.4rem;
                        line-height: 2.1rem;
                    }
        
                #primary-navigation form.form-section .stylish-text > input#vrn {
                    background-size: 2.6rem 3.6rem;
                }
        
                #primary-navigation form.form-section .form-field,
                #primary-navigation .wffm-form-module .form-group {
                    margin-bottom: 0.7rem;
                }
        
                    #primary-navigation .rich-text form .control-group label,
                    #primary-navigation form.form-section .form-field label,
                    #primary-navigation .wffm-form-module .form-group label,
                    #primary-navigation form.form-section .form-field span.large-label {
                        padding-bottom: 0;
                    }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content form.form-section .form-field:last-of-type {
                    margin-bottom: 2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .radio-field span {
                    font-size: 1.2rem;
                }
        
                #primary-navigation .rich-text form span,
                #primary-navigation .rich-text form input,
                #primary-navigation .rich-text form textarea,
                #primary-navigation form.form-section span,
                #primary-navigation form.form-section input,
                #primary-navigation form.form-section textarea {
                    font-size: 1.4rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content .info-block,
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content {
                    margin-bottom: 1.5rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content form.form-section .stylish-ds[data-type="radio"] {
                    margin-right: 0.5rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user ul li:first-child {
                    margin-top: 0.5rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content li a {
                    margin-bottom: 2.2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content li:last-child a {
                    margin-bottom: 1rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .button.cta {
                    font-size: 1.1rem;
                    min-width: 9rem;
                    padding: 0.6rem 2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content figure {
                    margin-bottom: 2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .feature-list {
                    padding-bottom: 0.8rem;
                    font-size: 1.4rem;
                    line-height: 2.1rem;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .feature-list ul > li,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper ul.app-features-list > li {
                        font-size: 1.3rem;
                        padding-bottom: 0.2rem;
                        padding-left: 1.8rem;
                    }
        
                        #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .feature-list ul > li:before,
                        #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper ul.app-features-list > li:before {
                            -moz-background-size: 1.2rem;
                            -ms-background-size: 1.2rem;
                            -o-background-size: 1.2rem;
                            -webkit-background-size: 1.2rem;
                            background-size: 1.2rem;
                            height: 1.2rem;
                            width: 1.2rem;
                        }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .dual-cta a.button {
                    margin-bottom: 0;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .dual-cta a.button + a.button {
                        margin-top: 2rem;
                    }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper .text {
                    max-width: 100%;
                    padding: 0;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper .headline {
                    margin-bottom: 0.3rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper a.button {
                    margin-bottom: 0.4rem;
                    margin-top: 0.8rem;
                    max-width: 10.15rem;
                }
                /* editorial panel */
                #primary-navigation ul > li .editorial-panel .inner {
                    font-size: 1.3rem;
                    letter-spacing: 0.01em;
                    padding: 2.4rem 2rem 2.2rem;
                }
        
                    #primary-navigation ul > li .editorial-panel .inner a {
                        -moz-background-size: auto 0.8rem;
                        -ms-background-size: auto 0.8rem;
                        -o-background-size: auto 0.8rem;
                        -webkit-background-size: auto 0.8rem;
                        background: url("/Assets/images/icons/arrow.png") no-repeat right center transparent;
                        background-size: auto 0.8rem;
                        padding-right: 1.2rem;
                    }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels.editorial {
                    padding-bottom: 5rem;
                }
            }
        </style>
        <!-- forms.css line 405-440 -->
        <style>
            .rich-text form .stylish-select,
            .rich-text form .stylish-tel > input,
            .rich-text form .stylish-text > input,
            .rich-text form .stylish-number > input,
            .rich-text form .stylish-email > input,
            .rich-text form .stylish-password > input,
            .rich-text form .stylish-textarea > textarea,
            form.form-section .stylish-select,
            form.form-section .stylish-tel > input,
            form.form-section .stylish-text > input,
            form.form-section .stylish-number > input,
            form.form-section .stylish-email > input,
            form.form-section .stylish-password > input,
            form.form-section .stylish-textarea > textarea,
            .wffm-form-module .form-group textarea {
                background-color: #ffffff;
                -moz-border-radius: 8px;
                -moz-border-radius: 0.8rem;
                -webkit-border-radius: 8px;
                -webkit-border-radius: 0.8rem;
                -moz-box-shadow: 0 0 2px 1px rgba(167, 169, 172, 0.2);
                -webkit-box-shadow: 0 0 2px 1px rgba(167, 169, 172, 0.2);
                border: 1px solid #cccccc;
                border-radius: 8px;
                border-radius: 0.8rem;
                box-shadow: 0 0 2px 1px rgba(167, 169, 172, 0.2);
                color: #414042;
                font-family: "NewTransport-Regular", Arial, Helvetica, Verdana, sans-serif;
                font-size: 14px;
                font-size: 1.4rem;
                height: 100%;
                line-height: 45px;
                line-height: 4.5rem;
                padding: 0 21px;
                padding: 0 2.1rem;
            }
        </style>
        <header id="site-header" class="cf stylish-form " data-stylish-form="true">
            <div class="wrapper cf">
                <figure id="logo" class="left">
                    <a href="/" title="The AA | Home">
                        <img src="/Assets/images/logo.png" alt="The AA" class="print-only" />
                    </a>
                </figure>
                <div id="header-links" class="right">
                    <div id="helpful-links" class="cf desktop-tablet-view">
                        <p class="left">
                            <a href="/business"> Business customers</a> | <a href="/help-support"> Personal customers</a>
                        </p>
                        <div class="right">
                            <button id="navicon" class="mobile-view left">Menu<span class="toggle"></span></button>
                            <button id="navicon-close" class="mobile-view left hidden">Close<span class="toggle"></span></button>
                            <button id="route-planner" class="button secondary ghost align-top">Route planner</button>
                            <button id="search-icon" class="button secondary ghost align-top takeover-btn"></button>
                        </div>
                    </div>
                    <div id="search-takeover" class="form-module takeover right cf" tabindex="-1">
                        <p class="close-takeover right" tabindex="0">Close</p>
                        <form class="search form-section cf" action="/search" method="GET">
                            <div class="left search-input" tabindex="-1">
                                <input type="text" name="q" placeholder="What are you looking for?" autocomplete="off" autofocus />
                                <span class="close" role="button" tabindex="0"></span>
                            </div>
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit-search right ra">
                                <input type="submit" class="button ra" disabled />
                            </div>
                        </form>
                    </div>
                    <div id="route-planner-takeover" class="form-module takeover right cf" tabindex="-1">
                        <div class="right go-to">
                            <p class="left">
                                <a href="/route-planner/index.jsp"> Go to the Route planner</a>
                            </p>
                            <p class="close-takeover right" tabindex="0">Close</p>
                        </div>
                        <form class="route-planner form-section cf" action="/route-planner/index.jsp" method="post">
                            <label for="fromPlace" class="large-text">Where are you going?</label>
                            <div class="stylish-text" data-type="text" tabindex="-1">
                                <span></span>
                                <input type="text" placeholder="from" name="fromPlace" id="fromPlace" autocomplete="off" tabindex="0">
                            </div>
                            @*<input type="text" placeholder="from" name="fromPlace" id="fromPlace" autocomplete="off" />*@
                            <div class="stylish-text" data-type="text" tabindex="-1">
                                <span></span>
                                <input type="text" placeholder="to" name="toPlace" autocomplete="off" tabindex="0">
                            </div>
                            @*<input type="text" placeholder="to" name="toPlace" autocomplete="off" />*@
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit right ra">
                                <input type="submit" class="button tertiary ghost-bordered ra" value="Get route" tabindex="0" />
                            </div>
                        </form>
                    </div>
                    <div id="top-level-menu" class="cf left">
                        <nav id="primary-navigation" typeof="SiteNavigationElement" class="desktop-nav">
                            <meta property="description" content="Mainsite Navigation">
                            <div class="container">
                                <ul>
                                    @foreach (Sitecore.Data.Items.Item menuItem in item.Children)
                                    {
                                        <!-- child -->
                                        @TopLevelMenuHelper(menuItem)
                                    }
                                    <li class="primary-item">
                                        <a href="/help-support/contact-us">Help</a>
                                    </li>
                                </ul>
                                <ul class="helpful-links mobile-view cf">
                                    <li><a href="/route-planner/index.jsp"> Go to the Route planner</a> <span class="toggle"></span></li>
                                    <li><a></a><a href="/business">Business customers</a> | <a></a><a href="/help-support"> Personal customers</a></li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                    <!-- TODO<button class="right button sign-in">Model.HeaderSettings.ExistingMembersButtonText</button> -->
                </div>
                <!--  TODO Html.Sitecore().Placeholder("ContentHubHeader") -->
            </div>
        </header>
        <!--  TODO Html.Sitecore().Rendering(ItemIds.Renderings.TheAA.Components.SignInPanel.ToString()) -->
        <div>
            <div class="menureplace-script"></div>
        </div>
        
    - ID: "c8f93afe-bfd4-4e8f-9c61-152559854661"
      Hint: __Valid from
      Value: 20200916T101427Z
    - ID: "d9cf14b1-fa16-4ba6-9288-e8a174d4d522"
      Hint: __Updated
      Value: 20230720T031618Z
  - Version: 4
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20200916T131545Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\paul_petersen
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "96b0e2c0-6fb3-4e5c-bfcf-60286a1a177f"
    - ID: "acce9b46-1f19-4d3d-a0ec-ed01d807bb7d"
      Hint: RazorView
      Value: |
        @using Sitecore.Mvc.Presentation
        @using Sitecore.Data;
        @using System.Web;
        @using TheAA.Foundation.Rendering;
        @model RenderingModel
        @{var item = Utility.HtmlPlus.Sitecore().DataSourceOrContextItem();}
        @helper TopLevelMenuHelper(Sitecore.Data.Items.Item megaMenuItem)
        {
            var RenderMenuItem = true;
            if (megaMenuItem == null)
            {
                <!-- megaMenuItem == null -->
                RenderMenuItem = false;
            }
        
            if (megaMenuItem.GetField("Contents").Contains("<!-- not a menu item -->"))
            {
                <!-- not a menu item -->
                RenderMenuItem = false;
            }
        
            if (RenderMenuItem)
            {
                var menuState = new MenuState(System.Web.HttpContext.Current, megaMenuItem);
                var megamenuItemName = megaMenuItem.Name.Replace(" ", "").ToLower();
        
                var menuparam = System.Web.HttpContext.Current.Request.QueryString.Get("menu");
                var menu = menuparam == null ? string.Empty : menuparam.ToLower();
                var MenuSecondLevel = string.Empty;
                var menuSplit = menu.Split('-');
        
                <li class="primary-item has-children @menuState.GetMenuActiveClass()">
                    <a href="?menu=@megamenuItemName" class="nojs">@megaMenuItem.Name</a>
                    <span class="toggle"></span>
                    <span class="mobile-toggle"></span>
                    @{
                        if (menuSplit.Length > 1)
                        {
                            MenuSecondLevel = menuSplit[1];
                        }
        
                        var contents = string.Empty;
                        if (megaMenuItem == null)
                        {
                            <!-- could not find megamenu item with the name:@menuState.MenuTopLevel -->
                        }
                        else
                        {
                            if (!string.IsNullOrEmpty(menuparam))
                            {
                                var ContentsField = megaMenuItem.GetField("Contents");
                                contents = ContentsField.RenderValue().ToString();
                                contents = contents.Replace(menu + "---", "");
                            }
                            else
                            {
                                <div class="menureplace-@megamenuItemName" />
                            }
                        }
                    }
                    @contents
                </li>
            }
        }
        
        
        <script>
            // wait for JQuery to download
            function defer(method) {
                if (window.jQuery) {
                    method();
                } else {
                    setTimeout(function () { defer(method) }, 50);
                }
            }
            defer(function () {
                console.log("jQuery is now loaded");
                MenuAfterJQueryLoaded();
            });
        
            var $header,
                $primaryNavigation,
                $aaRoutePlannerContainer,
                $aaRoutePlannerTakeover,
                $megaMenuContainer,
                $secondLevelNavigation,
                headerHeight,
                resizeTimer,
                navDelayTimer;
        
            function setupHeaderGlobals() {
                if (!$header) {
                    $header = $('#site-header, #sales-journey-header');
                    headerHeight = $header.outerHeight();
                }
                if (!$primaryNavigation) {
                    $primaryNavigation = $header.find('#primary-navigation');
                }
        
                if (window.aa && window.aa.helpers && window.aa.helpers.cache && window.aa.helpers.cache.cachedElements && window.aa.helpers.cache.cachedElements.$body) {
                    if (!$aaRoutePlannerContainer) {
                        $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container');
                    }
                    if (!$aaRoutePlannerTakeover) {
                        $aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover');
                    }
                }
                if (!$megaMenuContainer) {
                    $megaMenuContainer = $primaryNavigation.find('.mega-menu');
                }
            }
        
            function MenuAfterJQueryLoaded() {
        
                setupHeaderGlobals();
        
                /*
                 * ---------------------------------------- *
                 * Name: 	AA Helpers JavaScripts          *
                 * Type: 	JavaScript                      *
                 * Version: Not Versioned                   *
                 * Author:  Codehouse                       *
                 * ---------------------------------------- *
                 */
        
                /*
                 * site helper methods
                 */
        
                console.log("MenuAfterJQueryLoaded started");
                window.aa || (window.aa = {});
                window.aa.helpers = {
                    cache: {
                        cachedElements: (new function () {
                            this.$window = $(window);
                            this.$document = $(document);
                            this.$html = $('html');
                            this.$body = $('body');
                            this.$main = $('#main');
                            this.$footer = $('#site-footer');
                            this.isExperienceEditor = this.$body.hasClass('experience-editor');
                            this.url = window.location.pathname;
                        }()),
                        constants: {
                            TABLET_LANDSCAPE: 1024,
                            TABLET_BREAKPOINT: 880,
                            MOBILE_BREAKPOINT: 737
                        },
                        //registerCookie: new Cookie()
                    },
        
                    // truncate text with no option to reveal the rest or "read more/less"
                    truncateText: function (text, nr) {
                        var truncatedText = text.trim().substring(0, nr).split(' ').slice(0, -1).join(' ');
        
                        if (text.length > nr) {
                            return truncatedText;
                        } else {
                            return false;
                        }
                    }
                };
        
        
        
                $(document).ready(function () {
                    console.log('document ready')
                    $('.takeover, .aa-route-planner-container').each(headerTakeovers);
        
                    console.log('setup links to fire Ajax');
                    $('li.primary-item > a.nojs').each(function () {
                        console.log('change each link to use JS instead of href');
                        var link = $(this);
                        link.click(function () {
                            console.log('START link.click(function () {');
                            if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                                console.log('Link clicked so fire Ajax to retrieve menu');
                                $.ajax({
                                    //url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2FContent%2FHome%2Fbreakdown-cover%2Fadvice%2Fbasic-car-checks%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    url: '/sitecore/api/graph/items/master?sc_apikey=%7B430B0F14-DABA-496B-82D4-8CE90D9F2E90%7D&query=%7Bitem%28path%3A%22%2Fsitecore%2Fcontent%2FTheAA%2FGlobal%2FNavigation%2FHeader%2FMenu%22%29%7Bid%20path%20children%7B%20id%20name%20field%28name%3A%22Contents%22%29%7BContents%3Avalue%7D%7D%7D%7D',
                                    dataType: 'json', async: true,
                                    success: function (data) {
                                        console.log('ajax data success GRAPH QL')
                                        $.each(data.data.item.children, function () {
                                            console.log(this.id);
                                            var menuName = this.name.toLowerCase().split(' ').join('')
                                            $('.menureplace-' + menuName).replaceWith(this.field.Contents);
                                        });
                                        MenuLinksRemoveHref();
                                        SetupMenu();
        
                                        //megaMenuMobile();
                                        $('#primary-navigation').attr('menudownloadedbyajax', 'true');
                                        console.log('START link.click(); after ajax')
                                        link.click();
                                        console.log('END   link.click(); after ajax')
                                    },
                                    fail: function (jqXHR, textStatus, errorThrown) {
                                        console.log('ajax request failed: ' + textStatus)
                                        alert("ajax request failed: " + textStatus);
                                    }
                                });
                            } else {
                                console.log(link[0].outerHTML);
                                console.log('menudownloadedbyajax == true so dont run Ajax anymore');
                            }
                            console.log('END   link.click(function () {');
                        });
                        console.log('change href to javascipt void    ...' + link.attr('href'));
                        link.attr('href', 'javascript:void(0)');
                    });
                    console.log("now hide nojs and show js");
                    //megaMenuMobile();
        
                });
                function MenuLinksRemoveHref() {
                    console.log("START MenuLinksRemoveHref");
                    $("li.primary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        //            e.attr("href", "javascript:void(0)");
                        e.removeClass('nojs');
                        e.addClass('js');
                    });
        
                    // rework secondary menus - backup href, swap class and remove href to let the JS handle event
                    $("li.secondary-item > a.nojs").each(function (index) {
                        console.log("change link to not use href");
                        var e = $(this);
                        e.data("href", e.attr("href"));
                        e.removeClass('nojs');
                        e.addClass('js');
                        e.attr('href', 'javascript:void(0)');
                    });
                    /*     */
        
                    $('.js').show();
                    console.log("END MenuLinksRemoveHref");
                }
                // taken from Header.js
        
                /*
                 * ---------------------------------------- *
                 * Name:    Header JavaScripts              *
                 * Type: 	JavaScript                      *
                 * Version: Not Versioned                   *
                 * Author:	Thomas Dale | Codehouse         *
                 * ---------------------------------------- *
                 */
        
                //(function ($) {
        
        
        
        
        
        
        
                // taken from Header.js (function ($) {
                function SetupMenu() {
        
                    console.log('script downloaded and replaced is now running');
                    //$header = $('#site-header, #sales-journey-header');
                    $primaryNavigation = $header.find('#primary-navigation');
                    $aaRoutePlannerContainer = window.aa.helpers.cache.cachedElements.$body.find('.aa-route-planner-container');
                    //$aaRoutePlannerTakeover = window.aa.helpers.cache.cachedElements.$body.find('#aa-route-planner-takeover');
                    $megaMenuContainer = $primaryNavigation.find('.mega-menu');
                    $secondLevelNavigation;
                    //headerHeight = $header.outerHeight();
                    //resizeTimer;
                    //navDelayTimer;
        
        
                    // mega menu dropdown
                    function megaMenu() {
        
                        var $primaryNavigationItem = $(this),
                            $secondaryNavItem = $primaryNavigationItem.find('.secondary-item'),
                            $secondaryItemsOverlay = $primaryNavigation.find('.second-level-nav-overlay'),
                            $primaryNavigationItems = window.aa.helpers.cache.cachedElements.$body.find('.primary-item'),
                            $megaMenu = $primaryNavigationItem.find('.mega-menu'),
                            $navPanels = $primaryNavigationItem.find('.nav-panels'),
                            $subComponents = $navPanels.find('.sub-component'),
                            $myAccount = $header.find('#component-my-account');
        
                        $megaMenu.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width() });
        
                        if ($myAccount.length) {
                            $myAccount.closest('.primary-item').addClass('account-link');
                        }
        
                        function revealMegaMenu() {
        
                            var $secondaryItem = $megaMenu.find('.secondary-item'),
                                $secondaryNavPanels = $megaMenu.find('.nav-panels');
        
                            if ($primaryNavigationItem.hasClass('has-children') && !$primaryNavigationItem.hasClass('active')) {
        
                                if ($primaryNavigationItem.find('.my-aa-account').length) {
                                    $navPanels.addClass('open');
                                }
        
                                if ($primaryNavigationItem.hasClass('account-link')) {
                                    window.aa.helpers.cache.cachedElements.$body.addClass('account-details-active');
                                }
        
                                window.aa.helpers.cache.cachedElements.$body.addClass('nav-open');
                                $primaryNavigationItems.removeClass('active');
                                $primaryNavigationItem.addClass('active');
        
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                    $secondaryItem.removeClass('active');
                                    $secondaryItem.filter(':first').addClass('active');
                                    $secondaryNavPanels.removeClass('open');
                                    $secondaryNavPanels.filter(':first-of-type').addClass('open');
                                    if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                        $secondaryItemsOverlay.show();
                                    }
                                }
                            } else {
                                window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                                $primaryNavigationItems.removeClass('active');
                            }
                        }
        
                        function hideMegamenu() {
                            clearTimeout(navDelayTimer);
                            window.aa.helpers.cache.cachedElements.$body.removeClass('nav-open account-details-active');
                            $primaryNavigationItems.add($secondaryNavItem).removeClass('active');
                            $navPanels.removeClass('open');
                        }
        
                        function resetMegamenu() {
                            hideMegamenu();
                            $megaMenu.css({ height: 'auto' });
                        }
        
                        if ($megaMenu.length) {
                            $primaryNavigationItem.addClass('has-children');
                        }
        
                        $('.editorial-panel').each(function () {
                            $(this).closest('.nav-panels').addClass('editorial');
                        });
        
                        detectMobileNavigation();
        
                        $primaryNavigationItem.on({
                            click: function (e) {
        
                                var $target = $(this),
                                    isActive = $target.filter('.active');
        
                                if ($primaryNavigationItem.hasClass('active')) {
                                    if (!isActive.is(e.target) && isActive.has(e.target).length === 0) {
                                        resetMegamenu();
                                    }
        
                                    return true;
                                } else {
        
                                    if (!$target.hasClass('has-children') || $target.hasClass('menu-item-clicked')) {
                                        return true;
                                    }
                                    revealMegaMenu();
                                    $megaMenu.css({ height: $target.find('.second-level-navigation').height() });
                                }
        
                                $(this).siblings('.primary-item').find('.nav-panels').removeClass('open');
        
                                return false;
                            }
                        });
        
                        $secondaryNavItem.on('mouseover click', function (e) {
        
                            e.stopPropagation();
        
                            var $element = $(this),
                                targetId = $element.data('secondary'),
                                $subComponent = $('#' + targetId).find('.sub-component');
        
                            if ($('#' + targetId).hasClass('open') && window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                $subComponent.css({ minHeight: window.aa.helpers.getTallestHeightHelper($subComponent) });
                            }
        
                            if ($element.hasClass('active')) {
                                if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                    $secondaryItemsOverlay.show();
                                }
                                return true;
        
                            } else {
                                // momentary delay before revealing mega menu
                                $secondaryNavItem.removeClass('active');
                                $navPanels.removeClass('open');
                                $element.addClass('active');
                                $('#' + targetId).addClass('open');
                            }
                            return false;
                        });
        
                        // re-enable second level navigation events
                        $secondaryItemsOverlay.off('mouseover').on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                clearTimeout(navDelayTimer);
        
                                navDelayTimer = setTimeout(function () {
                                    $secondaryItemsOverlay.hide();
                                }, 250);
                            }
                        });
        
                        // disable second level navigation
                        $navPanels.on('mouseover', function () {
                            if (window.aa.helpers.cache.cachedElements.$window.width() > window.aa.helpers.cache.constants.TABLET_BREAKPOINT) {
                                $secondaryItemsOverlay.show();
                            }
                        });
        
                        // use nav item toggle icon to open/close mega menu
                        $megaMenu.siblings('.toggle').on('click', function (e) {
                            e.stopPropagation();
        
                            if ($(this).parent('li').hasClass('active')) {
                                hideMegamenu();
                                $primaryNavigationItems.find('.nav-panels').removeClass('open');
                            } else {
                                revealMegaMenu();
                            }
                        });
        
                        window.aa.helpers.cache.cachedElements.$document.on({
                            click: function (e) {
        
                                var $targetArea = $megaMenu.add($header);
        
                                if (!$targetArea.is(e.target) && $targetArea.has(e.target).length === 0) {
                                    hideMegamenu();
                                    $primaryNavigationItems.find('.nav-panels').removeClass('open');
                                }
        
                            }
                        });
                    }
        
        
                    $('#primary-navigation .container > ul').children('.primary-item').each(megaMenu);
        
                    //console.log('diagnos megaMenuMobile()');
                    //console.log($('#navicon').length);
                    //console.log($primaryNavigation.length);
                    //console.log(window.aa.helpers.cache.cachedElements.$window.width());
                    //console.log(window.aa.helpers.cache.constants.MOBILE_BREAKPOINT);
                    //console.log('END diagnos megaMenuMobile()');
        
                    //if ($('#navicon').length && $primaryNavigation.length && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    //    megaMenuMobile();
                    //}
                    setupResizeScroll();
                }
        
        
        
                setupResizeScroll();
            }
        
            // update route planner height on resize
            function updateRoutePlannerHeight() {
        
                if ($aaRoutePlannerTakeover.hasClass('active')) {
        
                    var routePlannerHeight = $aaRoutePlannerTakeover.css({ maxHeight: '100%' }).outerHeight();
        
                    $aaRoutePlannerTakeover.css({ maxHeight: routePlannerHeight });
                }
            }
        
            function hideNavigation() {
                $primaryNavigation.find('.active').removeClass('active');
                window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).removeClass('nav-open account-details-active');
                $('#navicon-close').addClass('hidden');
                $('#navicon').removeClass('hidden');
                $megaMenuContainer.parent('li').removeClass('active');
        
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    $primaryNavigation.stop().slideUp(250);
                }
        
            }
        
            // mobile mega menu dropdown
            function megaMenuMobile() {
        
                console.log('START megaMenuMobile()');
                var $header = $('#site-header, #sales-journey-header');
                var $primaryNavigation = $header.find('#primary-navigation');
        
                var $navicon = $('#navicon, #navicon-close'),
                    $primaryItem = $primaryNavigation.find('.primary-item'),
                    $secondaryItem = $primaryItem.find('.secondary-item'),
                    $secondaryLevelNavigation = $primaryItem.find('.second-level-navigation'),
                    $tertiaryLevelNavigation = $primaryItem.find('.nav-panels'),
                    $backToPrimary = $primaryItem.find('.back-to-primary-link'),
                    $backToSecondary = $primaryItem.find('.back-to-secondary-link'),
                    $goToSecondary = $primaryItem.find('.mobile-toggle');
        
                function navToggle() {
                    if ($primaryNavigation.hasClass('nav-open')) {
                        navOpen();
                    } else {
                        navClose();
                    }
                }
        
                function navOpen() {
                    if ($tertiaryLevelNavigation.hasClass('active')) {
                        $tertiaryLevelNavigation.stop().slideDown(250);
                    } else if ($secondaryLevelNavigation.hasClass('active')) {
                        $secondaryLevelNavigation.stop().slideDown(250);
                    }
                    $primaryNavigation.stop().slideDown(250);
                }
        
                function navClose() {
                    if ($tertiaryLevelNavigation.hasClass('active')) {
                        $tertiaryLevelNavigation.stop().slideUp(250, function () {
                            $primaryNavigation.stop().slideUp(250, function () {
                                $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                $(this).css({ left: '0' });
                            });
                        });
                    } else if ($secondaryLevelNavigation.hasClass('active')) {
                        $secondaryLevelNavigation.stop().slideUp(250, function () {
                            $primaryNavigation.stop().slideUp(250, function () {
                                $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                                $(this).css({ left: '0' });
                            });
                        });
                    } else {
                        $primaryNavigation.stop().slideUp(250, function () {
                            $primaryItem.add($secondaryItem).add($secondaryLevelNavigation).add($tertiaryLevelNavigation).removeClass('active');
                            $(this).css({ left: '0' });
                        });
                    }
        
                    window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
                }
        
                function slideMenuLevels($selector) {
                    $secondaryLevelNavigation.add($tertiaryLevelNavigation).removeClass('active');
        
                    if ($selector.hasClass('has-children') && $selector.hasClass('primary-item')) {
                        $primaryNavigation.stop().animate({ left: '-100vw' }, 250);
        
                        if ($selector.find('.my-aa-account').length) {
                            $selector.find('.nav-panels').addClass('open').show();
                            $primaryNavigation.stop().animate({ left: '-200vw' }, 250);
        
                        } else {
                            $secondaryLevelNavigation.addClass('active').show();
                            $selector.addClass('menu-item-clicked').siblings().addClass('hide-items');
                            $primaryNavigation.animate({ left: '-100vw' }, 250);
                        }
                    } else if ($selector.hasClass('back-to-primary-link')) {
        
                        $primaryNavigation.stop().animate({ left: '0' }, 250, function () {
        
                            window.aa.helpers.cache.cachedElements.$body.removeClass('account-details-active');
        
                            if ($selector.find('.my-aa-account').length) {
                                $selector.find('.nav-panels').removeClass('open').hide();
        
                            } else {
                                $secondaryLevelNavigation.removeClass('active').hide();
                            }
        
                        });
                    } else if ($selector.hasClass('secondary-item')) {
                        $primaryNavigation.animate({ left: '-200vw' }, 250, function () {
                            $secondaryLevelNavigation.removeClass('active').hide();
                        });
                        $tertiaryLevelNavigation.addClass('active').show();
                    } else if ($selector.hasClass('back-to-secondary-link')) {
                        $primaryNavigation.stop().animate({ left: '-100vw' }, 250, function () {
                            $tertiaryLevelNavigation.removeClass('open').hide();
                        });
                        $secondaryLevelNavigation.addClass('active').show();
                    }
                }
        
                $navicon.off('click');
                $navicon.on('click', function (e) {
                    e.stopImmediatePropagation();
                    $navicon.toggleClass('hidden');
                    window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).toggleClass('nav-open');
                    $primaryItem.removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                    navToggle();
                });
        
                $goToSecondary.off('click');
                $goToSecondary.on('click', function () {
                    $(this).parent().removeClass('menu-item-clicked').siblings().removeClass('hide-items');
                });
        
                $primaryItem.off('click')
                $primaryItem.on('click', function () {
                    console.log('START $primaryItem.on(click, function () {');
                    if ($('#primary-navigation').attr('menudownloadedbyajax') != 'true') {
                        slideMenuLevels($(this));
                    }
                    console.log('END   $primaryItem.on(click, function () {');
                });
        
                $backToPrimary.off('click');
                $backToPrimary.on('click', function (e) {
                    e.stopPropagation();
                    $primaryItem.removeClass('active menu-item-clicked').siblings().removeClass('hide-items');
                    slideMenuLevels($(this));
                });
        
                $secondaryItem.off('click');
                $secondaryItem.on('click', function () {
                    slideMenuLevels($(this));
                });
        
                $backToSecondary.off('click');
                $backToSecondary.on('click', function (e) {
                    e.stopPropagation();
                    $secondaryItem.removeClass('active');
                    slideMenuLevels($(this));
                });
        
                if (!window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon) {
                    window.aa.helpers.cache.cachedElements.$document.on({
                        click: function (e) {
        
                            if (!$header.is(e.target) && $header.has(e.target).length === 0 && window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                if ($primaryNavigation.is(':visible')) {
                                    $navicon.toggleClass('hidden');
                                    window.aa.helpers.cache.cachedElements.$body.add($primaryNavigation).removeClass('nav-open account-details-active');
                                    navToggle();
                                }
                            }
                        }
                    });
                }
                window.aa.helpers.cache.cachedElements.$document.onclicktogglenavicon = true;
                console.log('END   megaMenuMobile()');
            }
        
            // mobile navigation exists
            function detectMobileNavigation() {
        
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    $primaryNavigation.removeClass('desktop-nav').addClass('mobile-nav');
        
                } else {
                    $primaryNavigation.removeClass('mobile-nav').addClass('desktop-nav');
                    $primaryNavigation.find('.primary-item').removeClass('menu-item-clicked');
        
                }
            }
        
            // apply class to allow header to be fixed
            function stickyHeader() {
        
                // disable sticky header on mobile only
                if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                    return;
                }
        
                if (window.aa.helpers.cache.cachedElements.$window.scrollTop() >= headerHeight) {
                    $header.addClass('sticky');
                    $aaRoutePlannerTakeover.addClass('hidden');
                    window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: headerHeight });
        
                } else {
                    $header.removeClass('sticky');
                    $aaRoutePlannerTakeover.removeClass('hidden');
        
                    //if (client.Mobile) {
                    //    setTimeout(function () {
                    //        window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                    //    });
        
                    //} else {
                    window.aa.helpers.cache.cachedElements.$main.css({ paddingTop: 0 });
                    //}
                }
        
                $('.my-account').removeClass('active');
        
            }
        
            var $takeovers,
                $closeTakeover,
                $routePlannerTakeover,
                $closeAaTakeover,
                $searchTakeover,
                $bothTakeovers,
                $headerLinks,
                transitionTimer,
                routePlannerHeight,
                activePlace = -1;
            var headerTakeoverEventHandlersSetup = false;
        
            // header takeover forms
            function headerTakeovers() {
        
                $takeovers = $(this);
                $closeTakeover = $takeovers.find('.close-takeover');
                $routePlannerTakeover = $takeovers.filter('#route-planner-takeover');
                $closeAaTakeover = $aaRoutePlannerTakeover.find('.aa-takeover-btn');
                $searchTakeover = $takeovers.filter('#search-takeover');
                $bothTakeovers = $searchTakeover.add($routePlannerTakeover);
                $headerLinks = $('#helpful-links').add('#top-level-nav');
                transitionTimer;
                routePlannerHeight;
                activePlace = -1;
        
                // route planner toggle
                function toggleRoutePlanner() {
        
                    var $firstInput = $routePlannerTakeover.find('input').filter(':first');
        
                    //if (client.oldIE || client.IE9) {
                    //    $headerLinks.stop().fadeOut(250);
                    //    $routePlannerTakeover.stop().fadeIn(500);
                    //    $firstInput.focus();
                    //    return;
                    //}
        
                    $headerLinks.addClass('animated blur-out');
                    $routePlannerTakeover.stop().toggleClass('animated zoom-in');
                    $firstInput.focus();
                    hideNavigation();
                }
        
                // aa route planner animating
                function routePlannerAnimating() {
        
                    window.aa.helpers.cache.cachedElements.$body.removeClass('transition-off').addClass('transition-on');
        
                    clearTimeout(transitionTimer);
        
                    transitionTimer = setTimeout(function () {
                        window.aa.helpers.cache.cachedElements.$body.removeClass('transition-on').addClass('transition-off');
                    }, 550);
                }
        
                // aa route planner toggle
                function toggleAaRoutePlanner() {
        
                    var $firstInput = $aaRoutePlannerTakeover.find('input').filter(':first');
        
                    if ($aaRoutePlannerTakeover.hasClass('active')) {
                        routePlannerHeight = $aaRoutePlannerTakeover.css({ maxHeight: '' }).outerHeight();
        
                        $aaRoutePlannerTakeover.add($aaRoutePlannerContainer).css({ overflow: 'hidden' });
                        routePlannerAnimating();
                        $aaRoutePlannerTakeover.css({ maxHeight: routePlannerHeight }).stop().animate({ maxHeight: 0 }, 550, function () {
                            $aaRoutePlannerTakeover.add($aaRoutePlannerTakeover.parent()).removeClass('active');
                        });
        
                    } else {
        
                        window.aa.helpers.cache.cachedElements.$window.scrollTop(0);
                        $aaRoutePlannerTakeover.add($aaRoutePlannerTakeover.parent()).addClass('active');
        
                        if (!routePlannerHeight) {
                            routePlannerHeight = $aaRoutePlannerTakeover.outerHeight();
                        }
        
                        hideNavigation();
                        routePlannerAnimating();
                        $aaRoutePlannerTakeover.stop().animate({ maxHeight: routePlannerHeight }, 550, function () {
                            $firstInput.focus();
                            $aaRoutePlannerTakeover.add($aaRoutePlannerContainer).css({ overflow: 'visible' });
                        });
                    }
                }
        
                // navigate through suggested places list
                function navigateSuggestedPlaces(placeIndex) {
        
                    var $places = window.aa.helpers.cache.cachedElements.$body.find('.location-suggestions .place');
        
                    activePlace += placeIndex;
        
                    if (activePlace >= $places.length) {
                        activePlace = 0;
        
                    } else if (activePlace < 0) {
                        activePlace = $places.length;
                    }
        
                    window.aa.helpers.cache.cachedElements.$body.addClass('no-overflow');
                    window.aa.helpers.cache.cachedElements.$body.find('#chosen-location').blur();
                    $places.removeClass('place-active').eq(activePlace).addClass('place-active');
                }
        
                // hide location suggestions
                function hideLocationSuggestions() {
                    window.aa.helpers.cache.cachedElements.$body.removeClass('no-overflow');
                    window.aa.helpers.cache.cachedElements.$main.find('.chosen-location').removeClass('active-search');
                    window.aa.helpers.cache.cachedElements.$main.find('.location-suggestions').hide().empty();
                }
        
                // traffic news events
                function initTrafficNews() {
        
                    var $trafficInfoContainer = $(this),
                        $locationInputContainer = $trafficInfoContainer.find('.chosen-location'),
                        $locationInput = $locationInputContainer.find('#chosen-location'),
                        $locationSuggestionsList = $trafficInfoContainer.find('.location-suggestions'),
                        $trafficReport = $trafficInfoContainer.find('.traffic-report'),
                        $trafficNews = $trafficInfoContainer.find('.traffic-news'),
                        $setLocation = $trafficInfoContainer.find('.set-location'),
                        $setLat = $trafficInfoContainer.find('.set-lat'),
                        $setLong = $trafficInfoContainer.find('.set-long'),
                        defaultLocation = $locationInputContainer.data('default-location'),
                        defaultLat = $locationInputContainer.data('default-lat'),
                        defaultLong = $locationInputContainer.data('default-long'),
                        suggestionsViewTemplate = $locationSuggestionsList.html(),
                        trafficReportViewTemplate = $trafficReport.html(),
                        loadSuggestionsTimer;
        
                    // set location preferences
                    function populateFields(lat, long, location) {
                        $setLat.val(lat);
                        $setLong.val(long);
        
                        if (window.aa.salesJourneyApp.helpers.isDefined(location)) {
                            $locationInput.val(location);
                            $locationInput.data('chosen-location', location);
                        }
                    }
        
                    // get my location using geolocation api
                    function getLocation() {
                        if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition(setPosition, showError);
                        } else {
                            populateFields(defaultLat, defaultLong, defaultLocation);
                        }
                    }
        
                    // set my location using geolocation api
                    function setPosition(position) {
        
                        var lat = position.coords.latitude,
                            long = position.coords.longitude;
        
                        $.ajax({
                            method: 'GET',
                            url: 'https://maps.googleapis.com/maps/api/geocode/json',
                            data: { latlng: lat + ',' + long }
                        }).done(function (response) {
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response.results)) {
                                populateFields(lat, long, response.results[0].address_components[2].long_name);
        
                            } else {
                                populateFields(defaultLat, defaultLong, defaultLocation);
                            }
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
                    }
        
                    // geolocation error handling
                    function showError(error) {
                        switch (error.code) {
                            case error.PERMISSION_DENIED:
                                $('[data-location-off]').show();
                                updateRoutePlannerHeight();
                                break;
                            case error.POSITION_UNAVAILABLE:
                            case error.TIMEOUT:
                            case error.UNKNOWN_ERROR:
                                populateFields(defaultLat, defaultLong, defaultLocation);
                                break;
                        }
                    }
        
                    // load location suggestions
                    function loadSuggestedLocations($input, location) {
        
                        var $inputLoader = $trafficInfoContainer.find('.input-loader');
        
                        $inputLoader.stop().fadeIn(250);
                        $input.blur();
        
                        $.ajax({
                            method: 'GET',
                            url: '/cms/ajax/api/RoutePlannerTrafficNews/GetSuggestedAddresses',
                            data: { searchText: location }
                        }).done(function (response) {
        
                            $inputLoader.stop().fadeOut(250);
                            hideLocationSuggestions();
                            activePlace = -1;
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response.Result)) {
        
                                for (var i = 0; i < response.Result.length; i += 1) {
        
                                    $locationSuggestionsList.append(Mustache.render(suggestionsViewTemplate, response.Result[i])).show();
                                    $locationInputContainer.addClass('active-search');
                                }
        
                                $input.removeClass('typing').focus();
                            } else {
                                populateFields(defaultLat, defaultLong, defaultLocation);
                            }
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
                    }
        
                    // get location coordinates
                    function getLocationCoordinates(callback) {
        
                        $setLocation.prop('disabled', true).addClass('disabled');
        
                        $.ajax({
                            method: 'GET',
                            url: '/cms/ajax/api/RoutePlannerTrafficNews/GetPlace',
                            data: { address: $locationInput.data('chosen-location') }
                        }).done(function (response) {
        
                            $setLocation.prop('disabled', false).removeClass('disabled');
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response.Result)) {
                                populateFields(response.Result.Latitude, response.Result.Longitude);
        
                            } else {
                                populateFields(defaultLat, defaultLong, defaultLocation);
                            }
        
                            if (typeof callback === 'function') {
                                callback();
                            }
        
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
        
                    }
        
                    // set am/pm time
                    function hourAmPm(date) {
        
                        var setDate = new Date(date),
                            hours = setDate.getHours(),
                            ampm = (hours >= 12) ? 'PM' : 'AM',
                            minutes = (setDate.getMinutes() < 10) ? '0' + setDate.getMinutes() : setDate.getMinutes();
        
                        return hours + ':' + minutes + ampm;
                    }
        
                    // format incident occurrence time
                    function formatIncidentDate(incidentDate) {
        
                        var monthNames = ['Jan', 'Febr', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'],
                            date = new Date(incidentDate),
                            day = date.getDate(),
                            year = date.getFullYear(),
                            month = monthNames[date.getMonth()];
        
                        return (day + ' ' + month + ' ' + year + ', ' + hourAmPm(incidentDate));
                    }
        
                    // get news traffic data
                    function getTrafficNews() {
        
                        var $sectionLoader = $trafficInfoContainer.find('.section-loader');
        
                        $setLocation.prop('disabled', true).addClass('disabled');
                        $sectionLoader.stop().fadeIn(250);
        
                        if (!$aaRoutePlannerTakeover.is('.active')) {
                            window.aa.salesJourneyApp.cache.$main.find('#aa-route-planner').prop('disabled', true);
                        }
        
                        $.ajax({
                            method: 'GET',
                            url: '/cms/ajax/api/RoutePlannerTrafficNews/GetIncidentsInRadius',
                            data: { coordinates: $setLat.val() + '|' + $setLong.val() }
                        }).done(function (response) {
        
                            var $incidentTime,
                                $incidentDescription,
                                view = Mustache.render(trafficReportViewTemplate, response);
        
                            $setLocation.prop('disabled', false).removeClass('disabled');
                            $sectionLoader.hide();
        
                            if (window.aa.salesJourneyApp.helpers.isDefined(response)) {
        
                                $trafficReport.hide().empty();
                                $trafficNews.hide();
                                $trafficReport.append(view).show();
        
                                // cache dynamic generated selectors
                                $incidentTime = $trafficReport.find('.incident-time');
                                $incidentDescription = $trafficReport.find('.incident-description');
        
                                if (window.aa.salesJourneyApp.helpers.isDefined(response.Description) && window.aa.salesJourneyApp.helpers.isDefined(response.IncidentSeverity)) {
        
                                    $incidentDescription.empty().html(response.Description.split(': ')[1]);
                                    $incidentTime.html(formatIncidentDate(response.StartDate) + ' (' + $incidentTime.data('label') + ')');
        
                                } else {
                                    $trafficReport.find('.incident-title').remove();
        
                                    if (response.StartDate !== $trafficInfoContainer.data('time-undefined') || window.aa.salesJourneyApp.helpers.isDefined(response.UpdatedDateTime)) {
                                        $incidentTime.html($trafficReport.find('.report-details').data('last-update').replace('{time}', formatIncidentDate(response.UpdatedDateTime)));
                                    }
        
                                    $trafficReport.find('.road-icon').remove();
                                    $trafficReport.find('.report-details').addClass('report-not-available');
                                    $incidentDescription.html($incidentDescription.data('no-incidents'));
                                }
        
                                $trafficReport.find('.current-location p').html($locationInput.data('chosen-location').split(',', 1));
                                updateRoutePlannerHeight();
        
                            } else {
                                window.aa.salesJourneyApp.helpers.serviceErrorModal();
                            }
        
                            window.aa.salesJourneyApp.cache.$main.find('#aa-route-planner').prop('disabled', false);
        
                        }).fail(window.aa.salesJourneyApp.helpers.serviceErrorModal);
                    }
        
                    // on load set traffic news for London by default
                    populateFields(defaultLat, defaultLong, defaultLocation);
                    getTrafficNews();
        
                    // show location suggestions on keyup
                    $locationInput.off('keyup').on('keyup', function (e) {
        
                        var $target = $(this),
                            targetValue = $target.val();
        
                        if (e.which === 40 && $locationSuggestionsList.find('.place').length) {
                            navigateSuggestedPlaces(0);
                            return;
                        }
        
                        clearTimeout(loadSuggestionsTimer);
        
                        if ($target.hasClass('typing') && targetValue.length >= 3 && e.which !== 27) {
                            loadSuggestionsTimer = setTimeout(function () {
                                loadSuggestedLocations($target, targetValue);
                            }, 350);
        
                        } else {
                            hideLocationSuggestions();
                            $target.data('chosen-location', '');
                        }
                    });
        
                    // set chosen location
                    $locationSuggestionsList.off('click').on('click', '.place', function () {
        
                        var location = $(this).data('location-to-send');
        
                        $locationInput.data('chosen-location', location);
                        $locationInput.val(location.split(',', 1));
                        hideLocationSuggestions();
                    });
        
                    // edit location and reset traffic info
                    $trafficReport.off('click').on('click', '.edit-location', function (e) {
                        e.preventDefault();
                        $trafficReport.hide().empty();
                        $trafficNews.show();
                        $locationInput.focus();
                        updateRoutePlannerHeight();
                    });
        
                    // switch route inputed values
                    $aaRoutePlannerContainer.find('.field-separator').off('click').on('click', function () {
        
                        var $from = $aaRoutePlannerContainer.find('#fromPlace-1'),
                            $to = $aaRoutePlannerContainer.find('#toPlace-1'),
                            fromValue = $from.val(),
                            toValue = $to.val();
        
                        $from.val(toValue);
                        $to.val(fromValue);
                    });
        
                    // hide and clear location suggestions list when not in focus
                    window.aa.helpers.cache.cachedElements.$document.on('mouseup touchend', function (e) {
                        if (!$locationSuggestionsList.is(e.target) && $locationSuggestionsList.has(e.target).length === 0) {
                            hideLocationSuggestions();
                        }
                    });
        
                    // set current location
                    $trafficInfoContainer.find('.my-location').off('click').on('click', function (e) {
                        e.preventDefault();
                        getLocation();
                    });
        
                    // send location coordinates to server
                    $setLocation.off('click').on('click', function (e) {
        
                        e.preventDefault();
        
                        // trigger validation on the form
                        formValidation.api[$trafficInfoContainer.data('id')].validateForm();
        
                        if ($trafficInfoContainer.hasClass('errors')) {
                            updateRoutePlannerHeight();
                            $trafficInfoContainer.find('.error').eq(0).find('input:first').focus();
                            return;
                        }
        
                        // set default location if chosen location is empty
                        if ($locationInput.data('chosen-location') === '') {
                            populateFields(defaultLat, defaultLong, defaultLocation);
                            getTrafficNews();
                            return;
                        }
        
                        getLocationCoordinates(getTrafficNews);
                    });
                }
        
                // search takeover toggle
                function toggleSearchTakeover() {
        
                    var $searchInput = $searchTakeover.find('input').first();
        
                    hideNavigation();
        
                    //if (client.oldIE || client.IE9) {
                    //    $headerLinks.stop().fadeOut(250);
                    //    $searchTakeover.stop().fadeIn(500);
                    //    $searchInput.focus();
                    //    return;
                    //}
        
                    $searchInput.focus();
                    $searchTakeover.stop().toggleClass('animated zoom-in');
        
                    // slide down on mobile
                    if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                        // hide navicon close text when search icon is clicked
                        if ($primaryNavigation.is(':visible')) {
                            $('#navicon-close').addClass('hidden');
                            $('#navicon').removeClass('hidden');
                        }
        
                        window.aa.helpers.cache.cachedElements.$html.removeClass('no-overflow');
        
                        hideNavigation();
        
                        return;
                    }
        
                    // fade and zoom in
                    $headerLinks.addClass('animated blur-out');
                }
        
                // close takeovers
                function closeTakeovers() {
                    //if (client.oldIE || client.IE9) {
                    //    $bothTakeovers.stop().fadeOut(250);
                    //    $headerLinks.stop().fadeIn(500);
                    //    return;
                    //}
        
                    if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                        if ($searchTakeover.hasClass('zoom-in')) {
                            $bothTakeovers.removeClass('zoom-in').addClass('zoom-out');
                        }
        
                        if ($bothTakeovers.hasClass('zoom-out')) {
                            setTimeout(function () {
                                $bothTakeovers.removeClass('animated zoom-out');
                            }, 250);
                        }
        
                        return;
                    }
        
                    // fade and zoom out
                    $bothTakeovers.removeClass('zoom-in').addClass('zoom-out');
        
                    if ($bothTakeovers.hasClass('zoom-out')) {
                        setTimeout(function () {
                            $headerLinks.removeClass('blur-out').addClass('blur-in');
                            $bothTakeovers.removeClass('animated zoom-out');
                        }, 250);
                    }
                }
        
                if (headerTakeoverEventHandlersSetup == false) {
        
                    $('#search-icon').on({
                        click: toggleSearchTakeover
                    });
        
                    // route planner takeover
                    $('#route-planner').on({
                        click: toggleRoutePlanner
                    });
        
                    // aa route planner takeover
                    $('#aa-route-planner').off('click').on({
                        click: toggleAaRoutePlanner
                    });
        
                    // init traffic news
                    $('.traffic-info').each(initTrafficNews);
        
                    // prevent symbols from being entered into search input
                    $('#search-takeover').find('input[type="text"]').on('keypress', function () {
                        return /^[a-zA-Z0-9- ]*$/.test($(this).val());
                    });
        
                    // close takeovers
                    $closeTakeover.on({
                        click: closeTakeovers,
                        keypress: function (e) {
                            if (e.which === 13 || e.keyCode === 13) {
                                closeTakeovers();
                            }
                        }
                    });
        
                    // close aa route planner
                    $closeAaTakeover.on({
                        click: toggleAaRoutePlanner,
                        keypress: function (e) {
                            if (e.which === 13 || e.keyCode === 13) {
                                toggleAaRoutePlanner();
                            }
                        }
                    });
        
                    // close active takeover if esc key is pressed
                    window.aa.helpers.cache.cachedElements.$document.on('keyup keypress', function (e) {
        
                        if (e.which === 27) {
        
                            if ($bothTakeovers.hasClass('zoom-in')) {
                                closeTakeovers();
                            }
        
                            if ($aaRoutePlannerTakeover.hasClass('active')) {
                                toggleAaRoutePlanner();
                            }
        
                            hideLocationSuggestions();
                        }
        
                        if (window.aa.helpers.cache.cachedElements.$body.find('.location-suggestions').children().length) {
        
                            e.preventDefault();
        
                            switch (e.which) {
                                case 13:
                                case 32:
                                    window.aa.helpers.cache.cachedElements.$body.find('.location-suggestions').find('.place-active').trigger('click');
                                    break;
                                case 40:
                                case 9:
                                    navigateSuggestedPlaces(1);
                                    break;
                                case 38:
                                    navigateSuggestedPlaces(-1);
                                    break;
                            }
                        }
                    });
        
                    // remove route planner on window resize
                    window.aa.helpers.cache.cachedElements.$window.on('resize', function () {
                        if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                            $routePlannerTakeover.addClass('hidden');
        
                            if ($aaRoutePlannerTakeover.hasClass('active')) {
                                toggleAaRoutePlanner();
                            }
                        }
                    });
                    headerTakeoverEventHandlersSetup = true;
                }
            }
        
            function setupResizeScroll() {
                setupHeaderGlobals();
                window.aa.helpers.cache.cachedElements.$window.on({
                    resize: function () {
        
                        clearTimeout(resizeTimer);
                        resizeTimer = setTimeout(function () {
        
                            $secondLevelNavigation = $primaryNavigation.find('.primary-item.active .second-level-navigation');
        
                            if ($primaryNavigation.length) {
                                detectMobileNavigation();
                            }
        
                            if (window.aa.helpers.cache.cachedElements.$window.width() <= window.aa.helpers.cache.constants.MOBILE_BREAKPOINT) {
                                megaMenuMobile();
                            }
        
                            updateRoutePlannerHeight();
        
                            $megaMenuContainer.css({ maxWidth: window.aa.helpers.cache.cachedElements.$window.width(), height: $secondLevelNavigation.height() });
                        }, 100); // call on resize end
                    },
                    scroll: function () {
                        console.log("scroll");
                        if ($header.length) {
        
                            stickyHeader();
                            if (($('#sales-journey-header').hasClass("sticky")) && ($("#contact-cta").hasClass('dsf-view-none'))) {
                                $('#CancelSalesLabel').css('margin-right', '13rem');
                                $("#BackToDashboard").css({ "margin-right": "13rem", "margin-left": "-30px" });
                            }
                            else {
                                $('#CancelSalesLabel').css('margin-right', '2.5rem');
                                $("#BackToDashboard").css({ 'margin-right': '2.5rem', 'margin-left': '0px' });
                            }
        
                        } else {
                            console.log("NO sticy header since $header.length false");
                        }
        
                    }
                });
            }
        
        </script>
        <style type="text/css">
            .nojs {
            }
        
            .js {
                display: none;
            }
        
            .experience-editor-display {
                display: none
            }
        
            /*#logo {
                width: 438px;
                height: 212px;
        
            }*/
            #logo > svg {
                width: 100%;
                height: 100%;
            }
        
            #logo {
                height: 187px;
                height: 18.7rem;
                left: 0;
                position: absolute;
                top: 0;
                transform: translate3d(0,0,0);
                background: url("/Assets/images/logo-aa-desktop.png") no-repeat right top transparent;
                width: 328px;
                width: 32.8rem;
                z-index: 2;
            }
        
        
                #logo > a {
                    height: 45px;
                    height: 4.5rem;
                    width: 55px;
                    width: 5.5rem;
                    left: auto;
                    top: 75px;
                    top: 7.5rem;
                    right: 65px;
                    right: 6.5rem;
                    position: absolute;
                }
        
                    #logo > a:focus {
                        border: 1px dotted #000;
                    }
        
            @@media screen and (max-width: 1366px) {
                #logo {
                    height: 17rem;
                    left: -2rem;
                    top: 0;
                    width: 25.5rem
                }
            }
        
            @@media screen and (max-width: 1060px) {
        
                #logo {
                    -moz-background-size: 10.1rem auto;
                    -ms-background-size: 10.1rem auto;
                    -o-background-size: 10.1rem auto;
                    -webkit-background-size: 10.1rem auto;
                    background-image: url("/Assets/images/logo-aa-tablet.png");
                    background-size: 10.1rem auto;
                    height: 11rem;
                    left: 0;
                    margin-top: 0;
                    top: 0;
                    width: 10.1rem
                }
            }
        
            @@media only screen and (max-width: 737px) {
        
                #logo {
                    background-size: 8.9rem auto;
                    height: 5rem;
                    left: 0;
                    margin-top: 0;
                    width: 8.9rem;
                    z-index: 4;
                }
        
                    #logo > a {
                        left: 11px;
                        left: 1.1rem;
                        top: 5px;
                        top: .5rem;
                        width: 35px;
                        width: 3.5rem;
                        height: 28px;
                        height: 2.8rem
                    }
        
                header#site-header.stripped #logo {
                    margin-top: 0;
                }
            }
        </style>
        <style type="text/css">
            @@media screen and (min-width: 1366px) {
                #largestViewbox {
                    display: inline;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 1366px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: inline;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
        
            @@media screen and (max-width: 1160px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: inline;
                }
        
                #mobileViewboxZoom {
                    display: none;
                }
            }
        
            @@media screen and (max-width: 737px) {
                #largestViewbox {
                    display: none;
                }
        
                #middleViewboxZoom {
                    display: none;
                }
        
                #smallViewboxZoom {
                    display: none;
                }
        
                #mobileViewboxZoom {
                    display: inline;
                }
            }
        </style>
        <!-- header.css line 236-335 -->
        <style>
            /* takeovers */
            .takeover {
                -moz-animation-duration: 0.5s;
                -webkit-animation-duration: 0.5s;
                -o-animation-duration: 0.5s;
                animation-duration: 0.5s;
                background-color: #ffffff;
                border: none;
                display: none;
                height: 100%;
                max-width: none;
                margin-bottom: 0;
                margin-right: 0;
                margin-top: 0;
                outline: none;
                padding-right: 285px;
                padding-right: 28.5rem;
                padding-left: 27.5%;
                position: absolute;
                opacity: 1;
                right: 0;
                top: 0;
                width: 100%;
                z-index: 1;
            }
        
                .takeover.animated {
                    display: block;
                }
        
                .takeover.hidden {
                    display: none;
                }
        
                .takeover > p,
                .takeover > .go-to {
                    margin-bottom: 0;
                    padding-bottom: 5px;
                    padding-bottom: 0.5rem;
                    padding-top: 14px;
                    padding-top: 1.4rem;
                }
        
                .takeover .close-takeover {
                    cursor: pointer;
                    font-family: "NewTransport-Bold", Arial, Helvetica, Verdana, sans-serif;
                    margin-bottom: 0;
                    margin-top: 0;
                    margin-right: 0;
                    font-weight: 400;
                }
        
                    .takeover .close-takeover:hover {
                        -moz-transform: scale(1.05);
                        -ms-transform: scale(1.05);
                        -o-transform: scale(1.05);
                        -webkit-transform: scale(1.05);
                        text-decoration: underline;
                        transform: scale(1.05);
                    }
        
                    .takeover .close-takeover:active {
                        -moz-transform: scale(1);
                        -ms-transform: scale(1);
                        -o-transform: scale(1);
                        -webkit-transform: scale(1);
                        transform: scale(1);
                    }
        
                    .takeover .close-takeover:focus {
                        outline: none;
                        text-decoration: underline;
                    }
        
                .takeover .placeholder-wrapper > div,
                .takeover .placeholder-wrapper input,
                .takeover .placeholder-wrapper textarea {
                    float: none;
                    margin: 0;
                    width: 100%;
                }
        
                .takeover .placeholder-wrapper .placeholder {
                    font-size: 17px;
                    font-size: 1.7rem;
                    left: 11px;
                    left: 1.1rem;
                }
        
            header#site-header .takeover form .stylish-text > span {
                -moz-border-radius: 0;
                -webkit-border-radius: 0;
                border-radius: 0;
                border: none;
                border-bottom: 1px solid #c7c8ca;
                height: 38px;
                height: 3.8rem;
            }
        
            header#site-header .takeover form .stylish-text > input {
                -moz-border-radius: 0;
                -webkit-border-radius: 0;
                border-radius: 0;
                -moz-box-shadow: none;
                -webkit-box-shadow: none;
                background: transparent;
                border: none;
                box-shadow: none;
                color: #21252d;
                font-size: 17px;
                font-size: 1.7rem;
                line-height: 38px;
                line-height: 3.8rem;
                max-width: 100%;
                padding: 0 11px;
                padding: 0 1.1rem;
            }
        
            header#site-header .takeover form .stylish-text > span,
            .sticky .takeover .placeholder-wrapper .placeholder {
                font-size: 15px;
                font-size: 1.5rem;
            }
        
            .safari .stylish-form .takeover form .stylish-text > input {
                line-height: 1.6rem;
            }
        
            /* search takeover */
            #search-takeover .search {
                margin: 0;
                padding: 40px 0 0;
                padding: 4rem 0 0;
                position: relative;
            }
        
            #search-takeover .search-input {
                max-width: 872px;
                max-width: 87.2rem;
                position: relative;
                width: 94%;
            }
        
            #search-takeover .search .stylish-text {
                max-width: 100%;
                width: 100%;
            }
        
            #search-takeover .search span.close {
                background: url("/Assets/images/icons/close-icon-dark.png") no-repeat 0 0 transparent;
                bottom: 26%;
                cursor: pointer;
                display: none;
                height: 14px;
                height: 1.4rem;
                margin-top: 0;
                position: absolute;
                right: 10px;
                right: 1rem;
                width: 11px;
                width: 1.1rem;
            }
        
                #search-takeover .search span.close:focus {
                    filter: alpha(opacity=60);
                    opacity: 0.6;
                    outline: none;
                }
        
            #search-takeover .submit-search {
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                border-radius: 5px;
                border: 2px solid #1d1d1d;
                height: 38px;
                height: 3.8rem;
                width: 38px;
                width: 3.8rem;
            }
        
                #search-takeover .submit-search > input.button,
                #search-takeover .submit-search > input.button[disabled] {
                    background: url("/Assets/images/icons/search-icon-dark.png") no-repeat center center transparent;
                    box-shadow: none;
                    opacity: 1;
                    height: 100%;
                    padding: 0;
                    width: 100%;
                }
        
                    #search-takeover .submit-search > input.button:focus {
                        background-color: #dcdcdc;
                    }
        
            #search-takeover.takeover form .stylish-text > span {
                border-bottom: none;
            }
        
            .sticky #search-takeover .search {
                clear: none;
                float: left;
                padding: 0;
                width: 94%;
            }
        
                .sticky #search-takeover .search .stylish-text,
                .sticky #search-takeover .submit-search {
                    margin-top: 6px;
                    margin-top: 0.6rem;
                }
        
            /* route planner  */
            #route-planner-takeover > .go-to > .left {
                font-family: "NewTransport-Bold", Arial, Helvetica, Verdana, sans-serif;
                margin-bottom: 0;
                margin-right: 10px;
                margin-right: 1rem;
                padding-right: 10px;
                padding-right: 1rem;
                position: relative;
            }
        
                #route-planner-takeover > .go-to > .left:after {
                    background: #c7c8ca;
                    content: "";
                    display: block;
                    height: 10px;
                    height: 1rem;
                    margin-top: -5px;
                    margin-top: -0.5rem;
                    position: absolute;
                    right: 0;
                    top: 50%;
                    width: 1px;
                    width: 0.1rem;
                }
        
                #route-planner-takeover > .go-to > .left > a {
                    font-weight: 400;
                }
        
            #route-planner-takeover .route-planner {
                margin-top: 10px;
                margin-top: 1rem;
                position: relative;
            }
        
                #route-planner-takeover .route-planner .stylish-text:first-of-type,
                #route-planner-takeover .route-planner .placeholder-wrapper:first-of-type {
                    margin-left: 0;
                }
        
                #route-planner-takeover .route-planner .stylish-text,
                #route-planner-takeover .route-planner .placeholder-wrapper {
                    float: left;
                    margin-left: 3%;
                    margin-top: 40px;
                    margin-top: 4rem;
                    max-width: 395px;
                    max-width: 39.5rem;
                    width: 40%;
                }
        
                    #route-planner-takeover .route-planner .placeholder-wrapper > div,
                    #route-planner-takeover .route-planner .placeholder-wrapper input,
                    #route-planner-takeover .route-planner .placeholder-wrapper textarea {
                        float: none;
                        margin: 0;
                        width: 100%;
                    }
        
                #route-planner-takeover .route-planner > .large-text {
                    border: none;
                    left: 8px;
                    left: 0.8rem;
                    margin-bottom: 0;
                    position: absolute;
                    top: -12px;
                    top: -1.2rem;
                }
        
                #route-planner-takeover .route-planner .submit {
                    margin-top: 40px;
                    margin-top: 4rem;
                }
        
                    #route-planner-takeover .route-planner .submit > input[type="submit"] {
                        font-size: 13px;
                        font-size: 1.3rem;
                        line-height: 13px;
                        line-height: 1.3rem;
                        padding: 10px 20px;
                        padding: 1rem 2rem;
                    }
        
            .sticky #route-planner-takeover .route-planner {
                clear: none;
                margin-left: 0;
                margin-right: 6%;
                margin-top: 0;
            }
        
                .sticky #route-planner-takeover .route-planner .stylish-text {
                    margin-top: 6px;
                    margin-top: 0.6rem;
                }
        
            .sticky.stylish-form .takeover .stylish-text > input {
                font-size: 15px;
                font-size: 1.5rem;
            }
        
            .sticky .takeover > .go-to > .left,
            .sticky #route-planner-takeover .route-planner .large-text {
                display: none;
            }
        
            .sticky #route-planner-takeover .route-planner .submit {
                margin-top: 6px;
                margin-top: 0.6rem;
            }
        
            .sticky #route-planner-takeover .route-planner .placeholder-wrapper {
                margin-top: 6px;
                margin-top: 0.6rem;
            }
        
                .sticky #route-planner-takeover .route-planner .placeholder-wrapper .stylish-text {
                    margin-top: 0;
                }
        
            /* aa route planner  */
            #aa-route-planner[disabled] {
                background: transparent;
                color: #1d1d1d;
                -moz-box-shadow: none;
                -webkit-box-shadow: none;
                background: none;
                box-shadow: none;
            }
        
            #aa-route-planner-takeover {
                position: relative;
                z-index: 0;
                float: none;
                visibility: hidden;
                max-height: 0;
                height: 100%;
                max-width: 1100px;
                max-width: 110rem;
                margin: 0 auto;
                padding: 0 35px;
                padding: 0 3.5rem;
                margin-left: 215px;
                margin-left: 21.5rem;
                margin-right: 215px;
                margin-right: 21.5rem;
                overflow: hidden;
                -webkit-transform: scale3d(0.9, 0.9, 0.9);
                -moz-transform: scale3d(0.9, 0.9, 0.9);
                -ms-transform: scale3d(0.9, 0.9, 0.9);
                -o-transform: scale3d(0.9, 0.9, 0.9);
                transform: scale3d(0.9, 0.9, 0.9);
                -webkit-transition: transform .15s linear;
                -moz-transition: transform .15s linear;
                -ms-transition: transform .15s linear;
                -o-transition: transform .15s linear;
                transition: transform .15s linear;
            }
        
                #aa-route-planner-takeover.active {
                    max-height: none;
                    visibility: visible;
                    -webkit-transform: scale3d(1, 1, 1);
                    -moz-transform: scale3d(1, 1, 1);
                    -ms-transform: scale3d(1, 1, 1);
                    -o-transform: scale3d(1,1, 1);
                    transform: scale3d(1, 1, 1);
                }
        
            .transition-off #aa-route-planner-takeover.active {
                max-height: none !important;
            }
        
            #aa-route-planner-takeover.active:after {
                content: "";
                position: absolute;
                bottom: 0;
                right: 125px;
                right: 12.5rem;
                width: 28px;
                width: 2.8rem;
                height: 16px;
                height: 1.6rem;
                background: url("/Assets/images/icons/route-planner-arrow.png") no-repeat;
            }
        
            #aa-route-planner-takeover.hidden {
                display: none;
                max-height: 0 !important;
            }
        
            .aa-route-planner-container {
                position: relative;
                z-index: 3;
                display: none;
                overflow: hidden;
                background-color: #f6f6f6;
            }
        
                .aa-route-planner-container.active {
                    display: table;
                }
        
                .aa-route-planner-container:after {
                    content: "";
                    position: absolute;
                    z-index: 10;
                    visibility: hidden;
                    top: 0;
                    height: 100%;
                    width: 100%;
                    -moz-box-shadow: inset 0 0 0 0 rgba(55, 71, 67, 0);
                    box-shadow: inset 0 0 0 0 rgba(55, 71, 67, 0);
                    -webkit-transition: all .2s linear;
                    -moz-transition: all .2s linear;
                    -ms-transition: all .2s linear;
                    -o-transition: all .2s linear;
                    transition: all .2s linear;
                }
        
            .transition-on .aa-route-planner-container:after {
                content: "";
                visibility: visible;
                -moz-box-shadow: inset 0 -55px 70px -30px rgba(55, 71, 67, 0.4);
                -webkit-box-shadow: inset 0 -55px 70px -30px rgba(55, 71, 67, 0.4);
                box-shadow: inset 0 -55px 70px -30px rgba(55, 71, 67, 0.4);
            }
        
            .transition-on #aa-route-planner-takeover {
                -webkit-transform: scale3d(0.9, 0.9, 0.9);
                -moz-transform: scale3d(0.9, 0.9, 0.9);
                -ms-transform: scale3d(0.9, 0.9, 0.9);
                -o-transform: scale3d(0.9, 0.9, 0.9);
                transform: scale3d(0.9, 0.9, 0.9);
            }
        
                .transition-on #aa-route-planner-takeover:after {
                    background: none;
                }
        
            #aa-route-planner-takeover h2.large-text {
                margin-bottom: 0;
            }
        
            #aa-route-planner-takeover .aa-route-planner:before {
                content: "";
                position: absolute;
                display: block;
                top: 40px;
                top: 4rem;
                bottom: 40px;
                bottom: 4rem;
                right: 0;
                width: 1px;
                width: 0.1rem;
                background-color: #dcddde;
            }
        
            #aa-route-planner-takeover .aa-route-planner,
            #aa-route-planner-takeover .traffic-info {
                float: none;
                vertical-align: top;
                display: table-cell;
                height: auto;
                position: relative;
                padding: 34px 0 40px 0;
                padding: 3.4rem 0 4rem 0;
            }
        
            #aa-route-planner-takeover .traffic-info {
                padding-left: 60px;
                padding-left: 6rem;
                padding-right: 10px;
                padding-right: 1rem;
                background: transparent;
                border: none;
                width: 323px;
                width: 32.3rem;
            }
        
                #aa-route-planner-takeover .traffic-info .my-location {
                    display: table-cell;
                    width: auto;
                    background: none;
                    border: none;
                    color: #07818c;
                    font-weight: 700;
                    line-height: 22px;
                    padding: 7px 20px 0 0;
                    padding: 0.7rem 2rem 0 0;
                }
        
                    #aa-route-planner-takeover .traffic-info .my-location:hover {
                        text-decoration: underline;
                    }
        
                    #aa-route-planner-takeover .traffic-info .my-location .my-location-icon {
                        display: inline-block;
                        vertical-align: top;
                        width: 22px;
                        height: 2.2rem;
                        margin-right: 10px;
                        margin-right: 1rem;
                    }
        
            #aa-route-planner-takeover .aa-route-planner .form-fields-group {
                display: table;
                width: 100%;
                table-layout: fixed;
                margin-bottom: 22px;
                margin-bottom: 2.2rem;
            }
        
            #aa-route-planner-takeover .aa-route-planner.form-section .form-fields-group .stylish-text {
                max-width: 100%;
            }
        
            #aa-route-planner-takeover .aa-route-planner .form-field,
            #aa-route-planner-takeover .aa-route-planner .submit,
            #aa-route-planner-takeover .aa-route-planner .field-separator {
                vertical-align: bottom;
                display: table-cell;
            }
        
            #aa-route-planner-takeover .aa-route-planner .form-field {
                width: 34%;
            }
        
            #aa-route-planner-takeover .aa-route-planner .submit {
                width: 226px;
                width: 22.6rem;
                padding-left: 40px;
                padding-left: 4rem;
            }
        
            #aa-route-planner-takeover .aa-route-planner .field-separator {
                position: relative;
                width: 35px;
                width: 3.5rem;
                cursor: pointer;
            }
        
                #aa-route-planner-takeover .aa-route-planner .field-separator span {
                    position: absolute;
                    left: 0;
                    width: 100%;
                    height: 12px;
                    height: 1.2rem;
                    -webkit-transition: all 0.15s ease-out;
                    -moz-transition: all 0.15s ease-out;
                    -ms-transition: all 0.15s ease-out;
                    -o-transition: all 0.15s ease-out;
                    transition: all 0.15s ease-out;
                }
        
                #aa-route-planner-takeover .aa-route-planner .field-separator .from-arrow {
                    top: 39px;
                    top: 3.9rem;
                    background: url("/Assets/images/icons/from-arrow.png") no-repeat center center;
                }
        
                #aa-route-planner-takeover .aa-route-planner .field-separator .to-arrow {
                    top: 51px;
                    top: 5.1rem;
                    background: url("/Assets/images/icons/to-arrow.png") no-repeat center center;
                }
        
                #aa-route-planner-takeover .aa-route-planner .field-separator:hover .from-arrow {
                    left: 3px;
                    left: 0.3rem;
                }
        
                #aa-route-planner-takeover .aa-route-planner .field-separator:hover .to-arrow {
                    left: -3px;
                    left: -0.3rem;
                }
        
            #aa-route-planner-takeover .aa-route-planner .form-field.checkbox-field-group {
                width: 100%;
            }
        
                #aa-route-planner-takeover .aa-route-planner .form-field.checkbox-field-group h2 {
                    margin-bottom: 10px;
                    margin-bottom: 1rem;
                }
        
                #aa-route-planner-takeover .aa-route-planner .form-field.checkbox-field-group .field {
                    vertical-align: top;
                    display: inline-block;
                    margin-right: 50px;
                    margin-right: 5rem;
                    margin-bottom: 15px;
                    margin-bottom: 1.5rem;
                }
        
            #aa-route-planner-takeover .aa-route-planner .stylish-ds ~ label {
                max-width: 100%;
            }
        
            #aa-route-planner-takeover .aa-route-planner .stylish-ds[data-type="checkbox"] {
                vertical-align: top;
                width: 24px;
                width: 2.4rem;
                height: 24px;
                height: 2.4rem;
            }
        
                #aa-route-planner-takeover .aa-route-planner .stylish-ds[data-type="checkbox"] > span.checked {
                    height: 16px;
                    height: 1.6rem;
                    width: 16px;
                    width: 1.6rem;
                    background-size: 12px;
                    background-size: 1.2rem;
                }
        
            #aa-route-planner-takeover .aa-takeover-btn {
                position: absolute;
                top: 34px;
                top: 3.4rem;
                right: 0;
                width: 26px;
                width: 2.6rem;
                height: 26px;
                height: 2.6rem;
                padding: 0;
                margin: 0;
                background-position: center;
            }
        </style>
        <!-- header.css line 483-709-->
        <style>
            @@media screen and (max-width: 1366px) {
                /* logo */
                #logo {
                    height: 17rem;
                    left: -2rem;
                    top: 0;
                    width: 25.5rem;
                }
        
                    #logo > a { /*left: -5.5rem; top: -2.2rem;*/
                    }
                /*CD-553*/
                /* header links */
                .takeover,
                #header-links,
                #cookie-bar > .wrapper .text {
                    padding-left: 22.2%;
                    padding-right: 10.1rem;
                }
        
                header#site-header .page-title {
                    padding-left: 29rem;
                }
        
                #primary-navigation ul > li > .mega-menu {
                    max-width: 112.2rem;
                    margin-right: 10rem;
                    margin-left: 9%;
                }
                /* aa route planner */
                #aa-route-planner-takeover {
                    margin-left: 12rem;
                    margin-right: 12rem;
                }
            }
        
            @@media screen and (max-width: 1280px) {
                /* header links */
                .takeover,
                #helpful-links,
                #top-level-nav,
                #cookie-bar > .wrapper .text {
                    padding-right: 0;
                }
        
                .sticky #helpful-links {
                    margin-right: 0;
                    padding-right: 0;
                }
                /* search takeover */
                #search-takeover .search {
                    padding-top: 4rem;
                }
                /* my account mega menu */
                .my-account:focus:after,
                .my-account.active:after {
                    right: 3.8rem;
                }
        
                .my-account .account-nav.mega-menu {
                    left: auto;
                    right: 0;
                    margin-left: 0;
                }
                /* navigation */
                #primary-navigation ul > li {
                    font-size: 1.5rem;
                    padding-left: 1.4rem;
                    padding-right: 1.6rem;
                }
            }
        
            @@media screen and (max-width: 1160px) {
                /* header */
                header#site-header .four-column .col {
                    width: 23.5%;
                }
        
                    header#site-header .four-column .col:nth-child(2n+1) {
                        clear: none;
                        margin-top: 0;
                    }
                /* logo */
                #logo {
                    width: 15.5rem;
                }
        
                .sticky #logo,
                .stripped #logo {
                    height: 14.5rem;
                }
        
                #logo > a { /*top: -3rem;*/
                }
                /*.sticky #logo > a,
            .stripped #logo > a { left: -4.8rem; top: -1rem; } removed for CD-553*/
                /* header links */
                .takeover,
                #header-links,
                .sticky #header-links,
                #cookie-bar > .wrapper .text {
                    padding-left: 13rem;
                    padding-right: 0;
                }
        
                header#site-header .page-title {
                    padding-left: 19rem;
                }
                /* primary navigation */
                #primary-navigation ul > li > .mega-menu {
                    margin-left: 0;
                    margin-right: 0;
                }
                /* search takeover*/
                #search-takeover .search-input {
                    width: 93%;
                }
                /* snapped header */
                .sticky .takeover {
                    padding-left: 14%;
                }
        
                .sticky #route-planner-takeover .route-planner .stylish-text {
                    margin-left: 2%;
                    width: 42%;
                }
        
                    .sticky #route-planner-takeover .route-planner .stylish-text:first-of-type {
                        margin-left: 0;
                    }
                /* my account mega menu */
                .my-account .account-nav.mega-menu.four-column .col {
                    margin-top: 0;
                }
        
                    .my-account .account-nav.mega-menu.four-column .col:nth-child(2n+1) {
                        clear: none;
                    }
                /* aa route planner */
                #aa-route-planner-takeover {
                    margin: 0 2rem;
                }
            }
        
            @@media screen and (max-width: 1160px) {
                /* header */
                header#site-header .four-column .col {
                    width: 23.5%;
                }
        
                    header#site-header .four-column .col:nth-child(2n+1) {
                        clear: none;
                        margin-top: 0;
                    }
                /* logo */
                #logo {
                    width: 15.5rem;
                }
        
                .sticky #logo,
                .stripped #logo {
                    height: 14.5rem;
                }
        
                #logo > a { /*top: -3rem;*/
                }
                /*.sticky #logo > a,
            .stripped #logo > a { left: -4.8rem; top: -1rem; } removed for CD-553*/
                /* header links */
                .takeover,
                #header-links,
                .sticky #header-links,
                #cookie-bar > .wrapper .text {
                    padding-left: 13rem;
                    padding-right: 0;
                }
        
                header#site-header .page-title {
                    padding-left: 19rem;
                }
                /* primary navigation */
                #primary-navigation ul > li > .mega-menu {
                    margin-left: 0;
                    margin-right: 0;
                }
                /* search takeover*/
                #search-takeover .search-input {
                    width: 93%;
                }
                /* snapped header */
                .sticky .takeover {
                    padding-left: 14%;
                }
        
                .sticky #route-planner-takeover .route-planner .stylish-text {
                    margin-left: 2%;
                    width: 42%;
                }
        
                    .sticky #route-planner-takeover .route-planner .stylish-text:first-of-type {
                        margin-left: 0;
                    }
                /* my account mega menu */
                .my-account .account-nav.mega-menu.four-column .col {
                    margin-top: 0;
                }
        
                    .my-account .account-nav.mega-menu.four-column .col:nth-child(2n+1) {
                        clear: none;
                    }
                /* aa route planner */
                #aa-route-planner-takeover {
                    margin: 0 2rem;
                }
            }
        
            @@media screen and (max-width: 1060px) {
                /* global */
                header#site-header .four-column .col {
                    width: 25%;
                }
        
                    header#site-header .four-column .col:nth-child(2n+1) {
                        clear: none;
                    }
                /* header */
                header#site-header {
                    height: auto;
                }
        
                    header#site-header.sticky,
                    header#site-header.stripped {
                        height: 6rem;
                    }
                /* logo */
                #logo {
                    -moz-background-size: 10.1rem auto;
                    -ms-background-size: 10.1rem auto;
                    -o-background-size: 10.1rem auto;
                    -webkit-background-size: 10.1rem auto;
                    background-image: url("/Assets/images/logo-aa-tablet.png");
                    background-size: 10.1rem auto;
                    height: 11rem;
                    left: 0;
                    margin-top: 0;
                    top: 0;
                    width: 10.1rem;
                }
        
                .sticky #logo,
                .stripped #logo {
                    height: 11rem;
                    margin-top: -5rem;
                    top: 0;
                }
        
                #logo > a {
                    top: 62px;
                    top: 6.2rem;
                    right: 42px;
                    right: 4.2rem;
                    height: 35px;
                    height: 3.5rem;
                    width: 45px;
                    width: 4.5rem;
                    left: auto;
                }
                /*CD-553 Accessibility focus for logo*/
                /*.sticky #logo > a,
            .stripped #logo > a { left: -3.2rem; top: -0.5rem; } removed for CD-553*/
                /* header links */
                #helpful-links {
                    padding: 1rem 0;
                }
        
                header#site-header .page-title {
                    padding-left: 13rem;
                    padding-bottom: 1.8rem;
                }
        
                .sticky #header-links .button.tertiary.ghost {
                    padding: 1rem 0;
                }
        
                .sticky #helpful-links {
                    top: 0.2rem;
                }
        
                .sticky #header-links {
                    padding-left: 17%;
                }
                /* primary navigation */
                #primary-navigation ul > li > .mega-menu {
                    margin-left: 0;
                    margin-right: 0;
                }
                /* top level nav */
                #top-level-nav #search-icon,
                #search-takeover .submit-search > input.button,
                #search-takeover .submit-search > input.button[disabled] {
                    -moz-background-size: 1.1rem 1.1rem;
                    -ms-background-size: 1.1rem 1.1rem;
                    -o-background-size: 1.1rem 1.1rem;
                    -webkit-background-size: 1.1rem 1.1rem;
                    background-image: url("/Assets/images/icons/search-icon-dark-x2.png");
                    background-size: 1.1rem 1.1rem;
                    height: 3rem;
                    margin-top: 0;
                    width: 3rem;
                }
        
                    #search-takeover .submit-search > input.button[disabled] {
                        height: 2.6rem;
                        width: 2.6rem;
                    }
                /* search takeover */
                #search-icon,
                .submit-search,
                header#site-header #search-icon,
                header#site-header .submit-search {
                    background-size: 1.1rem;
                    height: 3rem;
                    width: 3rem;
                }
        
                .takeover.form-module {
                    width: 100%;
                }
        
                #search-takeover .results-container {
                    margin-left: 5%;
                    width: 86%;
                }
        
                #search-takeover .search {
                    padding-top: 1.8rem;
                }
        
                    #search-takeover .search span.close {
                        -moz-background-size: 1rem;
                        -ms-background-size: 1rem;
                        -o-background-size: 1rem;
                        -webkit-background-size: 1rem;
                        background-image: url("/Assets/images/icons/close-icon-dark-x2.png");
                        background-size: 1rem;
                    }
        
                #search-takeover .submit-search,
                header#site-header .submit-search {
                    background-image: none;
                    height: 3rem;
                    margin-top: 0.8rem;
                    width: 3rem;
                }
        
                    #search-takeover .submit-search > input.button {
                        height: 2.6rem;
                        width: 2.6rem;
                    }
        
                .takeover form.form-section .stylish-text > span {
                    padding: 0;
                }
        
                .takeover form.form-section .stylish-text > span,
                .takeover form.form-section .stylish-text > input {
                    font-size: 1.5rem;
                    height: 3rem;
                    line-height: 2rem;
                }
        
                .sticky #search-takeover .search {
                    width: 92%;
                }
                /* route planner takeover */
                #route-planner {
                    font-size: 1rem;
                    height: 3rem;
                    letter-spacing: .02em;
                    margin-right: 1.1rem;
                }
        
                #route-planner-takeover .route-planner .text {
                    font-size: 1.5rem;
                    line-height: 1.5rem;
                    max-width: 25%;
                    padding-top: 1.9rem;
                }
        
                #route-planner-takeover .route-planner .stylish-text {
                    margin-top: 1.8rem;
                    width: 38%;
                }
        
                #route-planner-takeover .route-planner .submit {
                    margin-top: 1.6rem;
                }
        
                .sticky .takeover > p,
                .sticky .takeover > .go-to {
                    padding-top: 1rem;
                }
        
                .sticky #route-planner-takeover .route-planner {
                    margin-right: 8%;
                }
        
                    .sticky #route-planner-takeover .route-planner .stylish-text {
                        width: 38%;
                    }
        
                    .sticky #route-planner-takeover .route-planner .text {
                        display: none;
                    }
        
                    .sticky #route-planner-takeover .route-planner .submit {
                        margin-top: 0.4rem;
                    }
        
                        .sticky #route-planner-takeover .route-planner .submit > input[type="submit"] {
                            padding: 0.7rem 1.8rem;
                        }
                /* aa route planner takeover */
                #aa-route-planner,
                #aa-route-planner-takeover input[type="submit"].set-location {
                    height: 3rem;
                }
        
                #aa-route-planner-takeover {
                    padding: 0 3rem;
                }
        
                    #aa-route-planner,
                    #aa-route-planner-takeover h2.large-text,
                    #aa-route-planner-takeover .traffic-info .my-location,
                    #aa-route-planner-takeover form.form-section .form-field label {
                        font-size: 1.2rem;
                        line-height: 1.8rem;
                    }
        
                    #aa-route-planner-takeover input[type="submit"] {
                        height: 3.8rem;
                        line-height: 1.2rem;
                        font-size: 1.2rem;
                    }
        
                    #aa-route-planner-takeover .aa-takeover-btn {
                        z-index: 1;
                        top: 2rem;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner,
                    #aa-route-planner-takeover .traffic-info {
                        padding: 2rem 0 2.7rem 0;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner {
                        padding-right: 4rem;
                    }
        
                    #aa-route-planner-takeover .traffic-info {
                        width: 26rem;
                        padding-left: 3.7rem;
                    }
        
                    #aa-route-planner-takeover h2.large-text {
                        font-size: 1.4rem;
                        margin-bottom: 0.75rem;
                        padding-right: 3rem;
                    }
        
                    #aa-route-planner-takeover .route-input .submit {
                        display: none;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner > .submit {
                        display: block;
                        width: 100%;
                        padding: 0;
                        text-align: right;
                    }
        
                        #aa-route-planner-takeover .aa-route-planner > .submit input[type="submit"] {
                            margin-right: 0;
                        }
        
                    #aa-route-planner-takeover .traffic-info .my-location {
                        padding-top: 1rem;
                    }
        
                        #aa-route-planner-takeover .traffic-info .my-location .my-location-icon {
                            width: 1.9rem;
                            height: 1.9rem;
                            margin-right: 0.75rem;
                        }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .from-arrow {
                        top: 3.4rem;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .to-arrow {
                        top: 4.7rem;
                    }
                /* sign in */
                .sign-in.button,
                .my-account .button {
                    margin-top: 1.7rem;
                }
                /* primary navigation */
                #primary-navigation ul > li {
                    font-size: 1.4rem;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels {
                        margin-left: 25%;
                        width: 75.1%;
                    }
        
                #primary-navigation .container > ul > li.primary-item > a {
                    font-size: 1.25rem;
                }
        
                #primary-navigation ul > li.account-link > a {
                    padding: 2.4rem 0 1.4rem 1.6rem;
                }
        
                #primary-navigation ul.second-level-navigation li.secondary-item {
                    line-height: 1.6rem;
                }
        
                #primary-navigation .container > ul > li.primary-item.has-children > a:first-child,
                #primary-navigation .container > ul > li.primary-item > .logged-user + a:first-child {
                    padding: 1.8rem 0 1.3rem 1.3rem;
                }
        
                #primary-navigation .container > ul > li.primary-item > a:first-child {
                    padding: 1.8rem 1.3rem 1.3rem;
                }
        
                #primary-navigation ul > li.has-children > .toggle,
                #primary-navigation ul > li.has-children.active > .toggle {
                    margin-top: 2rem;
                }
        
                .sticky #primary-navigation .container > ul > li.primary-item > a:first-child,
                .sticky #primary-navigation .container > ul > li.primary-item > .logged-user + a:first-child,
                .sticky #primary-navigation .container > ul > li.primary-item.has-children > a:first-child {
                    padding-bottom: 1.3rem;
                }
        
                .sticky #primary-navigation ul > li.has-children > .toggle,
                .sticky #primary-navigation ul > li.has-children.active > .toggle {
                    margin-top: 3rem;
                }
            }
        
            @@media only screen and (max-width: 880px) {
                /* global */
                header#site-header .four-column .col {
                    width: 25%;
                }
        
                    header#site-header .four-column .col:nth-child(2n+1) {
                        clear: none;
                    }
                /* header */
                header#site-header .page-title {
                    font-size: 1.3rem;
                    padding-bottom: 2rem;
                    padding-top: 2.2rem;
                    width: 70%;
                }
                /* cookie bar */
                #cookie-bar .accept {
                    -moz-background-size: 1rem 1rem;
                    -ms-background-size: 1rem 1rem;
                    -o-background-size: 1rem 1rem;
                    -webkit-background-size: 1rem 1rem;
                    background-image: url("/Assets/images/icons/close-icon-dark-x2.png");
                    background-size: 1rem 1rem;
                }
                /* logo */
                #logo {
                    left: 0;
                }
                /* header links */
                #header-links,
                .sticky #header-links,
                #cookie-bar > .wrapper .text {
                    padding-left: 12rem;
                }
        
                #primary-navigation .container > ul > li {
                    font-size: 1.2rem;
                }
        
                .sticky #header-links {
                    -webkit-box-shadow: 0 0 8px rgba(55, 71, 67, 0.2);
                    -webkit-transform: translate3d(0,0,0);
                    background: #ffffff;
                    box-shadow: 0 0 8px rgba(55, 71, 67, 0.2);
                    position: absolute;
                    right: 0;
                    top: 0;
                }
                /* needed for ios */
                /* helpful links */
                #helpful-links .left {
                    margin-top: 0.6rem;
                }
                /* search takeover */
                #top-level-nav #search-icon {
                    margin-top: 0.4rem;
                }
        
                .sticky #search-takeover .search span.close {
                    bottom: 20%;
                }
        
                .sticky #search-takeover .search .stylish-text {
                    margin-top: 1.4rem;
                }
        
                .sticky #search-takeover .submit-search {
                    margin-top: 2.1rem;
                }
                /* route planner takeover */
                .sticky #route-planner-takeover .route-planner .stylish-text {
                    margin-top: 1.4rem;
                }
        
                .sticky #route-planner-takeover .route-planner .submit {
                    margin-top: 2.1rem;
                }
                /* aa route planner takeover */
                #aa-route-planner-takeover {
                    margin: 0 1rem;
                    padding-left: 2rem;
                }
        
                    #aa-route-planner-takeover .traffic-report .report-details.report-not-available {
                        margin: 2.8rem 0;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .from-arrow {
                        top: 3rem;
                    }
        
                    #aa-route-planner-takeover .aa-route-planner .field-separator .to-arrow {
                        top: 4.3rem;
                    }
                /* sign in button */
                .sign-in.button,
                .my-account .button {
                    -moz-border-radius: 0.6rem 0.6rem 0 0;
                    -webkit-border-radius: 0.6rem 0.6rem 0 0;
                    border-radius: 0.6rem 0.6rem 0 0;
                    font-size: 1.2rem;
                    letter-spacing: 0.01em;
                    line-height: 1.75rem;
                    margin-left: 0;
                    margin-top: 1rem;
                    padding: 1.6rem 2rem 1.5rem;
                    width: auto;
                }
                /* sign in overlay */
                #sign-in-panel {
                    -moz-background-size: 9.8rem auto;
                    -ms-background-size: 9.8rem auto;
                    -o-background-size: 9.8rem auto;
                    -webkit-background-size: 9.8rem auto;
                    background-image: url("/Assets/images/backgrounds/sign-in-beam-large.png");
                    background-position: -0.5rem 43%;
                    background-size: 9.8rem auto;
                    height: auto;
                    left: 0;
                    margin: 0 auto;
                    max-width: 90%;
                    right: 0;
                    top: 2.4rem;
                }
        
                    #sign-in-panel .wrapper {
                        padding: 1.6rem 3.4rem 1.6rem 6.9rem;
                    }
        
                    #sign-in-panel .rich-text ul.left {
                        margin-bottom: 1rem;
                    }
        
                    #sign-in-panel .rich-text .my-aa-cta {
                        padding-top: 1rem;
                    }
        
                    #sign-in-panel .two-column {
                        padding: 0;
                    }
        
                        #sign-in-panel .two-column .col,
                        #sign-in-panel .two-column .col + .col {
                            border: none;
                            float: none;
                            padding: 0;
                            width: 100%;
                        }
        
                            #sign-in-panel .two-column .col:first-child {
                                border: none;
                            }
        
                            #sign-in-panel .two-column .col .cta {
                                margin-bottom: 1.5rem;
                            }
        
                                #sign-in-panel .two-column .col .cta:after {
                                    background-color: #f1f1f1;
                                    clear: both;
                                    content: "";
                                    display: block;
                                    height: 0.2rem;
                                    margin-left: -5%;
                                    margin-top: 2rem;
                                    width: 105%;
                                }
        
                            #sign-in-panel .two-column .col + .col .cta:last-child {
                                margin-bottom: 0;
                            }
        
                                #sign-in-panel .two-column .col + .col .cta:last-child:after {
                                    display: none;
                                }
                /* my account mega menu */
                .my-account .account-nav.mega-menu {
                    padding: 2.4rem 2rem 1rem;
                }
        
                    .my-account .account-nav.mega-menu .col {
                        padding-left: 2.4%;
                    }
        
                        .my-account .account-nav.mega-menu .col:first-child {
                            padding-left: 0;
                        }
        
                        .my-account .account-nav.mega-menu .col + .col + .col {
                            padding-left: 4.7%;
                        }
        
                            .my-account .account-nav.mega-menu .col + .col + .col + .col {
                                padding-left: 7.1%;
                            }
        
                        .my-account .account-nav.mega-menu .col > h5 {
                            font-size: 1.3rem;
                            margin-bottom: 2rem;
                        }
        
                        .my-account .account-nav.mega-menu .col ul > li {
                            font-size: 1.3rem;
                            padding-bottom: 1.1em;
                            padding-top: 1.2rem;
                        }
        
                #primary-navigation ul li.primary-item > .toggle,
                #primary-navigation ul li.account-link > .toggle,
                #primary-navigation ul > li.account-link.active > .toggle {
                    margin-left: 0.8rem;
                }
        
                #primary-navigation ul > li:last-child {
                    margin-right: 0;
                }
        
                #primary-navigation ul.second-level-navigation li.secondary-item.active:after {
                    right: -2rem;
                    width: 2rem;
                }
        
                #primary-navigation ul.second-level-navigation > li.secondary-item a > .toggle {
                    right: -1.5rem;
                    width: 0.7rem;
                    height: 1rem;
                }
        
                #primary-navigation ul.second-level-navigation > li.secondary-item a {
                    padding: 0;
                }
        
                #primary-navigation ul.second-level-navigation li.secondary-item {
                    font-size: 1.4rem;
                    line-height: 2rem;
                    padding: 2rem 2.5rem 1.6rem 1.5rem;
                }
        
                .sticky #primary-navigation ul > li > .mega-menu {
                    margin-left: 1.1rem;
                    margin-right: 1.1rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels {
                    margin-left: 25%;
                    width: 75%;
                }
        
                #primary-navigation ul > li.account-link > a {
                    padding: 2.4rem 0 1.4rem 1.6rem;
                }
        
                #primary-navigation ul > li > .mega-menu .second-level-nav-overlay {
                    display: none;
                }
                /* my account settings */
                #primary-navigation ul > li > .mega-menu > .nav-panels.my-aa-account .sub-component .content-links a {
                    margin-bottom: 0.4rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels.my-aa-account .sub-component.account-settings a.logout {
                    margin-top: 0.1rem;
                }
                /* in-nav components */
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component {
                    padding: 2.6rem 2rem;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component:after {
                        bottom: 3rem;
                        margin-bottom: 0;
                        margin-top: 2rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .sub-headline {
                        margin-bottom: 2.2rem;
                        font-size: 1.4rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .links-group li {
                        font-size: 1.3rem;
                        line-height: 2rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .links-group a {
                        margin-bottom: 2.1rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content p {
                        font-size: 1.3rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .contact-number {
                        font-size: 1.6rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.contact .content .headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.contact .content .sub-headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .headline,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .sub-headline {
                        margin-bottom: 1rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta ul li {
                        padding-left: 0;
                        font-size: 1.3rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta .button.cta,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .button.cta {
                        font-size: 1.1rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.contact .content {
                        margin-bottom: 1.5rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta .content {
                        margin-bottom: 0.9rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.text-cta ul li:before {
                        width: 1.2rem;
                        height: 1.2rem;
                    }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .introduction-text {
                        padding-bottom: 1rem;
                        font-size: 1.4rem;
                        line-height: 2.1rem;
                    }
        
                #primary-navigation form.form-section .stylish-text > input#vrn {
                    background-size: 2.6rem 3.6rem;
                }
        
                #primary-navigation form.form-section .form-field,
                #primary-navigation .wffm-form-module .form-group {
                    margin-bottom: 0.7rem;
                }
        
                    #primary-navigation .rich-text form .control-group label,
                    #primary-navigation form.form-section .form-field label,
                    #primary-navigation .wffm-form-module .form-group label,
                    #primary-navigation form.form-section .form-field span.large-label {
                        padding-bottom: 0;
                    }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content form.form-section .form-field:last-of-type {
                    margin-bottom: 2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content .radio-field span {
                    font-size: 1.2rem;
                }
        
                #primary-navigation .rich-text form span,
                #primary-navigation .rich-text form input,
                #primary-navigation .rich-text form textarea,
                #primary-navigation form.form-section span,
                #primary-navigation form.form-section input,
                #primary-navigation form.form-section textarea {
                    font-size: 1.4rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content .info-block,
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content {
                    margin-bottom: 1.5rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content form.form-section .stylish-ds[data-type="radio"] {
                    margin-right: 0.5rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user ul li:first-child {
                    margin-top: 0.5rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content li a {
                    margin-bottom: 2.2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component.logged-user .content li:last-child a {
                    margin-bottom: 1rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .button.cta {
                    font-size: 1.1rem;
                    min-width: 9rem;
                    padding: 0.6rem 2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .content figure {
                    margin-bottom: 2rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .feature-list {
                    padding-bottom: 0.8rem;
                    font-size: 1.4rem;
                    line-height: 2.1rem;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .feature-list ul > li,
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper ul.app-features-list > li {
                        font-size: 1.3rem;
                        padding-bottom: 0.2rem;
                        padding-left: 1.8rem;
                    }
        
                        #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .feature-list ul > li:before,
                        #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper ul.app-features-list > li:before {
                            -moz-background-size: 1.2rem;
                            -ms-background-size: 1.2rem;
                            -o-background-size: 1.2rem;
                            -webkit-background-size: 1.2rem;
                            background-size: 1.2rem;
                            height: 1.2rem;
                            width: 1.2rem;
                        }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .dual-cta a.button {
                    margin-bottom: 0;
                }
        
                    #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .dual-cta a.button + a.button {
                        margin-top: 2rem;
                    }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper .text {
                    max-width: 100%;
                    padding: 0;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper .headline {
                    margin-bottom: 0.3rem;
                }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels > .col.sub-component .app-promo.wrapper a.button {
                    margin-bottom: 0.4rem;
                    margin-top: 0.8rem;
                    max-width: 10.15rem;
                }
                /* editorial panel */
                #primary-navigation ul > li .editorial-panel .inner {
                    font-size: 1.3rem;
                    letter-spacing: 0.01em;
                    padding: 2.4rem 2rem 2.2rem;
                }
        
                    #primary-navigation ul > li .editorial-panel .inner a {
                        -moz-background-size: auto 0.8rem;
                        -ms-background-size: auto 0.8rem;
                        -o-background-size: auto 0.8rem;
                        -webkit-background-size: auto 0.8rem;
                        background: url("/Assets/images/icons/arrow.png") no-repeat right center transparent;
                        background-size: auto 0.8rem;
                        padding-right: 1.2rem;
                    }
        
                #primary-navigation ul > li > .mega-menu > .nav-panels.editorial {
                    padding-bottom: 5rem;
                }
            }
        </style>
        <!-- forms.css line 157-440 -->
        <style>
            form,
            .rich-text form,
            form.form-section,
            .form-module form.form-section {
                color: #414042;
                font-size: 15px;
                font-size: 1.5rem;
                letter-spacing: 0.03em;
            }
        
                .rich-text form span,
                .rich-text form input,
                .rich-text form textarea,
                form.form-section span,
                form.form-section input,
                form.form-section textarea {
                    -moz-transition: all 0.2s ease-in-out 0s;
                    -ms-transition: all 0.2s ease-in-out 0s;
                    -o-transition: all 0.2s ease-in-out 0s;
                    -webkit-transition: all 0.2s ease-in-out 0s;
                    transition: all 0.2s ease-in-out 0s;
                }
                    /*CD-6596*/
                    form.form-section span.text {
                        padding-left: 14px
                    }
        
                .rich-text form .ra,
                form.form-section .ra {
                    -moz-border-radius: 0.5rem;
                    -webkit-border-radius: 0.5rem;
                    border-radius: 5px;
                    border-radius: 0.5rem;
                }
        
                .rich-text form .control-group,
                form.form-section .form-field,
                .wffm-form-module .form-group,
                .rich-text form .control-group .row-fluid > div {
                    font-family: "NewTransport-Regular", Arial, Helvetica, Verdana, sans-serif;
                    margin-bottom: 15px;
                    margin-bottom: 1.5rem;
                    position: relative;
                }
        
                    .rich-text form .control-group label,
                    form.form-section .form-field label,
                    .wffm-form-module .form-group label,
                    form.form-section .form-field span.large-label {
                        display: block;
                        color: #000000;
                        letter-spacing: 0;
                        line-height: 24px;
                        line-height: 2.4rem;
                        padding-bottom: 5px;
                        padding-bottom: 0.5rem;
                        padding-left: 0;
                    }
        
                        form.form-section .form-field label.large-label,
                        form.form-section .form-field span.large-label {
                            font-size: 24px;
                            font-size: 2.4rem;
                            line-height: 37px;
                            line-height: 3.7rem;
                            max-width: none;
                        }
        
                        form.form-section .form-field label.larger-label {
                            font-size: 28px;
                            font-size: 2.8rem;
                            line-height: 37px;
                            line-height: 3.7rem;
                            max-width: none;
                        }
        
                            form.form-section .form-field label.large-label span,
                            form.form-section .form-field label.larger-label span, .radioCancelChecked {
                                font-family: "NewTransport-Bold", Arial, Helvetica, Verdana, sans-serif;
                                font-weight: 400;
                            }
        
                        form.form-section .form-field label.bold,
                        form.form-section .form-field label.checked,
                        form.form-section .form-field label.in-focus {
                            font-family: "NewTransport-Bold", Arial, Helvetica, Verdana, sans-serif;
                            font-weight: 400;
                        }
        
                        form.form-section .form-field label > span:first-child {
                            display: inline-block;
                            vertical-align: middle;
                        }
        
                    form.form-section .form-field .counter {
                        bottom: 10px;
                        bottom: 1rem;
                        font-size: 13px;
                        font-size: 1.3rem;
                        left: 365px;
                        left: 36.5rem;
                        line-height: 13px;
                        line-height: 1.3rem;
                        position: absolute;
                        top: auto;
                    }
        
                    form.form-section .form-field .error-message,
                    .mod-form > .form-section .form-field .err-msgs > div,
                    .wffm-form-module .help-block.field-validation-error,
                    .mod-form .cover-details-wrapper > .form-section .form-field .err-msgs > div,
                    .vrn-form > .form-section .form-field .err-msgs > div,
                    .check-your-address-err {
                        background: url("/Assets/images/icons/close-icon-error.png") no-repeat 5px 3px transparent;
                        color: #da0076;
                        display: none;
                        font-style: italic;
                        letter-spacing: 0;
                        margin-bottom: 0;
                        margin-top: 5px;
                        margin-top: 0.5rem;
                        padding: 0 0 0 30px;
                        padding: 0 0 0 3rem;
                    }
        
            .stylish-form form .form-field b,
            .stylish-form form .form-field strong {
                font-family: "NewTransport-Bold", Arial, Helvetica, Verdana, sans-serif;
                font-weight: 400;
            }
        
            .stylish-form form .form-field.error label,
            .stylish-form form .form-field.future-date-error label,
            .stylish-form form .form-field.leap-year-error label {
                color: #e0288b;
            }
        
            .stylish-form form .form-field.error input,
            .stylish-form form .form-field.error textarea,
            .stylish-form form .form-field.future-date-error input,
            .stylish-form form .form-field.leap-year-error input {
                -moz-box-shadow: inset 0 0 0 1px #ec7fba;
                -webkit-box-shadow: inset 0 0 0 1px #ec7fba;
                border-color: #da0076;
                box-shadow: inset 0 0 0 1px #ec7fba;
            }
        
            .stylish-form form .form-field.error .counter {
                color: #e0288b;
                font-weight: 700;
            }
        
            form.form-section .form-field.error .error-message {
                display: inline-block;
                width: 100%;
            }
        
            .form-module > .wrapper .submit,
            form.form-section .form-field.submit,
            form.form-section .form-field .submit {
                margin: 0;
            }
        
            .form-module.mancon-form > .wrapper .submit {
                margin-top: 30px;
                margin-top: 3rem;
            }
        
            form.form-section .single.form-field {
                margin-bottom: 0;
            }
        
            .rich-text form .stylish-tel,
            form.form-section .stylish-tel {
                position: relative;
            }
        
                .rich-text form .stylish-tel span,
                form.form-section .stylish-tel span {
                    display: block;
                }
        
            .rich-text form .stylish-tel,
            .rich-text form .stylish-text,
            .rich-text form .stylish-number,
            .rich-text form .stylish-password,
            .rich-text form .narrow .stylish-textarea textarea,
            form.form-section .stylish-tel,
            form.form-section .stylish-text,
            form.form-section .stylish-number,
            form.form-section .stylish-password,
            form.form-section .narrow .stylish-textarea textarea,
            .strength-meter .meter-container,
            .form-module.account-management > .form-section .form-field .err-msgs,
            .wffm-form-module .form-group .help-block {
                max-width: 330px;
                max-width: 33rem;
            }
        
            .rich-text form .stylish-textarea,
            .rich-text form .stylish-textarea textarea,
            form.form-section .stylish-textarea,
            form.form-section .stylish-textarea textarea {
                max-width: 400px;
                max-width: 40rem;
            }
        
            form.form-section .character-limit .stylish-textarea,
            form.form-section .character-limit .stylish-textarea textarea[data-character-limit] {
                height: 79px;
                height: 7.9rem;
            }
        
                form.form-section .character-limit .stylish-textarea textarea[data-character-limit] {
                    padding-right: 45px;
                    padding-right: 4.5rem;
                }
        
            form.form-section .postcode .stylish-text {
                max-width: 180px;
                max-width: 18rem;
            }
        
            .rich-text form .stylish-tel > span,
            .rich-text form .stylish-text > span,
            .rich-text form .stylish-number > span,
            .rich-text form .stylish-email > span,
            .rich-text form .stylish-password > span,
            .rich-text form .stylish-textarea > span,
            form.form-section .stylish-tel > span,
            form.form-section .stylish-text > span,
            form.form-section .stylish-number > span,
            form.form-section .stylish-email > span,
            form.form-section .stylish-password > span,
            form.form-section .stylish-textarea > span {
                -moz-border-radius: 8px;
                -moz-border-radius: 0.8rem;
                -webkit-border-radius: 8px;
                -webkit-border-radius: 0.8rem;
                background-color: #ffffff;
                border: none;
                border-radius: 8px;
                border-radius: 0.8rem;
                color: #414042;
                height: 45px;
                height: 4.5rem;
                outline: none;
                padding: 0;
            }
        
        
            .rich-text form .stylish-select,
            .rich-text form .stylish-tel > input,
            .rich-text form .stylish-text > input,
            .rich-text form .stylish-number > input,
            .rich-text form .stylish-email > input,
            .rich-text form .stylish-password > input,
            .rich-text form .stylish-textarea > textarea,
            form.form-section .stylish-select,
            form.form-section .stylish-tel > input,
            form.form-section .stylish-text > input,
            form.form-section .stylish-number > input,
            form.form-section .stylish-email > input,
            form.form-section .stylish-password > input,
            form.form-section .stylish-textarea > textarea,
            .wffm-form-module .form-group textarea {
                background-color: #ffffff;
                -moz-border-radius: 8px;
                -moz-border-radius: 0.8rem;
                -webkit-border-radius: 8px;
                -webkit-border-radius: 0.8rem;
                -moz-box-shadow: 0 0 2px 1px rgba(167, 169, 172, 0.2);
                -webkit-box-shadow: 0 0 2px 1px rgba(167, 169, 172, 0.2);
                border: 1px solid #cccccc;
                border-radius: 8px;
                border-radius: 0.8rem;
                box-shadow: 0 0 2px 1px rgba(167, 169, 172, 0.2);
                color: #414042;
                font-family: "NewTransport-Regular", Arial, Helvetica, Verdana, sans-serif;
                font-size: 14px;
                font-size: 1.4rem;
                height: 100%;
                line-height: 45px;
                line-height: 4.5rem;
                padding: 0 21px;
                padding: 0 2.1rem;
            }
        </style>
        <!-- stylish-forms.core.min.css-->
        <style>
            /* Stylish Forms 3.1.4 */
            input::-webkit-inner-spin-button, input::-webkit-outer-spin-button {
                -webkit-appearance: none;
                margin: 0
            }
        
            .stylish-form .stylish-email, .stylish-form .stylish-number, .stylish-form .stylish-password, .stylish-form .stylish-text, .stylish-form .stylish-textarea {
                position: relative
            }
        
                .stylish-form .stylish-email > input, .stylish-form .stylish-number > input, .stylish-form .stylish-password > input, .stylish-form .stylish-text > input, .stylish-form .stylish-textarea > textarea {
                    color: #555;
                    background: 0 0;
                    border: none;
                    outline: 0;
                    width: 100%;
                    height: 42px;
                    position: absolute;
                    left: 0;
                    top: 0;
                    padding: 0 10px;
                    -webkit-box-sizing: border-box;
                    -moz-box-sizing: border-box;
                    box-sizing: border-box
                }
        
                .stylish-form .stylish-textarea > textarea {
                    height: 100%;
                    resize: none !important;
                    top: 0;
                    padding: 10px
                }
        
                .stylish-form .stylish-email > span, .stylish-form .stylish-number > span, .stylish-form .stylish-password > span, .stylish-form .stylish-text > span, .stylish-form .stylish-textarea > span {
                    border: 1px solid #ccc;
                    display: block;
                    height: 42px
                }
        
                .stylish-form .stylish-textarea > span {
                    height: 100px
                }
        
                .stylish-form .stylish-ds.disabled[data-type=checkbox], .stylish-form .stylish-email.disabled, .stylish-form .stylish-number.disabled, .stylish-form .stylish-password.disabled, .stylish-form .stylish-text.disabled, .stylish-form .stylish-textarea.disabled {
                    background-color: #ccc
                }
        
            .stylish-form .stylish-ds.disabled[data-type=radio] > span {
                border-radius: 20px;
                background-color: #ccc
            }
        
            .stylish-form .stylish-number > input.date, .stylish-form .stylish-number > span.date, .stylish-form .stylish-text > input.date, .stylish-form .stylish-text > span.date {
                width: 60px;
                margin-right: -2px;
                left: 0;
                padding: 0 10px
            }
        
            .stylish-form .stylish-ds {
                display: block;
                width: 40px;
                height: 40px;
                position: relative;
                float: left;
                border: 1px solid #ccc
            }
        
                .stylish-form .stylish-ds > * {
                    width: 100%;
                    height: 100%
                }
        
                .stylish-form .stylish-ds[data-type=checkbox] > span.checked, .stylish-form .stylish-ds[data-type=radio] > span.checked {
                    width: 34px;
                    height: 34px;
                    padding: 3px;
                    background: #555
                }
        
                .stylish-form .stylish-ds > span {
                    position: absolute
                }
        
                .stylish-form .stylish-ds > input[type=checkbox], .stylish-form .stylish-ds > input[type=radio] {
                    cursor: pointer;
                    margin: 0
                }
        
            [dir=rtl] .stylish-form .stylish-ds {
                float: right
            }
        
            .stylish-form .stylish-ds[data-type=radio] {
                border: none
            }
        
                .stylish-form .stylish-ds[data-type=radio] > span {
                    border-radius: 20px;
                    border: 1px solid #ccc
                }
        
            .stylish-form .stylish-select {
                border: 1px solid #ccc;
                position: relative;
                cursor: pointer;
                outline: 0
            }
        
                .stylish-form .stylish-select.disabled {
                    background: #ccc
                }
        
                .stylish-form .stylish-select > span.selected {
                    display: block;
                    padding: 5px 30px 5px 10px;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap
                }
        
                .stylish-form .stylish-select > span > span.ico {
                    position: absolute;
                    top: 21px;
                    right: 21px;
                    width: 0;
                    height: 0;
                    border-left: 10px solid transparent;
                    border-right: 10px solid transparent;
                    border-top: 10px solid #555
                }
        
                .stylish-form .stylish-select > .dropdown-list {
                    display: none;
                    cursor: pointer;
                    position: absolute;
                    top: 106%;
                    left: 0;
                    z-index: 3;
                    background: #fff;
                    border: 1px solid #ccc;
                    list-style: none;
                    padding: 0;
                    margin: 0;
                    width: 100%;
                    overflow: auto
                }
        
                    .stylish-form .stylish-select > .dropdown-list.show-above {
                        top: auto;
                        bottom: 100%
                    }
        
                    .stylish-form .stylish-select > .dropdown-list > div {
                        position: relative
                    }
        
                    .stylish-form .stylish-select > .dropdown-list .dropdown-option {
                        background: #fff;
                        padding: 5px 10px;
                        outline: 0
                    }
        
                        .stylish-form .stylish-select > .dropdown-list .dropdown-option.disabled, .stylish-form .stylish-select > .dropdown-list .dropdown-option.disabled:hover {
                            background: #fff;
                            color: #ccc;
                            cursor: default
                        }
        
                        .stylish-form .stylish-select > .dropdown-list .dropdown-option.group span {
                            display: block;
                            cursor: default;
                            font-weight: 700;
                            font-style: italic
                        }
        
                        .stylish-form .stylish-select > .dropdown-list .dropdown-option.group ul {
                            list-style: none
                        }
        
                .stylish-form .stylish-select.active, .stylish-form .stylish-select.focus {
                    background-color: #fafafa
                }
        
                .stylish-form .stylish-select > .dropdown-list .dropdown-option.option-selected, .stylish-form .stylish-select > .dropdown-list .dropdown-option:hover {
                    background-color: #c2c5c8
                }
        
                .stylish-form .stylish-select > .dropdown-list .dropdown-option.group.option-selected, .stylish-form .stylish-select > .dropdown-list .dropdown-option.group:hover {
                    background: 0 0
                }
        
            [dir=rtl] .stylish-form .stylish-select > span.selected {
                padding: 5px 10px 5px 30px
            }
        
            [dir=rtl] .stylish-form .stylish-select > span > span.ico {
                right: auto;
                left: 21px
            }
        
            .stylish-form .stylish-select.checkbox-dropdown .stylish-ds[data-type=checkbox] > span {
                border-color: #222
            }
        
            .stylish-form .stylish-select.checkbox-dropdown label {
                height: 42px;
                line-height: 42px;
                margin-bottom: 0;
                display: block
            }
        
            .stylish-form .ui-slider.ui-slider-horizontal {
                background: #999;
                height: 6px;
                margin-top: 24px
            }
        
            .stylish-form .ui-slider-range {
                background: #fff;
                height: 6px
            }
        
            .stylish-form .ui-slider-handle {
                background: #fff;
                height: 27px;
                width: 10px;
                margin-top: -5px;
                -webkit-border-radius: 3px;
                -moz-border-radius: 3px;
                -o-border-radius: 3px;
                border-radius: 3px
            }
        
                .stylish-form .ui-slider-handle:first-of-type {
                    margin-left: 0
                }
        </style>
        <header id="site-header" class="cf stylish-form " data-stylish-form="true">
            <div class="wrapper cf">
                <figure id="logo" class="left">
                    <a href="/" title="The AA | Home">
                        <img src="/Assets/images/logo.png" alt="The AA" class="print-only" />
                    </a>
                </figure>
                <div id="header-links" class="right">
                    <div id="helpful-links" class="cf desktop-tablet-view">
                        <p class="left">
                            <a href="/business"> Business customers</a> | <a href="/help-support"> Personal customers</a>
                        </p>
                        <div class="right">
                            <button id="navicon" class="mobile-view left">Menu<span class="toggle"></span></button>
                            <button id="navicon-close" class="mobile-view left hidden">Close<span class="toggle"></span></button>
                            <button id="route-planner" class="button secondary ghost align-top">Route planner</button>
                            <button id="search-icon" class="button secondary ghost align-top takeover-btn"></button>
                        </div>
                    </div>
                    <div id="search-takeover" class="form-module takeover right cf" tabindex="-1">
                        <p class="close-takeover right" tabindex="0">Close</p>
                        <form class="search form-section cf" action="/search" method="GET">
                            <div class="left search-input" tabindex="-1">
                                <input type="text" name="q" placeholder="What are you looking for?" autocomplete="off" autofocus />
                                <span class="close" role="button" tabindex="0"></span>
                            </div>
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit-search right ra">
                                <input type="submit" class="button ra" disabled />
                            </div>
                        </form>
                    </div>
                    <div id="route-planner-takeover" class="form-module takeover right cf" tabindex="-1">
                        <div class="right go-to">
                            <p class="left">
                                <a href="/route-planner/index.jsp"> Go to the Route planner</a>
                            </p>
                            <p class="close-takeover right" tabindex="0">Close</p>
                        </div>
                        <form class="route-planner form-section cf" action="/route-planner/index.jsp" method="post">
                            <label for="fromPlace" class="large-text">Where are you going?</label>
                            <div class="stylish-text" data-type="text" tabindex="-1">
                                <span></span>
                                <input type="text" placeholder="from" name="fromPlace" id="fromPlace" autocomplete="off" tabindex="0">
                            </div>
                            @*<input type="text" placeholder="from" name="fromPlace" id="fromPlace" autocomplete="off" />*@
                            <div class="stylish-text" data-type="text" tabindex="-1">
                                <span></span>
                                <input type="text" placeholder="to" name="toPlace" autocomplete="off" tabindex="0">
                            </div>
                            @*<input type="text" placeholder="to" name="toPlace" autocomplete="off" />*@
                            @Utility.Html.AntiForgeryToken()
                            <div class="submit right ra">
                                <input type="submit" class="button tertiary ghost-bordered ra" value="Get route" tabindex="0" />
                            </div>
                        </form>
                    </div>
                    <div id="top-level-menu" class="cf left">
                        <nav id="primary-navigation" typeof="SiteNavigationElement" class="desktop-nav">
                            <meta property="description" content="Mainsite Navigation">
                            <div class="container">
                                <ul>
                                    @foreach (Sitecore.Data.Items.Item menuItem in item.Children)
                                    {
                                        <!-- child -->
                                        @TopLevelMenuHelper(menuItem)
                                    }
                                    <li class="primary-item">
                                        <a href="/help-support/contact-us">Help</a>
                                    </li>
                                </ul>
                                <ul class="helpful-links mobile-view cf">
                                    <li><a href="/route-planner/index.jsp"> Go to the Route planner</a> <span class="toggle"></span></li>
                                    <li><a></a><a href="/business">Business customers</a> | <a></a><a href="/help-support"> Personal customers</a></li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                    <!-- TODO<button class="right button sign-in">Model.HeaderSettings.ExistingMembersButtonText</button> -->
                </div>
                <!--  TODO Html.Sitecore().Placeholder("ContentHubHeader") -->
            </div>
        </header>
        <!--  TODO Html.Sitecore().Rendering(ItemIds.Renderings.TheAA.Components.SignInPanel.ToString()) -->
        <div>
            <div class="menureplace-script"></div>
        </div>
        
    - ID: "c8f93afe-bfd4-4e8f-9c61-152559854661"
      Hint: __Valid from
      Value: 20200916T131545Z
    - ID: "d9cf14b1-fa16-4ba6-9288-e8a174d4d522"
      Hint: __Updated
      Value: 20230720T031618Z
  - Version: 5
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20200916T141201Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\paul_petersen
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "ad9e2214-fa61-4e10-94c4-255ccae7396b"
    - ID: "acce9b46-1f19-4d3d-a0ec-ed01d807bb7d"
      Hint: RazorView
      Value: |
        @using TheAA.Foundation.Rendering;
        @using System.Text;
        @using System.Text.RegularExpressions;
        @using System.Web;
        @using System.Web.Mvc;
        @using Fortis.Model;
        @using TheAA.SitecoreRepositories.Constants;
        @using TheAA.Domain.Interfaces.Repositories;
        @using TheAA.Domain.TheAATemplates.Data;
        @using TheAA.Domain.DataTransferObjects;
        @using TheAA.Domain.TheAATemplates.Modules;
        @using TheAA.Application.Constants;
        @using TheAA.Domain.Constants;
        @using TheAA.Domain.Interfaces.Utilities;
        @using TheAA.Application.ViewModels;
        
        @inherits  HtmlTemplateBase<ContentViewRenderingModel>
        
        @{
            var html = Model.Html;
            var resolver = DependencyResolver.Current;
            var itemFactory = resolver.GetService<IItemFactory>();
            var model = itemFactory.GetRenderingContextItems<IPresentationBase, IHtml>();
            var authenticationService = resolver.GetService<ISitecoreAuthenticationService>();
            var sitecoreSettings =  resolver.GetService<SitecoreSettings>();
            var sessionUtility =  resolver.GetService<ISessionUtility>();
            var ssoUrlUtility =  resolver.GetService<ISingleSignOnUrlUtility>();
        	var defaultModel = itemFactory.Select<IHtml>("/sitecore/content/TheAA/Global/Navigation/Header/Menu-Yellow");
            var navRootItems = model.RenderingItem != null ? model.RenderingItem.Children<IHtml>() : defaultModel.Children<IHtml>();
        	var linkurl =@System.Configuration.ConfigurationManager.AppSettings["TheAA.AccountLoginUrl"];
        }
        
        @if (navRootItems != null)
        {
        
            IHtml desktopLogo = null, mobileLogo = null;
            string backgroundColor = string.Empty;
            MvcHtmlString style = MvcHtmlString.Empty;
            var css = navRootItems.FirstOrDefault(i => i.Name.Equals("Css"));
            var js = navRootItems.FirstOrDefault(i => i.Name.Equals("Js"));
            var logos = navRootItems.FirstOrDefault(i => i.Name.Equals("Logos"));
            var topNavigation = navRootItems.FirstOrDefault(i => i.Name.Equals("Top Navigation"));
            var primaryNavigation = navRootItems.FirstOrDefault(i => i.Name.Equals("Primary Navigation"));
          
            bool isUserLoggedIn = authenticationService.IsUserLoggedIn();
            string firstName = authenticationService.GetCurrentUserProfileValue(MyAAUserProfileProperties.FirstName);
            string initials = string.IsNullOrEmpty(firstName)?string.Empty:char.ToUpper(firstName[0]).ToString();
            if (logos != null)
            {
                var childitems = logos.Children<IHtml>();
                desktopLogo = childitems.FirstOrDefault(i => i.Name.Equals("Desktop"));
                mobileLogo = childitems.FirstOrDefault(i => i.Name.Equals("Mobile"));
            }
            
        
            if (Model.Rendering !=null)
            {
                var parms =  Model.Rendering.Parameters;
                backgroundColor = parms["BackgroundColor"];
                style = (!string.IsNullOrEmpty(backgroundColor)) ? MvcHtmlString.Create("style=\"background-color:" + backgroundColor + ";\"") : MvcHtmlString.Empty;
            }
           
        
            if (css != null)
            {
                <style>
                    @Utility.RenderHtmlContent(css)
                </style>
            }
        
            if (js != null)
            {
                <script>
                    @Utility.RenderHtmlContent(js)
                </script>
            }
        
            <header id="site-header-yellow" class="cf" @style >
                <div class="wrapper cf">
                    @if (topNavigation != null)
                    {
                        var topNavigationLinks = topNavigation.Children<IHtml>();
                        var leftLinkItem = topNavigationLinks.FirstOrDefault(i => i.Name.Equals("Left"));
                        var rightLinkItem = topNavigationLinks.FirstOrDefault(i => i.Name.Equals("Right"));
        
                        <div class="top-header-links cf">
                        @if(leftLinkItem !=null)
                        {
                                <div class="left reltive">
                                    @foreach (var link in  leftLinkItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                    {
                                        @html.Raw(link.ContentsValue);
                                    }
                                </div>
                        }
        
                        @if(rightLinkItem !=null)
                        {
                                <div class="right mobile-grey">
                                    <ul class="top-links">
                                        @foreach (var link in  rightLinkItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                        {
                                            <li>
                                                @html.Raw(link.ContentsValue)
                                            </li>
                                        }
                                    </ul>
                                 
                                </div>
                         }
                        </div>
                    }
        
                    @if (desktopLogo != null || mobileLogo != null)
                    {
                        <div class="left logo">
                            <a href="/" title="The AA | Home">
                                <span class="svg-desktop">@html.Raw(desktopLogo.ContentsValue)</span>
                                <span class="svg-mobile">@html.Raw(mobileLogo.ContentsValue)</span>
                            </a>
                        </div>
                    }
                    <button class="mobile-tablet-menu" aria-label="Navigation Menu" aria-expanded="false" style="background:none; border: none;"><span class="menu">Menu</span> </button>
        
                    <div class="main-nav cf">
                        <div class="cf nav-logo">
                            @if (mobileLogo != null)
                            {
                                <div class="left menu-logo">
                                    <a href="/" title="The AA | Home">
                                        @html.Raw(mobileLogo.ContentsValue)
                                    </a>
                                </div>
                            }
                            <button class="mobile-tablet-menu-open" aria-expanded="false" style="background:none; border: none;padding-right:32px;"><span class="close">Close</span></button>
                        </div>
        
                        <div id="mainNavigation" class="right desktop-white">
                                <ul class="aa-main-nav"  role="menubar" >
                                    @foreach (var primaryItem in primaryNavigation.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                    {
                                        var primaryClass = primaryItem.HasChildren ? "childrens" : "";
                                        bool isAccountMenu = primaryItem.Name.Contains("Account");
                                        var megaNavAccountClass = isAccountMenu ? "my-account" : string.Empty;
                                        megaNavAccountClass = isUserLoggedIn ? megaNavAccountClass + " logged-in" : megaNavAccountClass;
        
                                        <li class="primary @primaryClass" role="menuitem" aria-haspopup="true">
                                            @if (isAccountMenu && isUserLoggedIn)
                                            {
                                               <button class="anchor">
        
        <span class="padlock">
        
        <svg width="16" height="21" viewBox="0 0 16 21" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M14 6.5H13V5.5C13 2.73858 10.7614 0.5 8 0.5C5.23858 0.5 3 2.73858 3 5.5V6.5H2C0.89543 6.5 0 7.39543 0 8.5V18.5C0 19.6046 0.89543 20.5 2 20.5H14C15.1046 20.5 16 19.6046 16 18.5V8.5C16 7.39543 15.1046 6.5 14 6.5ZM5 5.5C5 3.84315 6.34315 2.5 8 2.5C9.65685 2.5 11 3.84315 11 5.5V6.5H5V5.5ZM14 18.5H2V8.5H14V18.5ZM8 15.5C9.10457 15.5 10 14.6046 10 13.5C10 12.3954 9.10457 11.5 8 11.5C6.89543 11.5 6 12.3954 6 13.5C6 14.6046 6.89543 15.5 8 15.5Z" fill="white"/>
        </svg>
        </span> Account<hr></button>
                                            }
                                            else
                                            {
                                                @html.Raw(primaryItem.ContentsValue)
                                            }
                                            <nav id="aa-mega-menu" class="aa-mega-menu @megaNavAccountClass">
                                                @if (isAccountMenu && isUserLoggedIn)
                                                {
                                                    <div class="login-title">@html.Raw(primaryNavigation.ContentsValue)</div>
                                                }
                                                <div class="column cf">
                                                        @foreach (var columnItem in primaryItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                                        {
                                                            <ul class="sub-menu col">
                                                                    @foreach (var link in columnItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                                                    {
                                                                        ///Link with name prefix Logged in - are only displayed when user is in logged in state
                                                                        ///other links with name prefix Logged out - are displayed when user is not authenticated or loggeed out
        
                                                                        ///Skip Logged in - links from rendering if user is NOT logged in state
                                                                        if (!isUserLoggedIn && link.Name.StartsWith("Logged in"))
                                                                        { continue; }
                                                                        
                                                                         ///Skip Logged out - links from rendering if user is in the logged in state
                                                                        if (isUserLoggedIn && link.Name.StartsWith("Logged out"))
                                                                        { continue; }
        
                                                                        if(isUserLoggedIn && link.ContentsValue.Contains("logout"))
                                                                        {
                                                                           ///Render log out link dynamically. Extract href and anchor text set in CMS
                                                                           ///logout anchor href in CMS has placeholders which needs to be dynamically replaced
                                                                           var match =  Regex.Match(link.ContentsValue, "<a[^>]*? href=\"(?<url>[^\"]+)\"[^>]*?>(?<text>.*?)</a>");
                                                                           string href = match.Groups["url"].Value;
                                                                           string innerText = match.Groups["text"].Value;
                                                                           
                                                                           href= string.Format(href,sitecoreSettings.MyAAIdpEntityId
                                                                           ,sessionUtility.GetValueFromSession<string>(SingleSignOnConstants.SamlSubjectNameId)
                                                                           ,sessionUtility.GetValueFromSession<string>(SingleSignOnConstants.SamlSessionIndex)
                                                                           ,"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"
                                                                           ,ssoUrlUtility.GetDefaultRelayStateUrl());
        
                                                                           <li class="secondary"><a href="@href" class="logout">@innerText</a></li>
                                                                        }
                                                                        else
                                                                        {
                                                                           var login_url=String.Format(link.ContentsValue,linkurl.ToString());
        																	if(link.Name.StartsWith("Logged out")){
        																		<li class="secondary">@html.Raw(login_url)</li>
        																	}	
        																	else{				
        																		<li class="secondary">@html.Raw(link.ContentsValue)</li>
        																	} 
                                                                        }
                                                                        
                                                                    }
                                                            </ul>
                                                        }
                                                </div>
                                            </nav>
                                        </li>
                                    }
                                </ul>
                        </div>
                    </div>
                </div>
            </header>
        
            <div id="mainContent"></div>
        }
        
        
    - ID: "badd9cf9-53e0-4d0c-bcc0-2d784c282f6a"
      Hint: __Updated by
      Value: |
        sitecore\unicorn
    - ID: "c8f93afe-bfd4-4e8f-9c61-152559854661"
      Hint: __Valid from
      Value: 20200916T141201Z
    - ID: "d9cf14b1-fa16-4ba6-9288-e8a174d4d522"
      Hint: __Updated
      Value: 20230720T031618Z
  - Version: 6
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20230321T102758Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
    - ID: "8cdc337e-a112-42fb-bbb4-4143751e123f"
      Hint: __Revision
      Value: "b05c8ea5-e8bb-4885-a929-70e752241a40"
    - ID: "acce9b46-1f19-4d3d-a0ec-ed01d807bb7d"
      Hint: RazorView
      Value: |
        @using TheAA.Foundation.Rendering;
        @using System.Text;
        @using System.Text.RegularExpressions;
        @using System.Web;
        @using System.Web.Mvc;
        @using Fortis.Model;
        @using TheAA.SitecoreRepositories.Constants;
        @using TheAA.Domain.Interfaces.Repositories;
        @using TheAA.Domain.TheAATemplates.Data;
        @using TheAA.Domain.DataTransferObjects;
        @using TheAA.Domain.TheAATemplates.Modules;
        @using TheAA.Application.Constants;
        @using TheAA.Domain.Constants;
        @using TheAA.Domain.Interfaces.Utilities;
        @using TheAA.Application.ViewModels;
        
        @inherits  HtmlTemplateBase<ContentViewRenderingModel>
        
        @{
            var html = Model.Html;
            var resolver = DependencyResolver.Current;
            var itemFactory = resolver.GetService<IItemFactory>();
            var model = itemFactory.GetRenderingContextItems<IPresentationBase, IHtml>();
            var authenticationService = resolver.GetService<ISitecoreAuthenticationService>();
            var sitecoreSettings =  resolver.GetService<SitecoreSettings>();
            var sessionUtility =  resolver.GetService<ISessionUtility>();
            var ssoUrlUtility =  resolver.GetService<ISingleSignOnUrlUtility>();
        	var defaultModel = itemFactory.Select<IHtml>("/sitecore/content/TheAA/Global/Navigation/Header/Menu-Yellow");
            var navRootItems = model.RenderingItem != null ? model.RenderingItem.Children<IHtml>() : defaultModel.Children<IHtml>();
        	var linkurl =@System.Configuration.ConfigurationManager.AppSettings["TheAA.AccountLoginUrl"];
        }
        
        @if (navRootItems != null)
        {
        
            IHtml desktopLogo = null, mobileLogo = null;
            string backgroundColor = string.Empty;
            MvcHtmlString style = MvcHtmlString.Empty;
            var css = navRootItems.FirstOrDefault(i => i.Name.Equals("Css"));
            var js = navRootItems.FirstOrDefault(i => i.Name.Equals("Js"));
            var logos = navRootItems.FirstOrDefault(i => i.Name.Equals("Logos"));
            var topNavigation = navRootItems.FirstOrDefault(i => i.Name.Equals("Top Navigation"));
            var primaryNavigation = navRootItems.FirstOrDefault(i => i.Name.Equals("Primary Navigation"));
          
            bool isUserLoggedIn = authenticationService.IsUserLoggedIn();
            string firstName = authenticationService.GetCurrentUserProfileValue(MyAAUserProfileProperties.FirstName);
            string initials = string.IsNullOrEmpty(firstName)?string.Empty:char.ToUpper(firstName[0]).ToString();
            if (logos != null)
            {
                var childitems = logos.Children<IHtml>();
                desktopLogo = childitems.FirstOrDefault(i => i.Name.Equals("Desktop"));
                mobileLogo = childitems.FirstOrDefault(i => i.Name.Equals("Mobile"));
            }
        
            if (css != null)
            {
                <style>
                    @Utility.RenderHtmlContent(css)
                </style>
            }
        
            if (js != null)
            {
                <script>
                    @Utility.RenderHtmlContent(js)
                </script>
            }
        
            <header id="site-header-yellow" class="cf">
                <div class="wrapper cf">
                    @if (topNavigation != null)
                    {
                        var topNavigationLinks = topNavigation.Children<IHtml>();
                        var leftLinkItem = topNavigationLinks.FirstOrDefault(i => i.Name.Equals("Left"));
                        var rightLinkItem = topNavigationLinks.FirstOrDefault(i => i.Name.Equals("Right"));
        
                        <div class="top-header-links cf">
                        @if(leftLinkItem !=null)
                        {
                                <div class="left reltive">
                                    @foreach (var link in  leftLinkItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                    {
                                        @html.Raw(link.ContentsValue);
                                    }
                                </div>
                        }
        
                        @if(rightLinkItem !=null)
                        {
                                <div class="right mobile-grey">
                                    <ul class="top-links">
                                        @foreach (var link in  rightLinkItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                        {
                                            <li>
                                                @html.Raw(link.ContentsValue)
                                            </li>
                                        }
                                    </ul>
                                 
                                </div>
                         }
                        </div>
                    }
        
                    @if (desktopLogo != null || mobileLogo != null)
                    {
                        <div class="left logo">
                            <a href="/" title="The AA | Home">
                                <span class="svg-desktop">@html.Raw(desktopLogo.ContentsValue)</span>
                                <span class="svg-mobile">@html.Raw(mobileLogo.ContentsValue)</span>
                            </a>
                        </div>
                    }
                    <button class="mobile-tablet-menu" aria-label="Navigation Menu" aria-expanded="false" style="background:none; border: none;"><span class="menu">Menu</span> </button>
        
                    <div class="main-nav cf">
                        <div class="cf nav-logo">
                            @if (mobileLogo != null)
                            {
                                <div class="left menu-logo">
                                    <a href="/" title="The AA | Home">
                                        @html.Raw(mobileLogo.ContentsValue)
                                    </a>
                                </div>
                            }
                            <button class="mobile-tablet-menu-open" aria-expanded="false" style="background:none; border: none;padding-right:32px;"><span class="close">Close</span></button>
                        </div>
        
                        <div id="mainNavigation" class="right desktop-white">
                                <ul class="aa-main-nav"  role="menubar" >
                                    @foreach (var primaryItem in primaryNavigation.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                    {
                                        var primaryClass = primaryItem.HasChildren ? "childrens" : "";
                                        bool isAccountMenu = primaryItem.Name.Contains("Account");
                                        var megaNavAccountClass = isAccountMenu ? "my-account" : string.Empty;
                                        megaNavAccountClass = isUserLoggedIn ? megaNavAccountClass + " logged-in" : megaNavAccountClass;
        
                                        <li class="primary @primaryClass" role="menuitem" aria-haspopup="true">
                                            @if (isAccountMenu && isUserLoggedIn)
                                            {
                                               <button class="anchor">
        
        <span class="padlock">
        
        <svg width="16" height="21" viewBox="0 0 16 21" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M14 6.5H13V5.5C13 2.73858 10.7614 0.5 8 0.5C5.23858 0.5 3 2.73858 3 5.5V6.5H2C0.89543 6.5 0 7.39543 0 8.5V18.5C0 19.6046 0.89543 20.5 2 20.5H14C15.1046 20.5 16 19.6046 16 18.5V8.5C16 7.39543 15.1046 6.5 14 6.5ZM5 5.5C5 3.84315 6.34315 2.5 8 2.5C9.65685 2.5 11 3.84315 11 5.5V6.5H5V5.5ZM14 18.5H2V8.5H14V18.5ZM8 15.5C9.10457 15.5 10 14.6046 10 13.5C10 12.3954 9.10457 11.5 8 11.5C6.89543 11.5 6 12.3954 6 13.5C6 14.6046 6.89543 15.5 8 15.5Z" fill="white"/>
        </svg>
        </span> Account<hr></button>
                                            }
                                            else
                                            {
                                                @html.Raw(primaryItem.ContentsValue)
                                            }
                                            <nav id="aa-mega-menu" class="aa-mega-menu @megaNavAccountClass">
                                                @if (isAccountMenu && isUserLoggedIn)
                                                {
                                                    <div class="login-title">@html.Raw(primaryNavigation.ContentsValue)</div>
                                                }
                                                <div class="column cf">
                                                        @foreach (var columnItem in primaryItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                                        {
                                                            <ul class="sub-menu col">
                                                                    @foreach (var link in columnItem.Children<IHtml>() ?? Enumerable.Empty<IHtml>())
                                                                    {
                                                                        ///Link with name prefix Logged in - are only displayed when user is in logged in state
                                                                        ///other links with name prefix Logged out - are displayed when user is not authenticated or loggeed out
        
                                                                        ///Skip Logged in - links from rendering if user is NOT logged in state
                                                                        if (!isUserLoggedIn && link.Name.StartsWith("Logged in"))
                                                                        { continue; }
                                                                        
                                                                         ///Skip Logged out - links from rendering if user is in the logged in state
                                                                        if (isUserLoggedIn && link.Name.StartsWith("Logged out"))
                                                                        { continue; }
        
                                                                        if(isUserLoggedIn && link.ContentsValue.Contains("logout"))
                                                                        {
                                                                           ///Render log out link dynamically. Extract href and anchor text set in CMS
                                                                           ///logout anchor href in CMS has placeholders which needs to be dynamically replaced
                                                                           var match =  Regex.Match(link.ContentsValue, "<a[^>]*? href=\"(?<url>[^\"]+)\"[^>]*?>(?<text>.*?)</a>");
                                                                           string href = match.Groups["url"].Value;
                                                                           string innerText = match.Groups["text"].Value;
                                                                           
                                                                           href= string.Format(href,sitecoreSettings.MyAAIdpEntityId
                                                                           ,sessionUtility.GetValueFromSession<string>(SingleSignOnConstants.SamlSubjectNameId)
                                                                           ,sessionUtility.GetValueFromSession<string>(SingleSignOnConstants.SamlSessionIndex)
                                                                           ,"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"
                                                                           ,ssoUrlUtility.GetDefaultRelayStateUrl());
        
                                                                           <li class="secondary"><a href="@href" class="logout">@innerText</a></li>
                                                                        }
                                                                        else
                                                                        {
                                                                           var login_url=String.Format(link.ContentsValue,linkurl.ToString());
        																	if(link.Name.StartsWith("Logged out")){
        																		<li class="secondary">@html.Raw(login_url)</li>
        																	}	
        																	else{				
        																		<li class="secondary">@html.Raw(link.ContentsValue)</li>
        																	} 
                                                                        }
                                                                        
                                                                    }
                                                            </ul>
                                                        }
                                                </div>
                                            </nav>
                                        </li>
                                    }
                                </ul>
                        </div>
                    </div>
                </div>
            </header>
        
            <div id="mainContent"></div>
        }
        
        
    - ID: "c8f93afe-bfd4-4e8f-9c61-152559854661"
      Hint: __Valid from
      Value: 20230321T102758Z
    - ID: "d9cf14b1-fa16-4ba6-9288-e8a174d4d522"
      Hint: __Updated
      Value: 20230720T031618Z
